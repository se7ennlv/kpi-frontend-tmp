"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[5761],{3948:(Z,A,u)=>{u.d(A,{h:()=>t});var n=u(8274),d=u(6895),o=u(6679);const h=function(p){return{background:p}};function c(p,r){if(1&p&&(n.ynx(0),n.TgZ(1,"p-tag",1)(2,"div",2),n._UZ(3,"i",3),n.TgZ(4,"span",4),n._uU(5),n.qZA()()(),n.BQk()),2&p){const E=r.ngIf;n.xp6(1),n.Akn(n.VKq(6,h,E.color)),n.Q6J("rounded",!0),n.xp6(2),n.Tol(E.icon),n.xp6(2),n.Oqu(E.name)}}let t=(()=>{class p{constructor(){}ngOnInit(){}trackByFn(E,l){return l.id||E}}return p.\u0275fac=function(E){return new(E||p)},p.\u0275cmp=n.Xpm({type:p,selectors:[["app-task-status"]],inputs:{taskStatus:"taskStatus"},decls:1,vars:1,consts:[[4,"ngIf"],["styleClass","px-3",3,"rounded"],[1,"flex","align-items-center","gap-1"],[2,"font-size","11px"],[1,"font-semibold",2,"font-size","11px"]],template:function(E,l){1&E&&n.YNc(0,c,6,8,"ng-container",0),2&E&&n.Q6J("ngIf",l.taskStatus)},dependencies:[d.O5,o.V],encapsulation:2}),p})()},9981:(Z,A,u)=>{u.d(A,{o:()=>h});var n=u(6895),d=u(6679),o=u(8274);let h=(()=>{class c{}return c.\u0275fac=function(p){return new(p||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({imports:[n.ez,d.W]}),c})()},3446:(Z,A,u)=>{u.d(A,{O:()=>p});var n=u(8274),d=u(433),o=u(6895),h=u(2156),c=u(585);function t(r,E){1&r&&(n.ynx(0),n.TgZ(1,"label",3)(2,"span"),n._uU(3,"\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5:"),n.qZA()(),n.BQk())}let p=(()=>{class r{constructor(l,m){this.parentForm=l,this.cdr=m,this.showLabel=!0,this.yearSelected=new n.vpe,this.onChange=()=>{},this.onTouched=()=>{}}get control(){return this.formGroup.get("docYear")}ngOnInit(){this.formGroup=this.parentForm.control;const l=(new Date).getFullYear(),m=new Date(l,0,1);this.formGroup.patchValue({docYear:m}),this.cdr.detectChanges()}writeValue(l){l&&(this.selectedValue=l)}registerOnChange(l){this.onChange=l}registerOnTouched(l){this.onTouched=l}onSelectYear(l){this.writeValue(l),this.onChange(l),this.yearSelected.emit(l)}}return r.\u0275fac=function(l){return new(l||r)(n.Y36(d.sg),n.Y36(n.sBO))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-year-picker"]],inputs:{showLabel:"showLabel"},outputs:{yearSelected:"yearSelected"},features:[n._Bn([{provide:d.JU,useExisting:(0,n.Gpc)(()=>r),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[4,"ngIf"],["view","year","dateFormat","yy","inputId","yearpicker","placeholder","\u0ec0\u0ea5\u0eb7\u0ead\u0e81\u0e9b\u0eb5","styleClass","mr-2","formControlName","docYear",3,"readonlyInput","onSelect"],["for","yearpicker",1,"font-semibold","white-space-nowrap","mr-1"]],template:function(l,m){1&l&&(n.TgZ(0,"form",0),n.YNc(1,t,4,0,"ng-container",1),n.TgZ(2,"p-calendar",2),n.NdJ("onSelect",function(_){return m.onSelectYear(_)}),n.qZA()()),2&l&&(n.Q6J("formGroup",m.formGroup),n.xp6(1),n.Q6J("ngIf",m.showLabel),n.xp6(1),n.Q6J("readonlyInput",!0))},dependencies:[o.O5,d._Y,d.JJ,d.JL,d.sg,d.u,h.bc,h.VP,h.YE,c.f],encapsulation:2}),r})()},6522:(Z,A,u)=>{u.d(A,{_:()=>n});class n{static getWaiting(o,h=!0){let c=["main.id","main.docYear","main.taskId","main.taskSubject","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.selfCode","main.createdAt","main.isLock","staff.staffCode","staff.firstName","staff.lastName","status.icon","status.name","status.color"];return h&&c.push("main.taskWfId"),{query:{fields:c,joins:["staff","status"],filters:o,getType:"MANY"}}}static getMany(o){return{query:{fields:["main.docYear","main.id","main.taskId","main.taskSubject","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.headTimeScore","main.headQuantityScore","main.headQualityScore","main.headSatisfiedScore","main.selfCode","main.createdAt","main.headActionAt","main.isLock","staff.staffCode","staff.firstName","staff.lastName","status.icon","status.name","status.color"],joins:["staff","status"],filters:o,getType:"MANY"}}}static getDetail(o,h=!0){const c=["main.docYear","main.id","main.taskId","main.taskSubject","main.reportDetail","main.scheduledStart","main.scheduledEnd","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.selfCode","main.headTimeScore","main.headQuantityScore","main.headQualityScore","main.headSatisfiedScore","main.createdAt","main.headActionAt","main.comment","task.indicatorTime","task.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","priority.name","priority.color","priority.score","staff.staffCode","staff.firstName","staff.lastName","head.staffCode","head.firstName","head.lastName","status.icon","status.name","status.color","attached.fileName","attached.filePath"];return h&&c.push("main.taskWfId"),{query:{fields:c,joins:["task","iq","is","priority","staff","head","status","attached"],filters:o,getType:"ONE"}}}static getPlanSubDetail(o){return{query:{fields:["main.id","main.docYear","main.taskWfId","main.taskId","main.taskSubject","main.reportDetail","main.scheduledStart","main.scheduledEnd","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.selfCode","main.headTimeScore","main.headQuantityScore","main.headQualityScore","main.headSatisfiedScore","main.createdAt","main.headActionAt","main.comment","task.indicatorTime","task.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","staff.staffCode","staff.firstName","staff.lastName","head.staffCode","head.firstName","head.lastName","status.icon","status.name","status.color","attached.fileName","attached.filePath"],joins:["task","iq","is","staff","head","status","attached"],filters:o,getType:"ONE"}}}}},875:(Z,A,u)=>{u.d(A,{K:()=>n});class n{static getMany(o){return{query:{fields:["main.id","main.docYear","main.taskId","main.taskSubject","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.selfCode","main.createdAt","main.isLock","status.id","status.icon","status.name","status.color"],joins:["status"],filters:o,getType:"MANY"}}}static getDetail(o){return{query:{fields:["main.id","main.docYear","main.taskId","main.taskSubject","main.reportDetail","main.scheduledStart","main.scheduledEnd","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.selfCode","main.createdAt","main.headActionAt","main.comment","task.id","task.indicatorTime","task.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","staff.staffCode","staff.firstName","staff.lastName","head.staffCode","head.firstName","head.lastName","status.icon","status.name","status.color","attached.attachRefId","attached.docRefId","attached.fileName","attached.filePath"],joins:["task","iq","is","staff","head","status","attached"],filters:o,getType:"ONE"}}}static getStatus(o){return{query:{fields:["main.id","status.id","status.name","status.icon","status.color"],joins:["status"],filters:o,getType:"ONE"}}}}},1873:(Z,A,u)=>{u.r(A),u.d(A,{EvalHistoryModule:()=>pt});var n=u(6895),d=u(5675),o=u(7579),h=u(2722),c=u(7248),t=u(8274),p=u(1094),r=u(8145),E=u(4325),l=u(6832),m=u(2156),f=u(1481),_=u(830),x=u(9869),T=u(433),C=u(805),U=u(1740),D=u(3608),S=u(793),Y=u(3446),I=u(3948),b=u(6522),P=u(704),w=u(2946),q=u(7147),O=u(8639),Q=u(3609);function k(a,s){1&a&&(t.TgZ(0,"span",5),t._uU(1,"\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99\u0e82\u0ead\u0e87 (\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81)"),t.qZA())}function N(a,s){if(1&a&&t._UZ(0,"p",16),2&a){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("innerHTML",i.transform(null==e?null:e.reportDetail),t.oJD)}}function H(a,s){if(1&a&&(t.TgZ(0,"tr")(1,"td",17)(2,"span",18),t._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td",12),t._UZ(8,"p-badge",19),t.qZA(),t.TgZ(9,"td",12),t._UZ(10,"p-badge",20),t.qZA()()),2&a){const e=t.oxw().ngIf,i=t.oxw().ngIf;t.xp6(5),t.Oqu(t.xi3(6,3,null==e?null:e.indicatorTime,"dd/MM/yyyy HH:mm")),t.xp6(3),t.s9C("value",null==i?null:i.selfTimeScore),t.xp6(2),t.s9C("value",null==i?null:i.headTimeScore)}}function j(a,s){if(1&a&&(t.TgZ(0,"tr")(1,"td",17)(2,"span",18),t._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",12),t._UZ(7,"p-badge",19),t.qZA(),t.TgZ(8,"td",12),t._UZ(9,"p-badge",20),t.qZA()()),2&a){const e=t.oxw().ngIf,i=t.oxw().ngIf;t.xp6(5),t.Oqu(null==e?null:e.indicatorQuantity),t.xp6(2),t.s9C("value",null==i?null:i.selfQuantityScore),t.xp6(2),t.s9C("value",null==i?null:i.headQuantityScore)}}function J(a,s){if(1&a&&(t.TgZ(0,"tr")(1,"td",17)(2,"span",18),t._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",12),t._UZ(7,"p-badge",19),t.qZA(),t.TgZ(8,"td",12),t._UZ(9,"p-badge",20),t.qZA()()),2&a){const e=t.oxw().ngIf,i=t.oxw().ngIf;t.xp6(5),t.Oqu(null==e||null==e.indicatorQuality?null:e.indicatorQuality.subject),t.xp6(2),t.s9C("value",null==i?null:i.selfQualityScore),t.xp6(2),t.s9C("value",null==i?null:i.headQualityScore)}}function R(a,s){if(1&a&&(t.TgZ(0,"tr")(1,"td",17)(2,"span",18),t._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",12),t._UZ(7,"p-badge",19),t.qZA(),t.TgZ(8,"td",12),t._UZ(9,"p-badge",20),t.qZA()()),2&a){const e=t.oxw().ngIf,i=t.oxw().ngIf;t.xp6(5),t.Oqu(null==e||null==e.indicatorSatisfied?null:e.indicatorSatisfied.subject),t.xp6(2),t.s9C("value",null==i?null:i.selfSatisfiedScore),t.xp6(2),t.s9C("value",null==i?null:i.headSatisfiedScore)}}function L(a,s){if(1&a&&(t.ynx(0),t.YNc(1,H,11,6,"tr",2),t.YNc(2,j,10,3,"tr",2),t.YNc(3,J,10,3,"tr",2),t.YNc(4,R,10,3,"tr",2),t.BQk()),2&a){const e=s.ngIf;t.xp6(1),t.Q6J("ngIf",null==e?null:e.indicatorTime),t.xp6(1),t.Q6J("ngIf",null==e?null:e.indicatorQuantity),t.xp6(1),t.Q6J("ngIf",null==e?null:e.indicatorQuality),t.xp6(1),t.Q6J("ngIf",null==e?null:e.indicatorSatisfied)}}function F(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"p-chip",25),t.NdJ("click",function(){const B=t.CHM(e).$implicit,v=t.oxw(3);return t.KtG(v.showPreviewFromUrl(null==B?null:B.filePath))}),t._UZ(1,"i",26),t.TgZ(2,"span",27),t._uU(3),t.qZA()()}if(2&a){const e=s.$implicit;t.xp6(3),t.hij("",null==e?null:e.fileName," ")}}function $(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"div",21)(2,"label",6),t._uU(3,"\u0ec0\u0ead\u0e81\u0eb0\u0eaa\u0eb2\u0e99\u0ec1\u0e99\u0e9a"),t.qZA(),t._UZ(4,"hr",22),t.TgZ(5,"div",23),t.YNc(6,F,4,1,"ng-template",24),t.qZA()(),t.BQk()),2&a){const e=t.oxw().ngIf;t.xp6(6),t.Q6J("ngForOf",e.attachments)}}function W(a,s){1&a&&(t.TgZ(0,"span",5),t._uU(1,"\u0e81\u0eb2\u0e99\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0e82\u0ead\u0e87 (\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2)"),t.qZA())}function K(a,s){if(1&a&&(t.TgZ(0,"p-fieldset",28),t.YNc(1,W,2,0,"ng-template",4),t.TgZ(2,"div",29)(3,"div",30)(4,"div")(5,"label",5),t._uU(6,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99:"),t.qZA()(),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"div",31)(10,"div")(11,"label",5),t._uU(12,"\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0ec2\u0e94\u0e8d:"),t.qZA()(),t._uU(13),t.qZA(),t.TgZ(14,"div",32)(15,"div")(16,"label",5),t._uU(17,"\u0e84\u0eb3\u0ec0\u0eab\u0eb1\u0e99"),t.qZA()(),t._uU(18),t.qZA()()()),2&a){const e=t.oxw().ngIf;t.Q6J("toggleable",!0),t.xp6(7),t.hij(" ",t.xi3(8,5,null==e?null:e.headActionAt,"dd/MM/yyyy HH:mm")," "),t.xp6(6),t.AsE(" ",null==e||null==e.head?null:e.head.firstName," ",null==e||null==e.head?null:e.head.lastName," "),t.xp6(5),t.hij(" ",null==e?null:e.comment," ")}}function z(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"p-fieldset",3),t.YNc(2,k,2,0,"ng-template",4),t.TgZ(3,"div")(4,"label",5),t._uU(5),t.qZA()(),t.TgZ(6,"div")(7,"label",6),t._uU(8,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99:"),t.qZA(),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"div",7)(12,"label",6),t._uU(13,"\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99\u0ec2\u0e94\u0e8d:"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"div",7)(16,"label",6),t._uU(17,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81:"),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"p"),t._uU(20),t.qZA()(),t.TgZ(21,"div",7)(22,"label",6),t._uU(23,"\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0e84\u0ea7\u0eb2\u0ea1\u0e84\u0eb7\u0e9a\u0edc\u0ec9\u0eb2"),t.qZA(),t._UZ(24,"br"),t.YNc(25,N,1,1,"p",8),t.qZA(),t.TgZ(26,"div")(27,"label",6),t._uU(28,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ec0\u0ea5\u0eb5\u0ec8\u0ea1\u0e9b\u0eb0\u0e95\u0eb4\u0e9a\u0eb1\u0e94:"),t.qZA(),t._uU(29),t.ALo(30,"date"),t.qZA(),t.TgZ(31,"div",7)(32,"label",6),t._uU(33,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94:"),t.qZA(),t._uU(34),t.ALo(35,"date"),t.qZA(),t.TgZ(36,"table",9)(37,"thead")(38,"tr")(39,"th",10),t._uU(40,"\u0e81\u0eb2\u0e99\u0e95\u0eb1\u0ec9\u0e87\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94\u0e82\u0ead\u0e87 (\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2) "),t.qZA(),t.TgZ(41,"th",11),t._uU(42,"\u0e81\u0eb2\u0e99\u0ec3\u0eab\u0ec9\u0e84\u0eb0\u0ec1\u0e99\u0e99"),t.qZA()(),t.TgZ(43,"tr")(44,"th",12)(45,"small"),t._uU(46,"(\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81)"),t.qZA()(),t.TgZ(47,"th",12)(48,"small"),t._uU(49,"(\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2)"),t.qZA()()()(),t.TgZ(50,"tbody"),t.YNc(51,L,5,4,"ng-container",2),t.qZA()(),t.TgZ(52,"div",13)(53,"label",6),t._uU(54,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0:"),t.qZA(),t._UZ(55,"app-task-status",14),t.qZA(),t.YNc(56,$,7,1,"ng-container",2),t.qZA(),t.YNc(57,K,19,8,"p-fieldset",15),t.BQk()),2&a){const e=s.ngIf;t.xp6(1),t.Q6J("toggleable",!0),t.xp6(4),t.hij("\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5: ",null==e?null:e.docYear,""),t.xp6(4),t.hij(" ",t.xi3(10,13,null==e?null:e.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(5),t.AsE(" ",null==e||null==e.staff?null:e.staff.firstName," ",null==e||null==e.staff?null:e.staff.lastName," "),t.xp6(6),t.Oqu(null==e?null:e.taskSubject),t.xp6(5),t.Q6J("ngIf",null==e?null:e.reportDetail),t.xp6(4),t.hij(" ",t.xi3(30,16,null==e?null:e.scheduledStart,"dd/MM/yyyy")," "),t.xp6(5),t.hij(" ",t.xi3(35,19,null==e?null:e.scheduledEnd,"dd/MM/yyyy HH:mm")," "),t.xp6(17),t.Q6J("ngIf",null==e?null:e.task),t.xp6(4),t.Q6J("taskStatus",null==e?null:e.status),t.xp6(1),t.Q6J("ngIf",e.attachments&&e.attachments.length),t.xp6(1),t.Q6J("ngIf",null==e?null:e.headActionAt)}}function G(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-file-preview",33),t.NdJ("closePreview",function(){t.CHM(e);const g=t.oxw();return t.KtG(g.closeImgPreview())}),t.qZA(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("selectedFileOrUrl",e.fileSrc)}}let V=(()=>{class a{constructor(e,i,g,B,v,y){this.headEvalService=e,this.dialogConfig=i,this.dialogRef=g,this.sanitizer=B,this.utilService=v,this.alertService=y,this.visiblePreview=!1,this.destroy$=new o.x}ngOnInit(){this.docId=this.dialogConfig?.data?.docId,this.getReportDetail()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}closeDialog(){this.dialogRef.close()}closeImgPreview(){this.visiblePreview=!1}showPreviewFromUrl(e){e&&(this.utilService.isValidUrl(e)?(this.fileSrc=e,this.visiblePreview=!0):this.alertService.showDanger("\u0eae\u0eb9\u0e9a\u0ec1\u0e9a\u0e9a\u0e97\u0eb5\u0ec8\u0ea2\u0eb9\u0ec8\u0e82\u0ead\u0e87\u0ec4\u0e9f\u0ea5\u0ecc\u0e9a\u0ecd\u0ec8\u0e96\u0eb7\u0e81\u0e95\u0ec9\u0ead\u0e87!"))}getReportDetail(){if(this.docId){const i=b._.getDetail({id:this.docId},!1);this.headEvalService.getOne(i).subscribe(),this.evaluation$=this.headEvalService.item$}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.P),t.Y36(E.S),t.Y36(E.E7),t.Y36(f.H7),t.Y36(p.F),t.Y36(P.c))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-eval-detail"]],decls:5,vars:4,consts:[[1,"grid"],[1,"col-12"],[4,"ngIf"],[3,"toggleable"],["pTemplate","header"],[1,"font-semibold","text-xl"],[1,"font-semibold","text-xl","mb-0"],[1,"field"],[3,"innerHTML",4,"ngIf"],[1,"table-custom","my-4"],["colspan","2","rowspan","2",1,"text-left","text-xl","white-space-nowrap"],["colspan","2",1,"text-center","text-lg","white-space-nowrap"],[1,"text-center"],[1,"field","flex","align-items-center","gap-2"],[3,"taskStatus"],["styleClass","mt-5",3,"toggleable",4,"ngIf"],[3,"innerHTML"],[1,"white-space-nowrap"],[1,"font-bold"],[3,"value"],["severity","success",3,"value"],[1,"field","mt-5"],[1,"mt-0"],[1,"flex","gap-2"],["ngFor","",3,"ngForOf"],["styleClass","cursor-pointer",3,"click"],[1,"pi","pi-paperclip","mr-2","text-green-500"],[1,"w-8rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],["styleClass","mt-5",3,"toggleable"],[1,"formgrid","grid","p-fluid"],[1,"col-12","flex","align-items-center","gap-2"],[1,"field","col-12","flex","align-items-center","gap-2"],[1,"field","col-12"],[3,"selectedFileOrUrl","closePreview"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,z,58,22,"ng-container",2),t.ALo(3,"async"),t.qZA()(),t.YNc(4,G,2,1,"ng-container",2)),2&e&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,i.evaluation$)),t.xp6(2),t.Q6J("ngIf",i.visiblePreview))},dependencies:[n.sg,n.O5,w.p,C.jx,q.A,O.Ct,I.h,Q.Q,n.Ov,n.uU],encapsulation:2}),a})();var X=u(209),M=u(5593);let tt=(()=>{class a{constructor(e,i){this.dialogRef=e,this.dialogService=i}ngOnInit(){}showDetail(){this.task&&(this.dialogRef=this.dialogService.open(V,{header:`\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 \u0ec1\u0ea5\u0eb0 \u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99 #${this.task?.id}`,width:window.innerWidth>X.A.lg?"65%":"80%",data:{docId:this.task?.id},contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(E.E7),t.Y36(E.xA))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-btn-action"]],inputs:{task:"task"},decls:1,vars:0,consts:[["label","\u0ec0\u0e9a\u0eb4\u0ec8\u0e87\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94","styleClass","p-button-raised p-button-secondary p-button-sm",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"p-button",0),t.NdJ("click",function(){return i.showDetail()}),t.qZA())},dependencies:[M.zx],encapsulation:2}),a})();function et(a,s){1&a&&(t.TgZ(0,"tr")(1,"th",16),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th",17),t._uU(4,"\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5"),t.qZA(),t.TgZ(5,"th",17),t._uU(6,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99"),t.qZA(),t.TgZ(7,"th",17),t._uU(8,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(9,"th",16),t._uU(10,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(11,"th",18),t._uU(12,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(13,"th",19),t._uU(14,"\u0e81\u0eb2\u0e99\u0ec3\u0eab\u0ec9\u0e84\u0eb0\u0ec1\u0e99\u0e99\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94\u0ec3\u0e99 (4) \u0e94\u0ec9\u0eb2\u0e99"),t.qZA(),t.TgZ(15,"th",17),t._uU(16,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0"),t.qZA(),t.TgZ(17,"th",17),t._uU(18,"\u0e94\u0eb3\u0ec0\u0e99\u0eb5\u0e99\u0e81\u0eb2\u0e99"),t.qZA()(),t.TgZ(19,"tr")(20,"th",20)(21,"div")(22,"small"),t._uU(23,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),t.qZA()()(),t.TgZ(24,"th",20)(25,"div")(26,"small"),t._uU(27,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),t.qZA()()(),t.TgZ(28,"th",20)(29,"div")(30,"small"),t._uU(31,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),t.qZA()()(),t.TgZ(32,"th",20)(33,"div")(34,"small"),t._uU(35,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),t.qZA()()()(),t.TgZ(36,"tr")(37,"th",21)(38,"div",22)(39,"small"),t._uU(40,"\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81"),t.qZA()()(),t.TgZ(41,"th",21)(42,"div",22)(43,"small"),t._uU(44,"\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2"),t.qZA()()(),t.TgZ(45,"th",21)(46,"div",22)(47,"small"),t._uU(48,"\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81"),t.qZA()()(),t.TgZ(49,"th",21)(50,"div",22)(51,"small"),t._uU(52,"\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2"),t.qZA()()(),t.TgZ(53,"th",21)(54,"div",22)(55,"small"),t._uU(56,"\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81"),t.qZA()()(),t.TgZ(57,"th",21)(58,"div",22)(59,"small"),t._uU(60,"\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2"),t.qZA()()(),t.TgZ(61,"th",21)(62,"div",22)(63,"small"),t._uU(64,"\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81"),t.qZA()()(),t.TgZ(65,"th",21)(66,"div",22)(67,"small"),t._uU(68,"\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2"),t.qZA()()()())}function at(a,s){if(1&a&&(t.TgZ(0,"tr",23)(1,"td",24)(2,"div",25),t._uU(3),t.qZA()()()),2&a){const e=s.$implicit;t.xp6(3),t.lnq(" [",null==e||null==e.staff?null:e.staff.staffCode,"]-",null==e||null==e.staff?null:e.staff.firstName," ",null==e||null==e.staff?null:e.staff.lastName," ")}}const ut=function(){return{width:"50px"}};function nt(a,s){if(1&a&&(t.TgZ(0,"tr")(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td",27),t._uU(4),t.qZA(),t.TgZ(5,"td",27),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",27),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td",27),t._uU(12),t.qZA(),t.TgZ(13,"td",28)(14,"div",29),t._uU(15),t.qZA()(),t.TgZ(16,"td",30),t._uU(17),t.qZA(),t.TgZ(18,"td",31),t._uU(19),t.qZA(),t.TgZ(20,"td",30),t._uU(21),t.qZA(),t.TgZ(22,"td",31),t._uU(23),t.qZA(),t.TgZ(24,"td",30),t._uU(25),t.qZA(),t.TgZ(26,"td",31),t._uU(27),t.qZA(),t.TgZ(28,"td",30),t._uU(29),t.qZA(),t.TgZ(30,"td",31),t._uU(31),t.qZA(),t.TgZ(32,"td",21),t._UZ(33,"app-task-status",32),t.qZA(),t.TgZ(34,"td",27),t._UZ(35,"app-btn-action",33),t.qZA()()),2&a){const e=s.$implicit,i=s.rowIndex,g=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.DdM(24,ut)),t.xp6(1),t.hij(" ",i+1," "),t.xp6(2),t.hij(" ",null==e?null:e.docYear," "),t.xp6(2),t.hij(" ",t.xi3(7,18,null==e?null:e.headActionAt,"dd/MM/yyyy HH:mm")," "),t.xp6(3),t.hij(" ",t.xi3(10,21,null==e?null:e.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(3),t.hij(" ",null==e?null:e.id," "),t.xp6(1),t.Q6J("pTooltip",g.utilService.getTooltip(null==e?null:e.taskSubject,15)),t.xp6(2),t.hij(" ",null==e?null:e.taskSubject," "),t.xp6(2),t.Oqu(null==e?null:e.selfTimeScore),t.xp6(2),t.Oqu(null==e?null:e.headTimeScore),t.xp6(2),t.Oqu(null==e?null:e.selfQuantityScore),t.xp6(2),t.Oqu(null==e?null:e.headQuantityScore),t.xp6(2),t.Oqu(null==e?null:e.selfQualityScore),t.xp6(2),t.Oqu(null==e?null:e.headQualityScore),t.xp6(2),t.Oqu(null==e?null:e.selfSatisfiedScore),t.xp6(2),t.Oqu(null==e?null:e.headSatisfiedScore),t.xp6(2),t.Q6J("taskStatus",null==e?null:e.status),t.xp6(2),t.Q6J("task",e)}}function it(a,s){1&a&&(t.TgZ(0,"tr")(1,"td",34),t._uU(2,"\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99"),t.qZA()())}const lt=function(){return[25,50,100]},st=[{path:"",component:(()=>{class a{constructor(e,i,g,B,v,y,ft,gt,ht){this.utilService=e,this.menuService=i,this.dialogRef=g,this.filter=B,this.cdr=v,this.fb=y,this.sanitizer=ft,this.headEvalService=gt,this.helperService=ht,this.evaluations=[],this.screenHeight=0,this.filterFields=["id","taskId","taskSubject","staff.staffCode","staff.firstName","staff.lastName"],this.showMenu$=this.menuService.menuState$,this.destroy$=new o.x,this.formGroup=this.fb.formGroup(new c.U)}ngOnInit(){this.headEvalService.items$.pipe((0,h.R)(this.destroy$)).subscribe(e=>{this.evaluations=e,this.cdr.markForCheck()}),this.checkScreenSize()}onResize(e){this.checkScreenSize()}checkScreenSize(){this.screenHeight=Math.floor(.6*window.innerHeight),this.cdr.detectChanges()}onSelectedYear(e){if(e.getFullYear()){const g=e.getFullYear();this.helperService.getTaskEval(g).subscribe()}}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef?.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.F),t.Y36(r.h),t.Y36(E.E7),t.Y36(l.i),t.Y36(t.sBO),t.Y36(m.GW),t.Y36(f.H7),t.Y36(_.P),t.Y36(x.v))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-eval-history"]],hostBindings:function(e,i){1&e&&t.NdJ("resize",function(B){return i.onResize(B)},!1,t.Jf7)},decls:19,vars:10,consts:[[1,"p-grid","mt-4"],[1,"p-col-12"],[1,"flex","align-items-center","justify-content-between"],[1,"flex","align-items-center"],[1,"text-2xl","font-semibold","ml-2"],[3,"formGroup"],[3,"yearSelected"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","\u0e84\u0ebb\u0ec9\u0e99\u0eab\u0eb2..",3,"input"],["rowGroupMode","subheader","groupRowsBy","staff.staffCode","dataKey","id","styleClass","p-datatable-sm","responsiveLayout","scroll","currentPageReportTemplate","\u0eaa\u0eb0\u0ec1\u0e94\u0e87 {first} \u0ec0\u0e96\u0eb4\u0e87 {last} \u0e88\u0eb2\u0e81\u0e97\u0eb1\u0e87\u0edd\u0ebb\u0e94 {totalRecords} \u0ea5\u0eb2\u0e8d\u0e81\u0eb2\u0e99",3,"value","rows","paginator","globalFilterFields","scrollable","scrollHeight","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","groupheader"],["pTemplate","body"],["pTemplate","emptymessage"],["rowspan","3",1,"white-space-nowrap","text-center"],["rowspan","3",1,"text-center","white-space-nowrap"],["rowspan","3",1,"white-space-nowrap"],["colspan","8",1,"text-center","white-space-nowrap"],["colspan","2",1,"text-center","white-space-nowrap"],[1,"text-center","white-space-nowrap"],[1,"-rotate-25"],["pRowGroupHeader",""],["colspan","18"],[1,"text-groupheader","font-semibold","text-xl"],[1,"text-center","white-space-nowrap",3,"ngStyle"],[1,"white-space-nowrap","text-center"],["tooltipPosition","bottom","tooltipStyleClass","custom-tooltip",3,"pTooltip"],[1,"max-w-10rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"text-center","white-space-nowrap","font-semibold"],[1,"text-center","white-space-nowrap","font-bold"],[3,"taskStatus"],[3,"task"],["colspan","18",1,"text-center","py-4"]],template:function(e,i){if(1&e){const g=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5,"\u0e9b\u0eb0\u0eab\u0ea7\u0eb1\u0e94\u0e81\u0eb2\u0e99\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0ec3\u0eab\u0ec9\u0ec1\u0e81\u0ec8 (\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81)"),t.qZA()(),t.TgZ(6,"div",3)(7,"form",5)(8,"app-year-picker",6),t.NdJ("yearSelected",function(v){return i.onSelectedYear(v)}),t.qZA()(),t.TgZ(9,"span",7),t._UZ(10,"i",8),t.TgZ(11,"input",9),t.NdJ("input",function(v){t.CHM(g);const y=t.MAs(14);return t.KtG(i.filter.dataTable(y,v))}),t.qZA()()()(),t._UZ(12,"hr"),t.TgZ(13,"p-table",10,11),t.YNc(15,et,69,0,"ng-template",12),t.YNc(16,at,4,3,"ng-template",13),t.YNc(17,nt,36,25,"ng-template",14),t.YNc(18,it,3,0,"ng-template",15),t.qZA()()()}2&e&&(t.xp6(7),t.Q6J("formGroup",i.formGroup),t.xp6(6),t.Q6J("value",i.evaluations)("rows",25)("paginator",!0)("globalFilterFields",i.filterFields)("scrollable",!0)("scrollHeight",i.screenHeight+"px")("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(9,lt)))},dependencies:[n.PC,T._Y,T.JL,T.sg,m.VP,C.jx,U.o,D.u,S.iA,S.Z5,Y.O,I.h,tt,n.uU],encapsulation:2,changeDetection:0}),a})(),resolve:{data:(()=>{class a{constructor(e){this.taskHelperService=e}resolve(e,i){const g=(new Date).getFullYear();return this.taskHelperService.getTaskEval(g)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(x.v))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}];let ot=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.Bz.forChild(st),d.Bz]}),a})();var rt=u(6679),Et=u(2448),ct=u(9981),dt=u(6749),mt=u(4466);let pt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[n.ez,ot,mt.m,w.L,q.o,M.hJ,O.TX,U.j,rt.W,D.z,S.U$,dt.g,ct.o,Et.q]}),a})()},830:(Z,A,u)=>{u.d(A,{P:()=>p});var n=u(1135),d=u(8505),o=u(4004),h=u(2340),c=u(8274),t=u(529);let p=(()=>{class r{constructor(l){this.http=l,this.apiUrl=`${h.N.apiUrl}/v1/desc-evaluations`,this.item=new n.X(null),this.item$=this.item.asObservable(),this.items=new n.X([]),this.items$=this.items.asObservable()}getOne(l){return this.http.post(`${this.apiUrl}/find`,l).pipe((0,d.b)(f=>{200===f?.statusCode&&f?.data&&this.item.next(f.data)}))}getMany(l){return this.http.post(`${this.apiUrl}/find`,l).pipe((0,d.b)(f=>{200===f?.statusCode&&f?.data&&this.items.next(f.data)}))}update(l,m){return this.http.patch(`${this.apiUrl}/head/${l}`,m).pipe((0,o.U)(_=>{if(200===_?.statusCode&&_?.data){const T=this.items.getValue().map(C=>C.id===l?{...C,...m}:C);return this.items.next(T),!0}return!1}))}updateAndRemove(l,m){return this.http.patch(`${this.apiUrl}/head/${l}`,m).pipe((0,d.b)(_=>{200===_?.statusCode&&this.removeItemFromList(l)}))}removeItemFromList(l){const f=this.items.getValue().filter(_=>_?.id!==l);this.items.next(f)}}return r.\u0275fac=function(l){return new(l||r)(c.LFG(t.eN))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);