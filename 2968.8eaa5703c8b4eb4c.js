"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[2968],{1231:(R,b,o)=>{o.d(b,{$:()=>I});var e=o(8274),a=o(433),_=o(7579),D=o(2722),Z=o(2569),g=o(8386),t=o(1601),s=o(6895),h=o(2156),p=o(5722),v=o(805);function c(T,M){if(1&T&&(e.TgZ(0,"small",8),e._uU(1),e.qZA()),2&T){const m=e.oxw(2);e.xp6(1),e.hij(" *",null==m.control.errors.notEmpty?null:m.control.errors.notEmpty.message," ")}}function y(T,M){if(1&T&&(e.ynx(0),e.TgZ(1,"label",5)(2,"span",6),e._uU(3),e.qZA(),e.YNc(4,c,2,1,"small",7),e.qZA(),e.BQk()),2&T){const m=e.oxw();e.xp6(3),e.Oqu(m.label),e.xp6(1),e.Q6J("ngIf",m.submitted&&m.control.errors)}}function E(T,M){if(1&T&&(e.TgZ(0,"div",9),e._UZ(1,"i",10),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&T){const m=M.$implicit;e.xp6(3),e.lnq("[",null==m?null:m.staffCode,"]-",null==m?null:m.firstName," ",null==m?null:m.lastName,"")}}let I=(()=>{class T{constructor(m,S,N,Q,G){this.parentForm=m,this.cdr=S,this.loadingService=N,this.userService=Q,this.staffService=G,this.submitted=!1,this.showLabel=!0,this.showAddon=!0,this.editMode=!1,this.filterByHead=!0,this.label="\u0e9e\u0eb0\u0e99\u0eb1\u0e81\u0e87\u0eb2\u0e99",this.placeholder="\u0ec0\u0ea5\u0eb7\u0ead\u0e81",this.hint="",this.formControlName="staffCode",this.onChange=()=>{},this.onTouched=()=>{},this.staffs=[],this.loading$=this.loadingService.state$,this.destroy$=new _.x}get control(){return this.formGroup.get(this.formControlName)}writeValue(m){this.selectedValue=m}registerOnChange(m){this.onChange=m}registerOnTouched(m){this.onTouched=m}setDisabledState(m){}onDropdownChange(m){const S=m.value;this.selectedValue=S,this.onChange(S),this.onTouched()}ngOnInit(){this.user=this.userService.getLoggedUser(),this.formGroup=this.parentForm.control,this.staffService.staffs$.pipe((0,D.R)(this.destroy$)).subscribe(m=>{this.staffs=m,this.cdr.detectChanges()}),this.editMode&&this.getStaffs()}getStaffs(){if(this.filterByHead){const m=this.user?.profile?.staffCode;if(m){const S=Object.assign({head1:m,head2:m,head3:m});this.staffService.getAll("field-sm",S).subscribe()}}}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete()}}return T.\u0275fac=function(m){return new(m||T)(e.Y36(a.sg),e.Y36(e.sBO),e.Y36(Z.b),e.Y36(g.K),e.Y36(t.x))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-dropdown-staff-multi"]],inputs:{submitted:"submitted",showLabel:"showLabel",showAddon:"showAddon",editMode:"editMode",filterByHead:"filterByHead",label:"label",placeholder:"placeholder",hint:"hint",formControlName:"formControlName"},features:[e._Bn([{provide:a.JU,useExisting:(0,e.Gpc)(()=>T),multi:!0}])],decls:6,vars:10,consts:[[3,"formGroup"],[4,"ngIf"],["appendTo","body","id","assignedTo","defaultLabel","\u0ec0\u0ea5\u0eb7\u0ead\u0e81","optionValue","staffCode","optionLabel","firstName","filterBy","staffCode,firstName,lastName","emptyFilterMessage","\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99","display","chip",3,"options","showToggleAll","filter","resetFilterOnHide","emptyMessage","formControlName","onChange","onFocus"],["multiSelect",""],["pTemplate","item"],["for","assignedTo",1,"font-semibold","white-space-nowrap","mr-1"],[1,"text-lg"],["class","p-error",4,"ngIf"],[1,"p-error"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-user"]],template:function(m,S){1&m&&(e.TgZ(0,"form",0),e.YNc(1,y,5,2,"ng-container",1),e.TgZ(2,"p-multiSelect",2,3),e.NdJ("onChange",function(Q){return S.onDropdownChange(Q)})("onFocus",function(){return S.getStaffs()}),e.ALo(4,"async"),e.YNc(5,E,4,3,"ng-template",4),e.qZA()()),2&m&&(e.Q6J("formGroup",S.formGroup),e.xp6(1),e.Q6J("ngIf",S.showLabel),e.xp6(1),e.Q6J("options",S.staffs)("showToggleAll",!1)("filter",!0)("resetFilterOnHide",!0)("emptyMessage",e.lcZ(4,8,S.loading$)?"\u0e81\u0eb3\u0ea5\u0eb1\u0e87\u0ec2\u0eab\u0ebc\u0e94..":"\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99")("formControlName",S.formControlName))},dependencies:[s.O5,a._Y,a.JJ,a.JL,a.sg,a.u,h.bc,h.VP,h.YE,p.NU,v.jx,s.Ov],encapsulation:2,changeDetection:0}),T})()},1601:(R,b,o)=>{o.d(b,{x:()=>t});var e=o(2340),a=o(1135),_=o(8505),D=o(4004),Z=o(8274),g=o(529);let t=(()=>{class s{constructor(p){this.http=p,this.apiPath="staffs",this.staffs=new a.X([]),this.staffs$=this.staffs.asObservable(),this.apiUrl=`${e.N.apiUrl}/v1/${this.apiPath}`}getAll(p,v){return this.http.get(`${this.apiUrl}/${p}`,{params:v}).pipe((0,_.b)(y=>{200===y?.statusCode&&y?.data&&this.staffs.next(y.data)}))}getAllHead(){return this.http.get(`${this.apiUrl}/head`).pipe((0,_.b)(v=>{200===v?.statusCode&&v?.data&&this.staffs.next(v.data)}))}countStaff(p){return this.http.get(`${e.N.apiUrl}/v1/report-staff-score/count`,{params:p}).pipe((0,D.U)(c=>200===c?.statusCode&&c?.data?.rowCount?c?.data?.rowCount:0))}}return s.\u0275fac=function(p){return new(p||s)(Z.LFG(g.eN))},s.\u0275prov=Z.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},2968:(R,b,o)=>{o.r(b),o.d(b,{AssignInModule:()=>Ht});var e=o(6895),a=o(5675),_=o(7489),D=o(7579),Z=o(2722),g=o(6527),t=o(8274),s=o(4325),h=o(1481),p=o(6514),v=o(1094),c=o(704),y=o(6679),E=o(7147),I=o(5593),T=o(3609),M=o(3948);function m(i,r){if(1&i&&(t.TgZ(0,"li")(1,"span",15),t._uU(2,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2: "),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&i){const n=t.oxw().ngIf;t.xp6(4),t.Oqu(t.xi3(5,1,null==n?null:n.indicatorTime,"dd/MM/yyyy HH:mm"))}}function S(i,r){if(1&i&&(t.TgZ(0,"li")(1,"span",15),t._uU(2,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99: "),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&i){const n=t.oxw().ngIf;t.xp6(4),t.Oqu(null==n?null:n.indicatorQuantity)}}function N(i,r){if(1&i&&(t.TgZ(0,"li")(1,"span",15),t._uU(2,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a:"),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&i){const n=t.oxw().ngIf;t.xp6(5),t.Oqu(null==n||null==n.indicatorQuality?null:n.indicatorQuality.subject)}}function Q(i,r){if(1&i&&(t.TgZ(0,"li")(1,"span",15),t._uU(2,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88:"),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&i){const n=t.oxw().ngIf;t.xp6(5),t.Oqu(null==n||null==n.indicatorSatisfied?null:n.indicatorSatisfied.subject)}}function G(i,r){if(1&i&&(t.ynx(0),t.TgZ(1,"ul"),t.YNc(2,m,6,4,"li",2),t.YNc(3,S,5,1,"li",2),t.YNc(4,N,6,1,"li",2),t.YNc(5,Q,6,1,"li",2),t.qZA(),t.BQk()),2&i){const n=r.ngIf;t.xp6(2),t.Q6J("ngIf",null==n?null:n.indicatorTime),t.xp6(1),t.Q6J("ngIf",null==n?null:n.indicatorQuantity),t.xp6(1),t.Q6J("ngIf",null==n||null==n.indicatorQuality?null:n.indicatorQuality.subject),t.xp6(1),t.Q6J("ngIf",null==n||null==n.indicatorSatisfied?null:n.indicatorSatisfied.subject)}}function d(i,r){if(1&i&&(t.TgZ(0,"div",8)(1,"label",4),t._uU(2,"\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0ec0\u0e9e\u0eb5\u0ec8\u0ea1\u0ec0\u0e95\u0eb5\u0ea1"),t.qZA(),t._UZ(3,"div",16),t.qZA()),2&i){const n=t.oxw().ngIf,l=t.oxw();t.xp6(3),t.Q6J("innerHTML",l.transform(null==n||null==n.task?null:n.task.description),t.oJD)}}function w(i,r){if(1&i&&(t.TgZ(0,"div",8)(1,"label",4),t._uU(2,"\u0e82\u0ecd\u0ec9\u0e84\u0ea7\u0eb2\u0ea1\u0e88\u0eb2\u0e81\u0e9c\u0eb9\u0ec9\u0ea1\u0ead\u0e9a\u0e95\u0ecd\u0ec8"),t.qZA(),t._uU(3),t.qZA()),2&i){const n=t.oxw().ngIf;t.xp6(3),t.hij(" ",null==n?null:n.remark," ")}}function f(i,r){if(1&i){const n=t.EpF();t.TgZ(0,"p-chip",20),t.NdJ("click",function(){const x=t.CHM(n).$implicit,C=t.oxw(3);return t.KtG(C.showPreviewFromUrl(null==x?null:x.filePath))}),t._UZ(1,"i",21),t.TgZ(2,"span",22),t._uU(3),t.qZA()()}if(2&i){const n=r.$implicit;t.xp6(3),t.hij("",null==n?null:n.fileName," ")}}function B(i,r){if(1&i&&(t.ynx(0),t.TgZ(1,"div",8)(2,"label",4),t._uU(3,"\u0ec0\u0ead\u0e81\u0eb0\u0eaa\u0eb2\u0e99\u0ec1\u0e99\u0e9a"),t.qZA(),t._UZ(4,"hr",17),t.TgZ(5,"div",18),t.YNc(6,f,4,1,"ng-template",19),t.qZA()(),t.BQk()),2&i){const n=t.oxw().ngIf;t.xp6(6),t.Q6J("ngForOf",null==n||null==n.task?null:n.task.attachments)}}const F=function(i){return{width:"50px","background-color":i}};function J(i,r){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div")(3,"label",4),t._uU(4),t.qZA()(),t.TgZ(5,"div",5)(6,"div")(7,"label",6),t._uU(8,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d:"),t.qZA()(),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"div",7)(12,"div")(13,"label",6),t._uU(14,"\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec2\u0e94\u0e8d:"),t.qZA()(),t._uU(15),t.qZA(),t.TgZ(16,"div")(17,"label",4),t._uU(18),t.qZA()(),t.TgZ(19,"div",8)(20,"label",4),t._uU(21,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81"),t.qZA(),t.TgZ(22,"div"),t._uU(23),t.qZA()(),t.TgZ(24,"div",7)(25,"div")(26,"label",6),t._uU(27,"\u0ea5\u0eb3\u0e94\u0eb1\u0e9a\u0e84\u0ea7\u0eb2\u0ea1\u0eaa\u0eb3\u0e84\u0eb1\u0e99:"),t.qZA()(),t.TgZ(28,"div"),t._UZ(29,"p-tag",9),t.qZA()(),t.TgZ(30,"div",8)(31,"label",10),t._uU(32,"\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94:"),t.qZA(),t.YNc(33,G,6,4,"ng-container",2),t.qZA(),t.YNc(34,d,4,1,"div",11),t.YNc(35,w,4,1,"div",11),t.TgZ(36,"div",7)(37,"div")(38,"label",6),t._uU(39,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0:"),t.qZA()(),t._UZ(40,"app-task-status",12),t.qZA()(),t.YNc(41,B,7,1,"ng-container",2),t.TgZ(42,"div",13)(43,"p-button",14),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.closeDialog())}),t.qZA()(),t.BQk()}if(2&i){const n=r.ngIf;t.xp6(4),t.hij("\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5: ",null==n?null:n.docYear,""),t.xp6(5),t.hij(" ",t.xi3(10,15,null==n?null:n.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(6),t.AsE(" ",null==n||null==n.task||null==n.task.creator?null:n.task.creator.firstName," ",null==n||null==n.task||null==n.task.creator?null:n.task.creator.lastName," "),t.xp6(3),t.hij("\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0ea7\u0ebd\u0e81: ",null==n||null==n.task?null:n.task.id,""),t.xp6(5),t.Oqu(null==n||null==n.task?null:n.task.taskSubject),t.xp6(6),t.Akn(t.VKq(18,F,null==n||null==n.task||null==n.task.priority?null:n.task.priority.color)),t.Q6J("value",null==n||null==n.task||null==n.task.priority?null:n.task.priority.name)("rounded",!0),t.xp6(4),t.Q6J("ngIf",null==n?null:n.task),t.xp6(1),t.Q6J("ngIf",null==n||null==n.task?null:n.task.description),t.xp6(1),t.Q6J("ngIf",null==n?null:n.remark),t.xp6(5),t.Q6J("taskStatus",null==n?null:n.status),t.xp6(1),t.Q6J("ngIf",(null==n||null==n.task?null:n.task.attachments)&&(null==n||null==n.task||null==n.task.attachments?null:n.task.attachments.length))}}function st(i,r){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-file-preview",23),t.NdJ("closePreview",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.closeImgPreview())}),t.qZA(),t.BQk()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("selectedFileOrUrl",n.fileSrc)}}let K=(()=>{class i{constructor(n,l,u,x,C,O){this.dialogConfig=n,this.dialogRef=l,this.sanitizer=u,this.taskWfService=x,this.utilService=C,this.alertService=O,this.visiblePreview=!1}ngOnInit(){this.docId=this.dialogConfig.data.data,this.getDetail(this.docId),this.workflow$=this.taskWfService.item$}transform(n){return this.sanitizer.bypassSecurityTrustHtml(n)}showPreviewFromUrl(n){n&&(this.utilService.isValidUrl(n)?(this.fileSrc=n,this.visiblePreview=!0):this.alertService.showDanger("\u0eae\u0eb9\u0e9a\u0ec1\u0e9a\u0e9a\u0e97\u0eb5\u0ec8\u0ea2\u0eb9\u0ec8\u0e82\u0ead\u0e87\u0ec4\u0e9f\u0ea5\u0ecc\u0e9a\u0ecd\u0ec8\u0e96\u0eb7\u0e81\u0e95\u0ec9\u0ead\u0e87!"))}closeImgPreview(){this.visiblePreview=!1}closeDialog(){this.dialogRef&&this.dialogRef.close()}getDetail(n){if(n){const u=g.o.getDetail({id:n});this.taskWfService.getOne(u).subscribe()}}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(s.S),t.Y36(s.E7),t.Y36(h.H7),t.Y36(p.y),t.Y36(v.F),t.Y36(c.c))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-detail"]],decls:5,vars:4,consts:[[1,"grid"],[1,"col-12"],[4,"ngIf"],[1,"p-fluid"],[1,"font-semibold","text-xl","mb-0"],[1,"flex","align-items-center","gap-2"],[1,"font-semibold","text-xl"],[1,"field","flex","align-items-center","gap-2"],[1,"field"],[3,"value","rounded"],[1,"font-semibold","mb-0","text-xl"],["class","field",4,"ngIf"],[3,"taskStatus"],[1,"text-right","sticky","bottom-0","mt-5"],["label","\u0e9b\u0eb4\u0e94","icon","pi pi-times","styleClass","p-button-outlined mr-2",3,"click"],[1,"font-semibold"],[3,"innerHTML"],[1,"mt-0"],[1,"flex","gap-2"],["ngFor","",3,"ngForOf"],["styleClass","cursor-pointer",3,"click"],[1,"pi","pi-paperclip","mr-2","text-green-500"],[1,"w-8rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[3,"selectedFileOrUrl","closePreview"]],template:function(n,l){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,J,44,20,"ng-container",2),t.ALo(3,"async"),t.qZA()(),t.YNc(4,st,2,1,"ng-container",2)),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,l.workflow$)),t.xp6(2),t.Q6J("ngIf",l.visiblePreview))},dependencies:[e.sg,e.O5,y.V,E.A,I.zx,T.Q,M.h,e.Ov,e.uU],encapsulation:2}),i})();var j=o(209),at=o(7248),rt=o(6832),A=o(2156),q=o(7960),k=o(433),z=o(793),H=o(805),V=o(1740),$=o(3608),ut=o(6521),ct=o(3446),U=o(655);class W{}(0,U.gn)([(0,A.C1)()],W.prototype,"taskId",void 0),(0,U.gn)([(0,A.IE)(),(0,A.Dw)()],W.prototype,"assignedTo",void 0),(0,U.gn)([(0,A.C1)()],W.prototype,"createdBy",void 0),(0,U.gn)([(0,A.vg)()],W.prototype,"remark",void 0);var X=o(841),tt=o(8386),et=o(3054),pt=o(1231);let dt=(()=>{class i{constructor(n,l,u,x,C,O,L){this.fb=n,this.alertService=l,this.formService=u,this.dialogRef=x,this.dialogConfig=C,this.taskWfService=O,this.userService=L,this.submitted=!1,this.formGroup=this.fb.formGroup(new W),A.jc.set(this.formService.validationMessages)}get controls(){return this.formGroup.controls}ngOnInit(){this.user=this.userService.getLoggedUser(),this.workflow=this.dialogConfig.data.data,this.task=this.workflow?.task,this.task&&(this.staffCode=this.user?.profile?.staffCode,this.formGroup.patchValue({taskId:this.task?.id,createdBy:this.staffCode}))}onSubmit(){if(this.submitted=!0,this.formGroup.invalid)return;const n=this.formGroup.value;this.formGroup.disable();const l=n.taskId,x=n.assignedTo.map(C=>Object.assign({parentWfId:this.workflow?.id,taskId:l,assignedTo:C,createdBy:this.staffCode,remark:n.remark}));this.taskWfService.forwardWf(x).subscribe({next:C=>{C&&(this.closeDialog(),this.alertService.showSuccess("\u0ea1\u0ead\u0e9a\u0ea7\u0ebd\u0e81\u0e95\u0ecd\u0ec8\u0ec1\u0ea5\u0ec9\u0ea7"))},error:C=>{this.closeDialog(),this.alertService.showError(C)}})}closeDialog(){this.submitted=!1,this.formGroup.reset(),this.formGroup.enable(),this.dialogRef?.close()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(A.GW),t.Y36(c.c),t.Y36(X.k),t.Y36(s.E7),t.Y36(s.S),t.Y36(p.y),t.Y36(tt.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-next-assign-form"]],decls:16,vars:8,consts:[[1,"grid","p-fluid"],[1,"col-12"],[1,"p-2","h-20rem"],["autocomplete","off",3,"formGroup"],[1,"field"],[3,"label","formControlName","submitted"],["for","remark",1,"font-semibold","text-lg","mb-0"],["id","remark","rows","3","cols","30","pInputTextarea","","formControlName","remark",3,"autoResize"],[1,"p-dialog-footer","w-full","fixed","left-0","bottom-0","py-4"],["pButton","","pRipple","","label","\u0e8d\u0ebb\u0e81\u0ec0\u0ea5\u0eb5\u0e81","icon","pi pi-times",1,"p-button-outlined",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-share-alt","label","\u0ea1\u0ead\u0e9a\u0ea7\u0ebd\u0e81\u0e95\u0ecd\u0ec8","icon","pi pi-shared-alt",3,"loading","disabled","click"]],template:function(n,l){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4),t._UZ(5,"app-dropdown-staff-multi",5),t.qZA(),t.TgZ(6,"div",4)(7,"label",6),t._uU(8,"\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0ec0\u0e9e\u0eb5\u0ec8\u0ea1\u0ec0\u0e95\u0eb5\u0ea1 "),t.TgZ(9,"small"),t._uU(10,"(\u0ea7\u0ec8\u0eb2\u0e87\u0ec4\u0e94\u0ec9)"),t.qZA()(),t.TgZ(11,"textarea",7),t._uU(12,"                    "),t.qZA()()()(),t.TgZ(13,"div",8)(14,"button",9),t.NdJ("click",function(){return l.closeDialog()}),t.qZA(),t.TgZ(15,"button",10),t.NdJ("click",function(){return l.onSubmit()}),t.qZA()()()()),2&n&&(t.xp6(3),t.Q6J("formGroup",l.formGroup),t.xp6(2),t.Q6J("label","\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec3\u0eab\u0ec9")("formControlName","assignedTo")("submitted",l.submitted),t.xp6(6),t.Q6J("autoResize",!0),t.xp6(3),t.Q6J("disabled",l.formGroup.disabled),t.xp6(1),t.Q6J("loading",l.formGroup.disabled)("disabled",l.formGroup.disabled))},dependencies:[k._Y,k.Fj,k.JJ,k.JL,k.sg,k.u,A.bc,A.VP,A.YE,et.g,I.Hq,pt.$],encapsulation:2}),i})();class P{}(0,U.gn)([(0,A.C1)()],P.prototype,"taskWfId",void 0),(0,U.gn)([(0,A.C1)()],P.prototype,"taskId",void 0),(0,U.gn)([(0,A.C1)()],P.prototype,"taskSubject",void 0),(0,U.gn)([(0,A.C1)()],P.prototype,"taskPriorityScore",void 0),(0,U.gn)([(0,A.C1)()],P.prototype,"reportDetail",void 0),(0,U.gn)([(0,A.C1)()],P.prototype,"scheduledStart",void 0),(0,U.gn)([(0,A.C1)()],P.prototype,"scheduledEnd",void 0),(0,U.gn)([(0,A.vg)({defaultValue:0})],P.prototype,"selfTimeScore",void 0),(0,U.gn)([(0,A.vg)({defaultValue:0})],P.prototype,"selfQuantityScore",void 0),(0,U.gn)([(0,A.vg)({defaultValue:0})],P.prototype,"selfQualityScore",void 0),(0,U.gn)([(0,A.vg)({defaultValue:0})],P.prototype,"selfSatisfiedScore",void 0);var nt=o(6620),Y=o(4090),gt=o(3949),mt=o(9506),ot=o(585),it=o(2946),ft=o(904),Et=o(695);function ht(i,r){1&i&&(t.TgZ(0,"span",28),t._uU(1,"\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA())}function _t(i,r){if(1&i&&(t.TgZ(0,"small",29),t._uU(1),t.qZA()),2&i){const n=t.oxw(2);t.xp6(1),t.hij(" *",null==n.controls.reportDetail.errors.required?null:n.controls.reportDetail.errors.required.message," ")}}function vt(i,r){if(1&i&&(t.TgZ(0,"small",29),t._uU(1),t.qZA()),2&i){const n=t.oxw(2);t.xp6(1),t.hij(" *",null==n.controls.scheduledStart.errors.required?null:n.controls.scheduledStart.errors.required.message," ")}}function At(i,r){if(1&i&&(t.TgZ(0,"small",29),t._uU(1),t.qZA()),2&i){const n=t.oxw(2);t.xp6(1),t.hij(" *",null==n.controls.scheduledEnd.errors.required?null:n.controls.scheduledEnd.errors.required.message," ")}}function Ct(i,r){1&i&&(t.TgZ(0,"span",28),t._uU(1,"\u0e81\u0eb2\u0e99\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99"),t.qZA())}function Tt(i,r){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"form",1)(2,"div",2)(3,"p-fieldset",3),t.YNc(4,ht,2,0,"ng-template",4),t.TgZ(5,"div",5)(6,"div",6)(7,"label",7),t._uU(8,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81"),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"div",8)(12,"label",7),t._uU(13,"\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0e84\u0ea7\u0eb2\u0ea1\u0e84\u0eb7\u0e9a\u0edc\u0ec9\u0eb2 "),t.YNc(14,_t,2,1,"small",9),t.qZA(),t._UZ(15,"app-shared-editor",10),t.qZA(),t.TgZ(16,"div",11)(17,"label",12),t._uU(18,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ec0\u0ea5\u0eb5\u0ec8\u0ea1\u0e9b\u0eb0\u0e95\u0eb4\u0e9a\u0eb1\u0e94 "),t.YNc(19,vt,2,1,"small",9),t.qZA(),t._UZ(20,"p-calendar",13),t.qZA(),t.TgZ(21,"div",11)(22,"label",14),t._uU(23,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94 "),t.YNc(24,At,2,1,"small",9),t.qZA(),t._UZ(25,"p-calendar",15),t.qZA(),t.TgZ(26,"div",16)(27,"label",17),t._UZ(28,"i",18),t.TgZ(29,"span",19)(30,"span",20),t._uU(31,"\u0ec1\u0e99\u0e9a\u0ec0\u0ead\u0e81\u0eb0\u0eaa\u0eb2\u0e99:"),t.qZA(),t.TgZ(32,"small",21),t._uU(33,"(jpg, png, pdf)"),t.qZA()()(),t._UZ(34,"app-upload-helper",22),t.qZA()()()(),t.TgZ(35,"p-fieldset",23),t.YNc(36,Ct,2,0,"ng-template",4),t._UZ(37,"app-score-option",24),t.qZA()(),t.TgZ(38,"div",25)(39,"p-button",26),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.closeDialog())}),t.qZA(),t.TgZ(40,"p-button",27),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.onSubmit())}),t.qZA()(),t.BQk()}if(2&i){const n=r.ngIf,l=t.oxw();t.xp6(1),t.Q6J("formGroup",l.formGroup),t.xp6(2),t.Q6J("toggleable",!0),t.xp6(7),t.Oqu(null==n?null:n.taskSubject),t.xp6(4),t.Q6J("ngIf",l.submitted&&l.controls.reportDetail.errors),t.xp6(1),t.Q6J("readonly",l.formGroup.disabled)("formControlName","reportDetail"),t.xp6(4),t.Q6J("ngIf",l.submitted&&l.controls.scheduledStart.errors),t.xp6(1),t.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),t.xp6(4),t.Q6J("ngIf",l.submitted&&l.controls.scheduledEnd.errors),t.xp6(1),t.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),t.xp6(9),t.Q6J("apiPath","assign-attachments")("oldFiles",null)("attachRefId",3),t.xp6(1),t.Q6J("toggleable",!0),t.xp6(2),t.Q6J("item",n)("submitted",l.submitted),t.xp6(2),t.Q6J("disabled",l.formGroup.disabled),t.xp6(1),t.Q6J("loading",l.formGroup.disabled)("disabled",l.formGroup.disabled)}}let xt=(()=>{class i{constructor(n,l,u,x,C,O){this.fb=n,this.alertService=l,this.formService=u,this.selfEvalService=x,this.dialogConfig=C,this.dialogRef=O,this.submitted=!1,this.newFiles=[],A.jc.set(this.formService.validationMessages),this.formGroup=this.fb.formGroup(new P)}get controls(){return this.formGroup.controls}ngOnInit(){this.initData()}initData(){this.workflow=this.dialogConfig.data.data,this.task=this.workflow?.task,this.task&&(this.patchFormValues(),this.setIndicatorValidators(this.getRelevantIndicators()))}patchFormValues(){this.formGroup.patchValue({taskWfId:this.workflow?.id,taskId:this.task?.id,taskSubject:this.task?.taskSubject,taskPriorityScore:this.task?.priority?.score})}getRelevantIndicators(){const n=Object.keys(Y.qu.self),l=_.pick(this.task,n);return _.pickBy(l,u=>null!=u&&""!==u&&0!=+u)}setIndicatorValidators(n){Object.entries(n).forEach(([l,u])=>{const x=Y.qu.self[l],C=this.formGroup.get(x);C&&(this.formGroup.patchValue({[x]:x!==Y.qu.self[l]?0:null}),C.setValidators([A.CM.required()]),C.updateValueAndValidity())})}onSubmit(){if(this.submitted=!0,this.formGroup.invalid)return;const n=this.formGroup.value;this.formGroup.disable(),this.selfEvalService.create(n).subscribe({next:l=>this.handleSuccessSubmission(l),error:l=>this.handleError(l)})}handleSuccessSubmission(n){n&&(this.dialogRef?.close(),this.child.onCheckFileUpload(n.evalId,gt.ij.TASKA_EVAL),this.alertService.showSuccess("\u0eaa\u0ebb\u0ec8\u0e87\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99\u0ec1\u0ea5\u0ec9\u0ea7"))}handleError(n){this.formGroup.enable(),this.alertService.showError(n)}closeDialog(){this.submitted=!1,this.formGroup.reset(),this.formGroup.enable(),this.dialogRef?.close()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(A.GW),t.Y36(c.c),t.Y36(X.k),t.Y36(mt._),t.Y36(s.S),t.Y36(s.E7))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-report-form"]],viewQuery:function(n,l){if(1&n&&t.Gf(nt.u,5),2&n){let u;t.iGM(u=t.CRH())&&(l.child=u.first)}},decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"mb-4"],[3,"toggleable"],["pTemplate","header"],[1,"formgrid","grid","p-fluid"],[1,"field","col-12"],["for","address",1,"font-semibold","text-xl","mb-0"],[1,"field","col-12","mb-7"],["class","p-error",4,"ngIf"],[3,"readonly","formControlName"],[1,"field","col-12","md:col-6"],["for","scheduledStart",1,"font-semibold","text-xl","mb-0"],["id","scheduledStart","appendTo","body","formControlName","scheduledStart",3,"readonlyInput","showTime","showIcon"],["for","scheduledEnd",1,"font-semibold","text-xl","mb-0"],["id","scheduledEnd","appendTo","body","formControlName","scheduledEnd",3,"readonlyInput","showTime","showIcon"],[1,"field","col-12","mt-4"],["for","files-input",1,"flex","align-items-center","cursor-pointer","mb-0"],[1,"pi","pi-paperclip"],[1,"ml-1","font-semibold"],[1,"text-xl","mr-2"],[1,"text-red-400"],[3,"apiPath","oldFiles","attachRefId"],["styleClass","mb-8",3,"toggleable"],[3,"item","submitted"],[1,"text-right","sticky","bottom-0","mt-5"],["label","\u0e8d\u0ebb\u0e81\u0ec0\u0ea5\u0eb5\u0e81","icon","pi pi-times","styleClass","p-button-outlined mr-2",3,"disabled","click"],["label","\u0eaa\u0ebb\u0ec8\u0e87\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99","icon","pi pi-send",3,"loading","disabled","click"],[1,"font-semibold","text-xl"],[1,"p-error"]],template:function(n,l){1&n&&t.YNc(0,Tt,41,23,"ng-container",0),2&n&&t.Q6J("ngIf",l.task)},dependencies:[e.O5,k._Y,k.JJ,k.JL,k.sg,k.u,A.bc,A.VP,A.YE,H.jx,ot.f,I.zx,it.p,nt.u,ft.M,Et.d],encapsulation:2}),i})();var Bt=o(8145),lt=o(605);let Dt=(()=>{class i{constructor(n,l,u,x,C,O){this.menuService=n,this.taskWfService=l,this.alertService=u,this.userService=x,this.dialogService=C,this.confirmService=O,this.menuItems=[]}ngOnInit(){this.user=this.userService.getLoggedUser(),this.task=this.workflow?.task}onDropdownClick(){const n=this.workflow?.status?.id,l=this.user?.role?.id;this.setMenusForRole(n,l<14?[{label:"\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81\u0ec0\u0ead\u0e87",icon:"pi pi-fw pi-check",command:()=>this.onPickup(l,this.workflow)},{label:"\u0ea1\u0ead\u0e9a\u0ea7\u0ebd\u0e81\u0e95\u0ecd\u0ec8",icon:"pi pi-fw pi-share-alt",command:()=>this.onForward(this.workflow)}]:[{label:"\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81",icon:"pi pi-fw pi-check",command:()=>this.onPickup(l,this.workflow)}])}showDetail(n){n&&this.dialogService.open(K,{data:{data:n},...this.dialogOptions(`\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0ea7\u0ebd\u0e81\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d #${this.workflow?.id}`,window.innerWidth>j.A.lg?"65%":"80%")})}dialogOptions(n,l){return{header:n,width:l,contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0}}onPickup(n,l){const u=l?.task?.id,x=l?.id;if(u&&x){const C={parentId:u,childId:x},O={statusId:Y.hY.IN_PROGRESS};n<14?this.confirmService.confirm({message:"\u0ec1\u0e99\u0ec8\u0ec3\u0e88\u0e9a\u0ecd\u0ec8\u0ea7\u0ec8\u0eb2\u0e95\u0ec9\u0ead\u0e87\u0e81\u0eb2\u0e99\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81\u0ec0\u0ead\u0e87, \u0e97\u0ec8\u0eb2\u0e99\u0e88\u0eb0\u0e9a\u0ecd\u0ec8\u0eaa\u0eb2\u0ea1\u0eb2\u0e94\u0ea1\u0ead\u0e9a\u0ea7\u0ebd\u0e81\u0e95\u0ecd\u0ec8\u0ec4\u0e94\u0ec9\u0ec3\u0e99\u0e9e\u0eb2\u0e8d\u0eab\u0ebc\u0eb1\u0e87?",icon:"pi pi-exclamation-triangle",accept:()=>{this.taskWfService.pickup(C,O).subscribe({next:()=>this.alertService.showSuccess("\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81\u0ec1\u0ea5\u0ec9\u0ea7"),error:L=>this.alertService.showError(L)})}}):this.taskWfService.pickup(C,O).subscribe({next:()=>this.alertService.showSuccess("\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81\u0ec1\u0ea5\u0ec9\u0ea7"),error:L=>this.alertService.showError(L)})}}onForward(n){n&&this.dialogService.open(dt,{data:{data:(0,_.cloneDeep)(n)},...this.dialogOptions(`\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ea7\u0ebd\u0e81\u0e95\u0ecd\u0ec8 #${n?.task?.id}`,"50%")})}onReport(){this.workflow&&this.dialogService.open(xt,{data:{data:(0,_.cloneDeep)(this.workflow)},...this.dialogOptions(`\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 \u0ec1\u0ea5\u0eb0 \u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81 #${this.task?.id}`,window.innerWidth>j.A.lg?"65%":"80%")})}setMenusForRole(n,l){switch(n){case Y.hY.WAIT_PICK_JOB:this.menuItems=l;break;case Y.hY.IN_PROGRESS:case Y.hY.WAIT_REPORT:case Y.hY.WAIT_HEAD_EVAL:this.menuItems=[{label:"\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99",icon:"pi pi-fw pi-send",command:()=>this.onReport()}]}}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(Bt.h),t.Y36(p.y),t.Y36(c.c),t.Y36(tt.K),t.Y36(s.xA),t.Y36(H.YP))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-btn-action"]],inputs:{workflow:"workflow"},decls:1,vars:1,consts:[["appendTo","body","label","\u0ec0\u0e9a\u0eb4\u0ec8\u0e87\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94","styleClass","p-button-secondary p-button-sm",3,"model","onClick","onDropdownClick"]],template:function(n,l){1&n&&(t.TgZ(0,"p-splitButton",0),t.NdJ("onClick",function(){return l.showDetail(l.workflow.id)})("onDropdownClick",function(){return l.onDropdownClick()}),t.qZA()),2&n&&t.Q6J("model",l.menuItems)},dependencies:[lt.a],encapsulation:2}),i})();function yt(i,r){1&i&&(t.TgZ(0,"tr")(1,"th",15),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th",16),t._uU(4,"\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5"),t.qZA(),t.TgZ(5,"th",16),t._uU(6,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d"),t.qZA(),t.TgZ(7,"th",17),t._uU(8,"\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec2\u0e94\u0e8d"),t.qZA(),t.TgZ(9,"th",16),t._uU(10,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0ea7\u0ebd\u0e81"),t.qZA(),t.TgZ(11,"th",17),t._uU(12,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e97\u0eb5\u0ec8\u0ec4\u0e94\u0ec9\u0eae\u0eb1\u0e9a\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d"),t.qZA(),t.TgZ(13,"th",16),t._uU(14,"\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94"),t.qZA(),t.TgZ(15,"th",16),t._uU(16,"\u0ea5\u0eb3\u0e94\u0eb1\u0e9a\u0e84\u0ea7\u0eb2\u0ea1\u0eaa\u0eb3\u0e84\u0eb1\u0e99"),t.qZA(),t.TgZ(17,"th",16),t._uU(18,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0"),t.qZA(),t.TgZ(19,"th",16),t._uU(20,"\u0e94\u0eb3\u0ec0\u0e99\u0eb5\u0e99\u0e81\u0eb2\u0e99"),t.qZA()())}const Zt=function(){return{width:"50px"}},bt=function(i){return{"background-color":i}};function It(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t.qZA(),t.TgZ(5,"td",16),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",19),t._uU(9),t.qZA(),t.TgZ(10,"td",16),t._uU(11),t.qZA(),t.TgZ(12,"td",20)(13,"div",21),t._uU(14),t.qZA()(),t.TgZ(15,"td",22),t._UZ(16,"app-indicator-tooltip",23),t.qZA(),t.TgZ(17,"td",24),t._UZ(18,"p-tag",25),t.qZA(),t.TgZ(19,"td",16),t._UZ(20,"app-task-status",26),t.qZA(),t.TgZ(21,"td",16),t._UZ(22,"app-btn-action",27),t.qZA()()),2&i){const n=r.$implicit,l=r.rowIndex,u=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.DdM(19,Zt)),t.xp6(1),t.hij(" ",l+1," "),t.xp6(2),t.hij(" ",null==n?null:n.docYear," "),t.xp6(2),t.hij(" ",t.xi3(7,16,null==n?null:n.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(2),t.Q6J("pTooltip",u.utilService.getFullName(null==n||null==n.task?null:n.task.creator)),t.xp6(1),t.hij(" ",null==n||null==n.task||null==n.task.creator?null:n.task.creator.firstName," "),t.xp6(2),t.hij(" ",null==n||null==n.task?null:n.task.id," "),t.xp6(1),t.Q6J("pTooltip",u.utilService.getTooltip(null==n||null==n.task?null:n.task.taskSubject,25)),t.xp6(2),t.hij(" ",null==n||null==n.task?null:n.task.taskSubject," "),t.xp6(2),t.Q6J("item",null==n?null:n.task),t.xp6(2),t.Akn(t.VKq(20,bt,null==n||null==n.task||null==n.task.priority?null:n.task.priority.color)),t.Q6J("value",null==n||null==n.task||null==n.task.priority?null:n.task.priority.name)("rounded",!0),t.xp6(2),t.Q6J("taskStatus",null==n?null:n.status),t.xp6(2),t.Q6J("workflow",n)}}function St(i,r){1&i&&(t.TgZ(0,"tr")(1,"td",28),t._uU(2,"\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99"),t.qZA()())}const Mt=function(){return[25,50,100]},wt=[{path:"",component:(()=>{class i{constructor(n,l,u,x,C,O,L,Kt){this.dialogRef=n,this.utilService=l,this.filter=u,this.fb=x,this.cdr=C,this.taskWfService=O,this.taskHelperService=L,this.dialogService=Kt,this.tasks=[],this.screenHeight=0,this.filterFields=["taskAssign.id","taskAssign.taskSubject"],this.destroy$=new D.x,this.formGroup=this.fb.formGroup(new at.U)}ngOnInit(){this.taskWfService.items$.pipe((0,Z.R)(this.destroy$)).subscribe(n=>{this.tasks=n,this.cdr.markForCheck()}),this.checkScreenSize()}onResize(n){this.checkScreenSize()}checkScreenSize(){this.screenHeight=Math.floor(.6*window.innerHeight),this.cdr.detectChanges()}showDetail(n){n&&(this.dialogRef=this.dialogService.open(K,{header:`\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81 #${n?.task?.id}`,width:window.innerWidth>j.A.lg?"65%":"80%",data:{workflow:(0,_.cloneDeep)(n)},contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0}))}onSelectedYear(n){if(n.getFullYear()){const u=n.getFullYear();this.taskHelperService.getTaskIn(u).subscribe()}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef?.close()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(s.E7),t.Y36(v.F),t.Y36(rt.i),t.Y36(A.GW),t.Y36(t.sBO),t.Y36(p.y),t.Y36(q.P),t.Y36(s.xA))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-assign-in"]],hostBindings:function(n,l){1&n&&t.NdJ("resize",function(x){return l.onResize(x)},!1,t.Jf7)},decls:18,vars:10,consts:[[1,"p-grid","mt-4"],[1,"p-col-12"],[1,"flex","align-items-center","justify-content-between"],[1,"flex","align-items-center"],[1,"text-2xl","font-semibold","ml-2"],[3,"formGroup"],[3,"yearSelected"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","\u0e84\u0ebb\u0ec9\u0e99\u0eab\u0eb2..",3,"input"],["responsiveLayout","scroll","styleClass","p-datatable-sm","currentPageReportTemplate","\u0eaa\u0eb0\u0ec1\u0e94\u0e87 {first} \u0ec0\u0e96\u0eb4\u0e87 {last} \u0e88\u0eb2\u0e81\u0e97\u0eb1\u0e87\u0edd\u0ebb\u0e94 {totalRecords} \u0ea5\u0eb2\u0e8d\u0e81\u0eb2\u0e99",3,"value","rows","paginator","globalFilterFields","scrollable","scrollHeight","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"text-center"],[1,"white-space-nowrap","text-center"],[1,"white-space-nowrap"],[1,"text-center",3,"ngStyle"],["tooltipPosition","bottom",1,"white-space-nowrap",3,"pTooltip"],["tooltipPosition","bottom","tooltipStyleClass","custom-tooltip",3,"pTooltip"],[1,"max-w-15rem","xl:max-w-30rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"cursor-pointer"],[3,"item"],[1,"text-center","white-space-nowrap"],["styleClass","px-4",3,"value","rounded"],[3,"taskStatus"],[3,"workflow"],["colspan","10",1,"text-center","py-4"]],template:function(n,l){if(1&n){const u=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5,"\u0ea5\u0eb2\u0e8d\u0e81\u0eb2\u0e99\u0ea7\u0ebd\u0e81\u0e97\u0eb5\u0ec8\u0e97\u0ec8\u0eb2\u0e99\u0ec4\u0e94\u0ec9\u0eae\u0eb1\u0e9a\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d"),t.qZA()(),t.TgZ(6,"div",3)(7,"form",5)(8,"app-year-picker",6),t.NdJ("yearSelected",function(C){return l.onSelectedYear(C)}),t.qZA()(),t.TgZ(9,"span",7),t._UZ(10,"i",8),t.TgZ(11,"input",9),t.NdJ("input",function(C){t.CHM(u);const O=t.MAs(14);return t.KtG(l.filter.dataTable(O,C))}),t.qZA()()()(),t._UZ(12,"hr"),t.TgZ(13,"p-table",10,11),t.YNc(15,yt,21,0,"ng-template",12),t.YNc(16,It,23,22,"ng-template",13),t.YNc(17,St,3,0,"ng-template",14),t.qZA()()()}2&n&&(t.xp6(7),t.Q6J("formGroup",l.formGroup),t.xp6(6),t.Q6J("value",l.tasks)("rows",25)("paginator",!0)("globalFilterFields",l.filterFields)("scrollable",!0)("scrollHeight",l.screenHeight+"px")("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(9,Mt)))},dependencies:[e.PC,k._Y,k.JL,k.sg,A.VP,z.iA,H.jx,V.o,y.V,$.u,ut.m,M.h,ct.O,Dt,e.uU],encapsulation:2,changeDetection:0}),i})(),resolve:{items:(()=>{class i{constructor(n){this.taskHelperService=n}resolve(n,l){const u=(new Date).getFullYear();return this.taskHelperService.getTaskIn(u)}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(q.P))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}];let Ut=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[a.Bz.forChild(wt),a.Bz]}),i})();var kt=o(4466),Ot=o(1493),Pt=o(5108),Ft=o(5121),Rt=o(2448),Jt=o(3241),Yt=o(1480),Nt=o(7368),Qt=o(2890),Lt=o(9981),Gt=o(6749),Wt=o(8191),jt=o(1979);let Ht=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[s.E7,s.xA],imports:[e.ez,Ut,kt.m,z.U$,V.j,et.A,y.W,$.z,E.o,ot._8,Ot.S,Pt.x,Ft.Z_,it.L,lt.l,Jt.$,Rt.q,jt.p,Wt.P,Yt._,Nt.b,Qt.j,Lt.o,Gt.g]}),i})()},695:(R,b,o)=>{o.d(b,{d:()=>t});var e=o(8274),a=o(433),_=o(2156),D=o(5121),Z=o(805);function g(s,h){1&s&&(e.TgZ(0,"span",3)(1,"select",4)(2,"option",5),e._uU(3,"Heading 1"),e.qZA(),e.TgZ(4,"option",6),e._uU(5,"Heading 2"),e.qZA(),e.TgZ(6,"option",7),e._uU(7,"Normal"),e.qZA()(),e._UZ(8,"button",8)(9,"button",9)(10,"button",10)(11,"select",11)(12,"button",12)(13,"button",13)(14,"button",14)(15,"button",15),e.TgZ(16,"select",16),e._UZ(17,"option",7)(18,"option",17)(19,"option",18)(20,"option",19),e.qZA()())}let t=(()=>{class s{constructor(p){this.parentForm=p,this.readonly=!1}get control(){return this.formGroup.get(this.formControlName)}ngOnInit(){this.formGroup=this.parentForm.control}writeValue(p){}registerOnChange(p){}registerOnTouched(p){}setDisabledState(p){}}return s.\u0275fac=function(p){return new(p||s)(e.Y36(a.sg))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-shared-editor"]],inputs:{readonly:"readonly",formControlName:"formControlName"},features:[e._Bn([{provide:a.JU,useExisting:(0,e.Gpc)(()=>s),multi:!0}])],decls:3,vars:4,consts:[[3,"formGroup"],["styleClass","h-8rem",3,"id","readonly","formControlName"],["pTemplate","header"],[1,"ql-formats"],[1,"ql-header"],["value","1"],["value","2"],["selected",""],["type","button","aria-label","Bold",1,"ql-bold"],["type","button","aria-label","Italic",1,"ql-italic"],["type","button","aria-label","Underline",1,"ql-underline"],[1,"ql-color"],["type","button","aria-label","Strikethrough",1,"ql-strike"],["type","button","value","ordered","aria-label","Ordered List",1,"ql-list"],["type","button","value","bullet","aria-label","Unordered List",1,"ql-list"],["type","button","aria-label","Insert Link",1,"ql-link"],[1,"ql-align"],["value","center"],["value","right"],["value","justify"]],template:function(p,v){1&p&&(e.TgZ(0,"form",0)(1,"p-editor",1),e.YNc(2,g,21,0,"ng-template",2),e.qZA()()),2&p&&(e.Q6J("formGroup",v.formGroup),e.xp6(1),e.Q6J("id",v.formControlName)("readonly",v.readonly)("formControlName",v.formControlName))},dependencies:[a._Y,a.YN,a.Kr,a.JJ,a.JL,a.sg,a.u,_.bc,_.VP,_.YE,D.ML,Z.jx],encapsulation:2}),s})()},2890:(R,b,o)=>{o.d(b,{j:()=>Z});var e=o(6895),a=o(5121),_=o(4466),D=o(8274);let Z=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=D.oAB({type:g}),g.\u0275inj=D.cJS({imports:[e.ez,_.m,a.Z_]}),g})()},3241:(R,b,o)=>{o.d(b,{$:()=>Z});var e=o(6895),a=o(7147),_=o(2448),D=o(8274);let Z=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=D.oAB({type:g}),g.\u0275inj=D.cJS({imports:[e.ez,a.o,_.q]}),g})()},7147:(R,b,o)=>{o.d(b,{A:()=>p,o:()=>v});var e=o(8274),a=o(6895);function _(c,y){if(1&c){const E=e.EpF();e.TgZ(0,"img",6),e.NdJ("error",function(T){e.CHM(E);const M=e.oxw(2);return e.KtG(M.imageError(T))}),e.qZA()}if(2&c){const E=e.oxw(2);e.Q6J("src",E.image,e.LSH)}}function D(c,y){if(1&c&&e._UZ(0,"span",8),2&c){const E=e.oxw(3);e.Tol(E.icon),e.Q6J("ngClass","p-chip-icon")}}function Z(c,y){if(1&c&&e.YNc(0,D,1,3,"span",7),2&c){const E=e.oxw(2);e.Q6J("ngIf",E.icon)}}function g(c,y){if(1&c&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&c){const E=e.oxw(2);e.xp6(1),e.Oqu(E.label)}}function t(c,y){if(1&c){const E=e.EpF();e.TgZ(0,"span",10),e.NdJ("click",function(T){e.CHM(E);const M=e.oxw(2);return e.KtG(M.close(T))})("keydown.enter",function(T){e.CHM(E);const M=e.oxw(2);return e.KtG(M.close(T))}),e.qZA()}if(2&c){const E=e.oxw(2);e.Tol(E.removeIcon),e.Q6J("ngClass","pi-chip-remove-icon")}}function s(c,y){if(1&c&&(e.TgZ(0,"div",1),e.Hsn(1),e.YNc(2,_,1,1,"img",2),e.YNc(3,Z,1,1,"ng-template",null,3,e.W1O),e.YNc(5,g,2,1,"div",4),e.YNc(6,t,1,3,"span",5),e.qZA()),2&c){const E=e.MAs(4),I=e.oxw();e.Tol(I.styleClass),e.Q6J("ngClass",I.containerClass())("ngStyle",I.style),e.xp6(2),e.Q6J("ngIf",I.image)("ngIfElse",E),e.xp6(3),e.Q6J("ngIf",I.label),e.xp6(1),e.Q6J("ngIf",I.removable)}}const h=["*"];let p=(()=>{class c{constructor(){this.removeIcon="pi pi-times-circle",this.onRemove=new e.vpe,this.onImageError=new e.vpe,this.visible=!0}containerClass(){return{"p-chip p-component":!0,"p-chip-image":null!=this.image}}close(E){this.visible=!1,this.onRemove.emit(E)}imageError(E){this.onImageError.emit(E)}}return c.\u0275fac=function(E){return new(E||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["p-chip"]],hostAttrs:[1,"p-element"],inputs:{label:"label",icon:"icon",image:"image",style:"style",styleClass:"styleClass",removable:"removable",removeIcon:"removeIcon"},outputs:{onRemove:"onRemove",onImageError:"onImageError"},ngContentSelectors:h,decls:1,vars:1,consts:[[3,"ngClass","class","ngStyle",4,"ngIf"],[3,"ngClass","ngStyle"],[3,"src","error",4,"ngIf","ngIfElse"],["iconTemplate",""],["class","p-chip-text",4,"ngIf"],["tabindex","0",3,"class","ngClass","click","keydown.enter",4,"ngIf"],[3,"src","error"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[1,"p-chip-text"],["tabindex","0",3,"ngClass","click","keydown.enter"]],template:function(E,I){1&E&&(e.F$t(),e.YNc(0,s,7,8,"div",0)),2&E&&e.Q6J("ngIf",I.visible)},dependencies:[a.mk,a.O5,a.PC],styles:[".p-chip{display:inline-flex;align-items:center}.p-chip-text,.p-chip-icon.pi{line-height:1.5}.pi-chip-remove-icon{line-height:1.5;cursor:pointer}.p-chip img{border-radius:50%}\n"],encapsulation:2,changeDetection:0}),c})(),v=(()=>{class c{}return c.\u0275fac=function(E){return new(E||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[a.ez]}),c})()},2946:(R,b,o)=>{o.d(b,{L:()=>G,p:()=>Q});var e=o(8274),a=o(7340),_=o(6895),D=o(805),Z=o(1795);const g=function(d,w){return{"pi-minus":d,"pi-plus":w}};function t(d,w){if(1&d&&e._UZ(0,"span",9),2&d){const f=e.oxw(2);e.Q6J("ngClass",e.WLB(1,g,!f.collapsed,f.collapsed))}}function s(d,w){1&d&&e.GkF(0)}function h(d,w){if(1&d){const f=e.EpF();e.ynx(0),e.TgZ(1,"a",7),e.NdJ("click",function(F){e.CHM(f);const J=e.oxw();return e.KtG(J.toggle(F))})("keydown.enter",function(F){e.CHM(f);const J=e.oxw();return e.KtG(J.toggle(F))}),e.YNc(2,t,1,4,"span",8),e.YNc(3,s,1,0,"ng-container",6),e.qZA(),e.BQk()}if(2&d){const f=e.oxw(),B=e.MAs(4);e.xp6(1),e.uIk("aria-controls",f.id+"-content")("aria-expanded",!f.collapsed),e.xp6(1),e.Q6J("ngIf",f.toggleable),e.xp6(1),e.Q6J("ngTemplateOutlet",B)}}function p(d,w){1&d&&e.GkF(0)}function v(d,w){if(1&d&&(e.TgZ(0,"span",10),e._uU(1),e.qZA(),e.Hsn(2,1),e.YNc(3,p,1,0,"ng-container",6)),2&d){const f=e.oxw();e.xp6(1),e.Oqu(f.legend),e.xp6(2),e.Q6J("ngTemplateOutlet",f.headerTemplate)}}function c(d,w){1&d&&e.GkF(0)}const y=["*",[["p-header"]]],E=function(d,w){return{"p-fieldset p-component":!0,"p-fieldset-toggleable":d,"p-fieldset-expanded":w}},I=function(d){return{transitionParams:d,height:"0"}},T=function(d){return{value:"hidden",params:d}},M=function(d){return{transitionParams:d,height:"*"}},m=function(d){return{value:"visible",params:d}},S=["*","p-header"];let N=0,Q=(()=>{class d{constructor(f){this.el=f,this.collapsed=!1,this.collapsedChange=new e.vpe,this.onBeforeToggle=new e.vpe,this.onAfterToggle=new e.vpe,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-fieldset-"+N++}ngAfterContentInit(){this.templates.forEach(f=>{switch(f.getType()){case"header":this.headerTemplate=f.template;break;case"content":this.contentTemplate=f.template}})}toggle(f){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:f,collapsed:this.collapsed}),this.collapsed?this.expand(f):this.collapse(f),this.onAfterToggle.emit({originalEvent:f,collapsed:this.collapsed}),f.preventDefault()}expand(f){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(f){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(){this.animating=!1}}return d.\u0275fac=function(f){return new(f||d)(e.Y36(e.SBq))},d.\u0275cmp=e.Xpm({type:d,selectors:[["p-fieldset"]],contentQueries:function(f,B,F){if(1&f&&e.Suo(F,D.jx,4),2&f){let J;e.iGM(J=e.CRH())&&(B.templates=J)}},hostAttrs:[1,"p-element"],inputs:{legend:"legend",toggleable:"toggleable",collapsed:"collapsed",style:"style",styleClass:"styleClass",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:S,decls:9,vars:23,consts:[[3,"ngClass","ngStyle"],[1,"p-fieldset-legend"],[4,"ngIf","ngIfElse"],["legendContent",""],["role","region",1,"p-toggleable-content"],[1,"p-fieldset-content"],[4,"ngTemplateOutlet"],["tabindex","0","pRipple","",3,"click","keydown.enter"],["class","p-fieldset-toggler pi",3,"ngClass",4,"ngIf"],[1,"p-fieldset-toggler","pi",3,"ngClass"],[1,"p-fieldset-legend-text"]],template:function(f,B){if(1&f&&(e.F$t(y),e.TgZ(0,"fieldset",0)(1,"legend",1),e.YNc(2,h,4,4,"ng-container",2),e.YNc(3,v,4,2,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4),e.NdJ("@fieldsetContent.done",function(){return B.onToggleDone()}),e.TgZ(6,"div",5),e.Hsn(7),e.YNc(8,c,1,0,"ng-container",6),e.qZA()()()),2&f){const F=e.MAs(4);e.Tol(B.styleClass),e.Q6J("ngClass",e.WLB(12,E,B.toggleable,!B.collapsed&&B.toggleable))("ngStyle",B.style),e.uIk("id",B.id),e.xp6(2),e.Q6J("ngIf",B.toggleable)("ngIfElse",F),e.xp6(3),e.Q6J("@fieldsetContent",B.collapsed?e.VKq(17,T,e.VKq(15,I,B.transitionOptions)):e.VKq(21,m,e.VKq(19,M,B.animating?B.transitionOptions:"0ms"))),e.uIk("id",B.id+"-content")("aria-labelledby",B.id)("aria-hidden",B.collapsed),e.xp6(3),e.Q6J("ngTemplateOutlet",B.contentTemplate)}},dependencies:[_.mk,_.O5,_.tP,_.PC,Z.H],styles:[".p-fieldset-legend>a,.p-fieldset-legend>span{display:flex;align-items:center;justify-content:center}.p-fieldset-toggleable .p-fieldset-legend a{cursor:pointer;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-fieldset-legend-text{line-height:1}.p-fieldset-toggleable.p-fieldset-expanded>.p-toggleable-content:not(.ng-animating){overflow:visible}.p-fieldset-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[(0,a.X$)("fieldsetContent",[(0,a.SB)("hidden",(0,a.oB)({height:"0"})),(0,a.SB)("visible",(0,a.oB)({height:"*"})),(0,a.eR)("visible <=> hidden",[(0,a.jt)("{{transitionParams}}")]),(0,a.eR)("void => *",(0,a.jt)(0))])]},changeDetection:0}),d})(),G=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[_.ez,Z.T,D.m8]}),d})()},3054:(R,b,o)=>{o.d(b,{A:()=>Z,g:()=>D});var e=o(8274),a=o(6895),_=o(433);let D=(()=>{class g{constructor(s,h,p,v){this.el=s,this.ngModel=h,this.control=p,this.cd=v,this.onResize=new e.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(s){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(s){this.autoResize&&this.resize(s)}onBlur(s){this.autoResize&&this.resize(s)}resize(s){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(s||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(_.On,8),e.Y36(_.a5,8),e.Y36(e.sBO))},g.\u0275dir=e.lG2({type:g,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(s,h){1&s&&e.NdJ("input",function(v){return h.onInput(v)})("focus",function(v){return h.onFocus(v)})("blur",function(v){return h.onBlur(v)}),2&s&&e.ekj("p-filled",h.filled)("p-inputtextarea-resizable",h.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),g})(),Z=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[a.ez]}),g})()},6679:(R,b,o)=>{o.d(b,{V:()=>Z,W:()=>g});var e=o(8274),a=o(6895);function _(t,s){if(1&t&&e._UZ(0,"span",3),2&t){const h=e.oxw();e.Q6J("ngClass",h.icon)}}const D=["*"];let Z=(()=>{class t{containerClass(){return{"p-tag p-component":!0,"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}}}return t.\u0275fac=function(h){return new(h||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["p-tag"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",severity:"severity",value:"value",icon:"icon",rounded:"rounded"},ngContentSelectors:D,decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-value"],[1,"p-tag-icon",3,"ngClass"]],template:function(h,p){1&h&&(e.F$t(),e.TgZ(0,"span",0),e.Hsn(1),e.YNc(2,_,1,1,"span",1),e.TgZ(3,"span",2),e._uU(4),e.qZA()()),2&h&&(e.Tol(p.styleClass),e.Q6J("ngClass",p.containerClass())("ngStyle",p.style),e.xp6(2),e.Q6J("ngIf",p.icon),e.xp6(2),e.Oqu(p.value))},dependencies:[a.mk,a.O5,a.PC],styles:[".p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-value,.p-tag-icon.pi{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}\n"],encapsulation:2,changeDetection:0}),t})(),g=(()=>{class t{}return t.\u0275fac=function(h){return new(h||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.ez]}),t})()}}]);