"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[7782],{8739:(U,A,i)=>{i.d(A,{Q:()=>_});var n=i(8274),f=i(6895),h=i(8639);function B(a,r){if(1&a&&(n.TgZ(0,"tr")(1,"td",3)(2,"span",4),n._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.ALo(6,"date"),n.qZA()()),2&a){const e=n.oxw(3);n.xp6(5),n.Oqu(n.xi3(6,1,null==e.item?null:e.item.indicatorTime,"dd/MM/yyyy HH:mm"))}}function d(a,r){if(1&a&&(n.TgZ(0,"tr")(1,"td",3)(2,"span",4),n._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.qZA()()),2&a){const e=n.oxw(3);n.xp6(5),n.hij(" ",null==e.item?null:e.item.indicatorQuantity,"")}}function t(a,r){if(1&a&&(n.TgZ(0,"tr")(1,"td",3)(2,"span",4),n._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.qZA()()),2&a){const e=n.oxw(3);n.xp6(5),n.Oqu(null==e.item||null==e.item.indicatorQuality?null:e.item.indicatorQuality.subject)}}function x(a,r){if(1&a&&(n.TgZ(0,"tr")(1,"td",3)(2,"span",4),n._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.qZA()()),2&a){const e=n.oxw(3);n.xp6(5),n.Oqu(null==e.item||null==e.item.indicatorSatisfied?null:e.item.indicatorSatisfied.subject)}}function w(a,r){if(1&a&&(n.ynx(0),n.YNc(1,B,7,4,"tr",0),n.YNc(2,d,6,1,"tr",0),n.YNc(3,t,6,1,"tr",0),n.YNc(4,x,6,1,"tr",0),n.BQk()),2&a){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",null==e.item?null:e.item.indicatorTime),n.xp6(1),n.Q6J("ngIf",null==e.item?null:e.item.indicatorQuantity),n.xp6(1),n.Q6J("ngIf",null==e.item?null:e.item.indicatorQuality),n.xp6(1),n.Q6J("ngIf",null==e.item?null:e.item.indicatorSatisfied)}}function S(a,r){if(1&a&&(n.ynx(0),n.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),n._uU(5,"\u0e81\u0eb2\u0e99\u0e95\u0eb1\u0ec9\u0e87\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94"),n.qZA()()(),n.TgZ(6,"tbody"),n.YNc(7,w,5,4,"ng-container",0),n.qZA()(),n.BQk()),2&a){const e=n.oxw();n.xp6(7),n.Q6J("ngIf",e.item)}}function m(a,r){if(1&a&&(n.TgZ(0,"tr")(1,"td",3)(2,"span",4),n._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.ALo(6,"date"),n.qZA(),n.TgZ(7,"td",6),n._UZ(8,"p-badge",7),n.qZA()()),2&a){const e=n.oxw(2);n.xp6(5),n.hij(" ",n.xi3(6,2,null==e.item||null==e.item.task?null:e.item.task.indicatorTime,"dd/MM/yyyy HH:mm")," "),n.xp6(3),n.s9C("value",e.item.selfTimeScore)}}function v(a,r){if(1&a&&(n.TgZ(0,"tr")(1,"td",3)(2,"span",4),n._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.qZA(),n.TgZ(6,"td",6),n._UZ(7,"p-badge",7),n.qZA()()),2&a){const e=n.oxw(2);n.xp6(5),n.hij(" ",null==e.item||null==e.item.task?null:e.item.task.indicatorQuantity," "),n.xp6(2),n.s9C("value",null==e.item?null:e.item.selfQuantityScore)}}function T(a,r){if(1&a&&(n.TgZ(0,"tr")(1,"td",3)(2,"span",4),n._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.qZA(),n.TgZ(6,"td",6),n._UZ(7,"p-badge",7),n.qZA()()),2&a){const e=n.oxw(2);n.xp6(5),n.hij(" ",null==e.item||null==e.item.task||null==e.item.task.indicatorQuality?null:e.item.task.indicatorQuality.subject," "),n.xp6(2),n.s9C("value",null==e.item?null:e.item.selfQualityScore)}}function C(a,r){if(1&a&&(n.TgZ(0,"tr")(1,"td",3)(2,"span",4),n._uU(3,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.qZA(),n.TgZ(6,"td",6),n._UZ(7,"p-badge",7),n.qZA()()),2&a){const e=n.oxw(2);n.xp6(5),n.hij(" ",null==e.item||null==e.item.task||null==e.item.task.indicatorSatisfied?null:e.item.task.indicatorSatisfied.subject," "),n.xp6(2),n.s9C("value",null==e.item?null:e.item.selfSatisfiedScore)}}function I(a,r){if(1&a&&(n.ynx(0),n.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),n._uU(5,"\u0e81\u0eb2\u0e99\u0e95\u0eb1\u0ec9\u0e87\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94\u0e82\u0ead\u0e87 (\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2)"),n.qZA(),n.TgZ(6,"th",5),n._uU(7,"\u0e81\u0eb2\u0e99\u0ec3\u0eab\u0ec9\u0e84\u0eb0\u0ec1\u0e99\u0e99\u0e82\u0ead\u0e87 (\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81)"),n.qZA()()(),n.TgZ(8,"tbody"),n.YNc(9,m,9,5,"tr",0),n.YNc(10,v,8,2,"tr",0),n.YNc(11,T,8,2,"tr",0),n.YNc(12,C,8,2,"tr",0),n.qZA()(),n.BQk()),2&a){const e=n.oxw();n.xp6(9),n.Q6J("ngIf",null==e.item||null==e.item.task?null:e.item.task.indicatorTime),n.xp6(1),n.Q6J("ngIf",null==e.item||null==e.item.task?null:e.item.task.indicatorQuantity),n.xp6(1),n.Q6J("ngIf",null==e.item||null==e.item.task?null:e.item.task.indicatorQuality),n.xp6(1),n.Q6J("ngIf",null==e.item||null==e.item.task?null:e.item.task.indicatorSatisfied)}}let _=(()=>{class a{constructor(){this.isHead=!1}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-indicator-detail"]],inputs:{item:"item",isHead:"isHead"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"table-custom","my-4"],["colspan","2",1,"text-left","text-lg","white-space-nowrap"],[1,"white-space-nowrap"],[1,"font-bold"],[1,"text-lg","text-center","white-space-nowrap"],[1,"text-center"],[3,"value"]],template:function(e,D){1&e&&(n.YNc(0,S,8,1,"ng-container",0),n.YNc(1,I,13,4,"ng-container",0)),2&e&&(n.Q6J("ngIf",!D.isHead),n.xp6(1),n.Q6J("ngIf",D.isHead))},dependencies:[f.O5,h.Ct,f.uU],encapsulation:2}),a})()},9615:(U,A,i)=>{i.d(A,{E:()=>B});var n=i(6895),f=i(8639),h=i(8274);let B=(()=>{class d{}return d.\u0275fac=function(x){return new(x||d)},d.\u0275mod=h.oAB({type:d}),d.\u0275inj=h.cJS({imports:[n.ez,f.TX]}),d})()},7782:(U,A,i)=>{i.r(A),i.d(A,{PlanSubInHqModule:()=>Bt});var n=i(6895),f=i(5675),h=i(7579),B=i(2722),d=i(7248),t=i(8274),x=i(6832),w=i(1094),S=i(2156),m=i(4325),v=i(3678),T=i(9641),C=i(433),I=i(793),_=i(805),a=i(1740),r=i(6679),e=i(3608),D=i(6521),H=i(3446),P=i(3948),k=i(7489),M=i(7448);class O{static getDetail(s){return{query:{fields:["main.id","main.docYear","main.createdAt","main.remark","creator.staffCode","creator.firstName","creator.lastName","planSub.id","planSub.taskSubject","planSub.taskWeight","planSub.indicatorTime","planSub.indicatorQuantity","psubIq.id","psubIq.subject","psubIs.id","psubIs.subject","wfStatus.id","wfStatus.name","wfStatus.icon","wfStatus.color"],joins:["creator","planSub","psubIq","psubIs","wfStatus"],filters:s,getType:"ONE"}}}}var J=i(8739);function R(l,s){if(1&l&&(t.TgZ(0,"div",4)(1,"label",5),t._uU(2,"\u0e82\u0ecd\u0ec9\u0e84\u0ea7\u0eb2\u0ea1\u0e88\u0eb2\u0e81\u0e9c\u0eb9\u0ec9\u0ea1\u0ead\u0e9a\u0e95\u0ecd\u0ec8"),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&l){const u=t.oxw(2).ngIf;t.xp6(4),t.hij(" ",u.remark," ")}}const j=function(){return{width:"50px"}};function N(l,s){if(1&l&&(t.ynx(0),t.TgZ(1,"div",4)(2,"label",5),t._uU(3),t.qZA()(),t.TgZ(4,"div",6)(5,"div")(6,"label",7),t._uU(7,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d:"),t.qZA()(),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"div",8)(11,"div")(12,"label",7),t._uU(13,"\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec2\u0e94\u0e8d:"),t.qZA()(),t.TgZ(14,"span",9),t._uU(15),t.qZA()(),t.TgZ(16,"div")(17,"label",5),t._uU(18),t.qZA()(),t.TgZ(19,"div",4)(20,"label",5),t._uU(21,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d\u0ec1\u0e9c\u0e99\u0eaa\u0eb9\u0ec9\u0e8a\u0ebb\u0e99"),t.qZA(),t.TgZ(22,"div"),t._uU(23),t.qZA()(),t.TgZ(24,"div",8)(25,"div")(26,"label",7),t._uU(27,"\u0e99\u0ec9\u0eb3\u0edc\u0eb1\u0e81:"),t.qZA()(),t._UZ(28,"p-tag",10),t.qZA(),t.TgZ(29,"div",4),t._UZ(30,"app-indicator-detail",11),t.qZA(),t.YNc(31,R,5,1,"div",12),t.TgZ(32,"div",13)(33,"div")(34,"label",7),t._uU(35,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0:"),t.qZA()(),t._UZ(36,"app-task-status",14),t.qZA(),t.BQk()),2&l){const u=s.ngIf,o=t.oxw().ngIf;t.xp6(3),t.hij("\u0e9b\u0eb5\u0e81\u0eb2\u0e99: ",null==o?null:o.docYear,""),t.xp6(5),t.hij(" ",t.xi3(9,14,null==o?null:o.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(6),t.Q6J("pTooltip",null==o||null==o.creator?null:o.creator.staffCode),t.xp6(1),t.AsE(" ",null==o||null==o.creator?null:o.creator.firstName," ",null==o||null==o.creator?null:o.creator.lastName," "),t.xp6(3),t.hij("\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d: ",null==u?null:u.id,""),t.xp6(5),t.Oqu(null==u?null:u.taskSubject),t.xp6(5),t.Akn(t.DdM(17,j)),t.Q6J("value",(null==u?null:u.taskWeight)+"%")("rounded",!0),t.xp6(2),t.Q6J("item",u),t.xp6(1),t.Q6J("ngIf",null==o?null:o.remark),t.xp6(5),t.Q6J("taskStatus",null==o?null:o.status)}}function F(l,s){if(1&l&&(t.ynx(0),t.TgZ(1,"div",3),t.YNc(2,N,37,18,"ng-container",2),t.qZA(),t.BQk()),2&l){const u=s.ngIf;t.xp6(2),t.Q6J("ngIf",null==u?null:u.planSub)}}let W=(()=>{class l{constructor(u,o){this.dialogConfig=u,this.wfStaffService=o}ngOnInit(){this.workflowId=this.dialogConfig.data.data,this.workflowId&&this.getPlanSubDetail()}getPlanSubDetail(){this.workflow$=this.wfStaffService.item$;const u=Object.assign({id:this.workflowId}),o=O.getDetail(u);this.wfStaffService.getOne(o).subscribe()}}return l.\u0275fac=function(u){return new(u||l)(t.Y36(m.S),t.Y36(v.K))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-detail"]],decls:4,vars:3,consts:[[1,"grid"],[1,"col-12"],[4,"ngIf"],[1,"p-fluid"],[1,"field"],[1,"font-semibold","text-xl","mb-0"],[1,"flex","align-items-center","gap-2"],[1,"font-semibold","text-xl"],[1,"field","flex","align-items-center","gap-2"],["tooltipPosition","bottom",3,"pTooltip"],["severity","success",3,"value","rounded"],[3,"item"],["class","field",4,"ngIf"],[1,"field","field","flex","align-items-center","gap-2"],[3,"taskStatus"]],template:function(u,o){1&u&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,F,3,1,"ng-container",2),t.ALo(3,"async"),t.qZA()()),2&u&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,o.workflow$)))},dependencies:[n.O5,r.V,e.u,P.h,J.Q,n.Ov,n.uU],encapsulation:2}),l})();var K=i(3535),g=i(4090),b=i(209),L=i(704),z=i(7593),Y=i(8386),Q=i(605);function G(l,s){if(1&l){const u=t.EpF();t.ynx(0),t.TgZ(1,"p-splitButton",1),t.NdJ("onClick",function(){t.CHM(u);const E=t.oxw();return t.KtG(E.showDetail())})("onDropdownClick",function(){t.CHM(u);const E=t.oxw();return t.KtG(E.onDropdownClick())}),t.qZA(),t.BQk()}if(2&l){const u=t.oxw();t.xp6(1),t.Q6J("model",u.menuItems)}}let $=(()=>{class l{constructor(u,o,E,c,p,Z,y){this.dialogRef=u,this.alertService=o,this.dialogService=E,this.staffWfService=c,this.officeWfService=p,this.userService=Z,this.confirmService=y,this.menuItems=[]}ngOnInit(){this.user=this.userService.getLoggedUser(),this.task=this.workflow?.planSub,this.planSub=this.workflow?.planSub,this.statusId=this.workflow?.status?.id,this.workflowId=this.workflow?.id}onDropdownClick(){this.user?.role?.id<14?this.statusId===g.hY.WAIT_PICK_JOB?this.menuItems=[{label:"\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81\u0ec0\u0ead\u0e87",icon:"pi pi-fw pi-check",command:()=>{this.onPickup()}},{label:"\u0ea1\u0ead\u0e9a\u0ea7\u0ebd\u0e81\u0e95\u0ecd\u0ec8",icon:"pi pi-fw pi-share-alt",command:()=>{this.onForward()}}]:(this.statusId===g.hY.IN_PROGRESS||this.statusId===g.hY.WAIT_REPORT)&&(this.menuItems=[{label:"\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99",icon:"pi pi-fw pi-send",command:()=>{this.onReport()}}]):this.statusId===g.hY.WAIT_PICK_JOB?this.menuItems=[{label:"\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81",icon:"pi pi-fw pi-check",command:()=>{this.onPickup()}}]:(this.statusId===g.hY.IN_PROGRESS||this.statusId===g.hY.WAIT_REPORT)&&(this.menuItems=[{label:"\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99",icon:"pi pi-fw pi-send",command:()=>{this.onReport()}}])}showDetail(){if(this.workflowId)return this.dialogService.open(W,{header:`\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94 #${this.workflowId}`,width:window.innerWidth>b.A.lg?"65%":"80%",data:{data:this.workflowId},contentStyle:{overflow:"auto","padding-bottom":"60px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0})}onPickup(){this.workflowId&&this.confirmService.confirm({message:"\u0ec1\u0e99\u0ec8\u0ec3\u0e88\u0e9a\u0ecd\u0ec8\u0ea7\u0ec8\u0eb2\u0e95\u0ec9\u0ead\u0e87\u0e81\u0eb2\u0e99\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81\u0ec0\u0ead\u0e87, \u0e97\u0ec8\u0eb2\u0e99\u0e88\u0eb0\u0e9a\u0ecd\u0ec8\u0eaa\u0eb2\u0ea1\u0eb2\u0e94\u0ea1\u0ead\u0e9a\u0ea7\u0ebd\u0e81\u0e95\u0ecd\u0ec8\u0ec4\u0e94\u0ec9\u0ec3\u0e99\u0e9e\u0eb2\u0e8d\u0eab\u0ebc\u0eb1\u0e87?",icon:"pi pi-exclamation-triangle",accept:()=>{const u=this.planSub?.id,o=this.workflow?.id;if(u&&o){const E={parentWfId:u,childId:o},c=Object.assign({statusId:g.hY.IN_PROGRESS});this.staffWfService.pickup(E,c).subscribe({next:()=>{this.alertService.showSuccess("\u0eae\u0eb1\u0e9a\u0ea7\u0ebd\u0e81\u0ec1\u0ea5\u0ec9\u0ea7")},error:p=>{this.alertService.showError(p)}})}}})}onForward(){this.workflowId&&(this.dialogRef=this.dialogService.open(M.G,{header:`\u0ea1\u0ead\u0e9a\u0ea7\u0ebd\u0e81\u0e95\u0ecd\u0ec8 #${this.planSub?.id}`,width:window.innerWidth>b.A.lg?"50%":"80%",data:{data:(0,k.cloneDeep)(this.workflow),isOffice:!1},contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0}))}onReport(){this.workflow&&(this.dialogRef=this.dialogService.open(K.K,{header:`\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 \u0ec1\u0ea5\u0eb0 \u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81 #${this.task?.id}`,width:window.innerWidth>b.A.lg?"65%":"80%",data:{data:(0,k.cloneDeep)(this.workflow)},contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0}))}}return l.\u0275fac=function(u){return new(u||l)(t.Y36(m.E7),t.Y36(L.c),t.Y36(m.xA),t.Y36(v.K),t.Y36(z.f),t.Y36(Y.K),t.Y36(_.YP))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-btn-action"]],inputs:{workflow:"workflow"},decls:1,vars:1,consts:[[4,"ngIf"],["appendTo","body","label","\u0ec0\u0e9a\u0eb4\u0ec8\u0e87\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94","styleClass","p-button-secondary p-button-sm",3,"model","onClick","onDropdownClick"]],template:function(u,o){1&u&&t.YNc(0,G,2,1,"ng-container",0),2&u&&t.Q6J("ngIf",o.workflow)},dependencies:[n.O5,Q.a],encapsulation:2}),l})();function X(l,s){1&l&&(t.TgZ(0,"tr")(1,"th",15),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th",15),t._uU(4,"\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5"),t.qZA(),t.TgZ(5,"th",16),t._uU(6,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d"),t.qZA(),t.TgZ(7,"th",17),t._uU(8,"\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec2\u0e94\u0e8d"),t.qZA(),t.TgZ(9,"th",16),t._uU(10,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d\u0ec1\u0e9c\u0e99\u0eaa\u0eb9\u0ec9\u0e8a\u0ebb\u0e99"),t.qZA(),t.TgZ(11,"th",17),t._uU(12,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d"),t.qZA(),t.TgZ(13,"th",16),t._uU(14,"\u0e99\u0ec9\u0eb3\u0edc\u0eb1\u0e81"),t.qZA(),t.TgZ(15,"th",16),t._uU(16,"\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94"),t.qZA(),t.TgZ(17,"th",16),t._uU(18,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0"),t.qZA(),t.TgZ(19,"th",16),t._uU(20,"\u0e94\u0eb3\u0ec0\u0e99\u0eb5\u0e99\u0e81\u0eb2\u0e99"),t.qZA()())}const q=function(){return{width:"50px"}};function V(l,s){if(1&l&&(t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t.qZA(),t.TgZ(5,"td",16),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",19),t._uU(9),t.qZA(),t.TgZ(10,"td",16),t._uU(11),t.qZA(),t.TgZ(12,"td",20)(13,"div",21),t._uU(14),t.qZA()(),t.TgZ(15,"td",22),t._UZ(16,"p-tag",23),t.qZA(),t.TgZ(17,"td",24),t._UZ(18,"app-indicator-tooltip",25),t.qZA(),t.TgZ(19,"td",26),t._UZ(20,"app-task-status",27),t.qZA(),t.TgZ(21,"td",16),t._UZ(22,"app-btn-action",28),t.qZA()()),2&l){const u=s.$implicit,o=s.rowIndex,E=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.DdM(19,q)),t.xp6(1),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",null==u?null:u.docYear," "),t.xp6(2),t.hij(" ",t.xi3(7,16,null==u?null:u.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(2),t.Q6J("pTooltip",E.utilService.getFullName(null==u?null:u.creator)),t.xp6(1),t.hij("",null==u||null==u.creator?null:u.creator.firstName," "),t.xp6(2),t.hij(" ",null==u||null==u.planSub?null:u.planSub.id," "),t.xp6(1),t.Q6J("pTooltip",(null==u||null==u.planSub||null==u.planSub.taskSubject?null:u.planSub.taskSubject.length)>25?null==u||null==u.planSub?null:u.planSub.taskSubject:null),t.xp6(2),t.hij(" ",null==u||null==u.planSub?null:u.planSub.taskSubject," "),t.xp6(2),t.Akn(t.DdM(20,q)),t.Q6J("value",(null==u||null==u.planSub?null:u.planSub.taskWeight)+"%")("rounded",!0),t.xp6(2),t.Q6J("item",null==u?null:u.planSub),t.xp6(2),t.Q6J("taskStatus",null==u?null:u.status),t.xp6(2),t.Q6J("workflow",u)}}function tt(l,s){1&l&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99"),t.qZA()())}const nt=function(){return[25,50,100]},ut=[{path:"",component:(()=>{class l{constructor(u,o,E,c,p,Z,y){this.filter=u,this.utilService=o,this.fb=E,this.cdr=c,this.dialogRef=p,this.wfStaffService=Z,this.helperService=y,this.workflows=[],this.filterFields=["planSub.id","planSub.taskSubject","creator.firstName"],this.screenHeight=0,this.destroy$=new h.x,this.formGroup=this.fb.formGroup(new d.U)}ngOnInit(){this.wfStaffService.items$.pipe((0,B.R)(this.destroy$)).subscribe(u=>{this.workflows=u,this.cdr.markForCheck()}),this.checkScreenSize()}onResize(u){this.checkScreenSize()}checkScreenSize(){this.screenHeight=Math.floor(.6*window.innerHeight),this.cdr.detectChanges()}onSelectedYear(u){if(u.getFullYear()&&u.getFullYear()){const c=u.getFullYear();this.helperService.getTaskIn(c).subscribe()}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef?.close()}}return l.\u0275fac=function(u){return new(u||l)(t.Y36(x.i),t.Y36(w.F),t.Y36(S.GW),t.Y36(t.sBO),t.Y36(m.E7),t.Y36(v.K),t.Y36(T.N))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-plan-sub-in-hq"]],hostBindings:function(u,o){1&u&&t.NdJ("resize",function(c){return o.onResize(c)},!1,t.Jf7)},decls:18,vars:10,consts:[[1,"p-grid","mt-4"],[1,"p-col-12"],[1,"flex","align-items-center","justify-content-between"],[1,"flex","align-items-center"],[1,"text-2xl","font-semibold","ml-2"],[3,"formGroup"],[3,"yearSelected"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","\u0e84\u0ebb\u0ec9\u0e99\u0eab\u0eb2..",3,"input"],["scrollHeight","550px","styleClass","p-datatable-sm","currentPageReportTemplate","\u0eaa\u0eb0\u0ec1\u0e94\u0e87 {first} \u0ec0\u0e96\u0eb4\u0e87 {last} \u0e88\u0eb2\u0e81\u0e97\u0eb1\u0e87\u0edd\u0ebb\u0e94 {totalRecords} \u0ea5\u0eb2\u0e8d\u0e81\u0eb2\u0e99",3,"value","rows","paginator","globalFilterFields","rowHover","scrollable","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"text-center"],[1,"white-space-nowrap","text-center"],[1,"white-space-nowrap"],[1,"text-center",3,"ngStyle"],["tooltipPosition","bottom",1,"white-space-nowrap",3,"pTooltip"],["tooltipPosition","bottom","tooltipStyleClass","custom-tooltip",3,"pTooltip"],[1,"max-w-15rem","xl:max-w-30rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"text-center","white-space-nowrap","font-semibold"],["severity","success",3,"value","rounded"],[1,"cursor-pointer"],[3,"item"],[1,"text-center","white-space-nowrap"],[3,"taskStatus"],[3,"workflow"],["colspan","9",1,"text-center","py-4"]],template:function(u,o){if(1&u){const E=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5,"\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d\u0ec1\u0e9c\u0e99\u0eaa\u0eb9\u0ec9\u0e8a\u0ebb\u0e99\u0e97\u0eb5\u0ec8\u0e97\u0ec8\u0eb2\u0e99\u0ec4\u0e94\u0ec9\u0eae\u0eb1\u0e9a\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d"),t.qZA()(),t.TgZ(6,"div",3)(7,"form",5)(8,"app-year-picker",6),t.NdJ("yearSelected",function(p){return o.onSelectedYear(p)}),t.qZA()(),t.TgZ(9,"span",7),t._UZ(10,"i",8),t.TgZ(11,"input",9),t.NdJ("input",function(p){t.CHM(E);const Z=t.MAs(14);return t.KtG(o.filter.dataTable(Z,p))}),t.qZA()()()(),t._UZ(12,"hr"),t.TgZ(13,"p-table",10,11),t.YNc(15,X,21,0,"ng-template",12),t.YNc(16,V,23,21,"ng-template",13),t.YNc(17,tt,3,0,"ng-template",14),t.qZA()()()}2&u&&(t.xp6(7),t.Q6J("formGroup",o.formGroup),t.xp6(6),t.Q6J("value",o.workflows)("rows",25)("paginator",!0)("globalFilterFields",o.filterFields)("rowHover",!0)("scrollable",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(9,nt)))},dependencies:[n.PC,C._Y,C.JL,C.sg,S.VP,I.iA,_.jx,a.o,r.V,e.u,D.m,H.O,P.h,$,n.uU],encapsulation:2}),l})(),resolve:{data:(()=>{class l{constructor(u,o){this.helperService=u,this.userService=o,this.user=this.userService.getLoggedUser()}resolve(u,o){const E=(new Date).getFullYear();return this.helperService.getTaskIn(E)}}return l.\u0275fac=function(u){return new(u||l)(t.LFG(T.N),t.LFG(Y.K))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}];let et=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[f.Bz.forChild(ut),f.Bz]}),l})();var it=i(4466),lt=i(9761),ot=i(9981),at=i(3054),st=i(8639),rt=i(585),Et=i(1493),ct=i(2946),dt=i(613),pt=i(2448),mt=i(3241),ft=i(1291),gt=i(6749),At=i(1979),ht=i(9615);let Bt=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({providers:[m.E7,m.xA],imports:[n.ez,et,it.m,I.U$,a.j,at.A,r.W,Et.S,e.z,st.TX,ct.L,rt._8,dt.cc,Q.l,At.p,gt.g,mt.$,pt.q,lt.P,ot.o,ft.r,ht.E]}),l})()}}]);