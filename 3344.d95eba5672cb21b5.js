"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[3344],{3344:(Jt,C,i)=>{i.r(C),i.d(C,{EvalTaskAssignModule:()=>wt});var r=i(6895),y=i(5675),U=i(7579),S=i(2722),t=i(8274),p=i(6922),P=i(8145),d=i(4325),D=i(1094),_=i(6832),m=i(793),b=i(805),h=i(3608),O=i(3948),E=i(2156),w=i(7489),f=i(6522),q=i(1884),g=i(4090),z=i(9737),F=i(704),L=i(841),V=i(1481),c=i(433),v=i(5593),A=i(6679),B=i(2946),k=i(3054),Z=i(7147),K=i(3609),W=i(8739),X=i(904);function tt(n,s){1&n&&(t.TgZ(0,"span",8),t._uU(1,"\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99\u0e82\u0ead\u0e87 (\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81)"),t.qZA())}const et=function(n){return{"background-color":n}};function nt(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",10)(2,"label",21),t._uU(3,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",22)(7,"div")(8,"label",8),t._uU(9,"\u0ea5\u0eb3\u0e94\u0eb1\u0e9a\u0e84\u0ea7\u0eb2\u0ea1\u0eaa\u0eb3\u0e84\u0eb1\u0e99:"),t.qZA()(),t._UZ(10,"p-tag",23),t.qZA(),t.BQk()),2&n){const e=s.ngIf,o=t.oxw().ngIf;t.xp6(5),t.Oqu(null==o?null:o.taskSubject),t.xp6(5),t.Akn(t.VKq(5,et,null==e||null==e.priority?null:e.priority.color)),t.Q6J("value",null==e||null==e.priority?null:e.priority.name)("rounded",!0)}}function it(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"p-chip",27),t.NdJ("click",function(){const l=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.showPreviewFromUrl(null==l?null:l.filePath))}),t._UZ(1,"i",28),t.TgZ(2,"span",29),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(3),t.hij("",null==e?null:e.fileName," ")}}function ot(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",10)(2,"label",9),t._uU(3,"\u0ec0\u0ead\u0e81\u0eb0\u0eaa\u0eb2\u0e99\u0ec1\u0e99\u0e9a"),t.qZA(),t._UZ(4,"hr",24),t.TgZ(5,"div",25),t.YNc(6,it,4,1,"ng-template",26),t.qZA()(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(6),t.Q6J("ngForOf",e.attachments)}}function ut(n,s){1&n&&(t.TgZ(0,"span",8),t._uU(1,"\u0e81\u0eb2\u0e99\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0e82\u0ead\u0e87 (\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2)"),t.qZA())}function st(n,s){1&n&&(t.TgZ(0,"small",30),t._uU(1," *\u0e81\u0eb0\u0ea5\u0eb8\u0e99\u0eb2\u0e9b\u0ec9\u0ead\u0e99\u0e84\u0eb3\u0ec0\u0eab\u0eb1\u0e99\u0e82\u0ead\u0e87\u0e97\u0ec8\u0eb2\u0e99 "),t.qZA())}function lt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",1)(2,"div",2)(3,"p-fieldset",3),t.YNc(4,tt,2,0,"ng-template",4),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div")(9,"label",8),t._uU(10,"\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5:"),t.qZA()(),t.TgZ(11,"p"),t._uU(12),t.qZA()(),t.TgZ(13,"div")(14,"label",9),t._uU(15,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99:"),t.qZA(),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"div",10)(19,"label",9),t._uU(20,"\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99\u0ec2\u0e94\u0e8d:"),t.qZA(),t._uU(21),t.qZA(),t.YNc(22,nt,11,7,"ng-container",0),t.TgZ(23,"div",10)(24,"label",9),t._uU(25,"\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0e84\u0ea7\u0eb2\u0ea1\u0e84\u0eb7\u0e9a\u0edc\u0ec9\u0eb2"),t.qZA(),t._UZ(26,"div",11),t.qZA(),t.TgZ(27,"div")(28,"label",9),t._uU(29,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ec0\u0ea5\u0eb5\u0ec8\u0ea1\u0e9b\u0eb0\u0e95\u0eb4\u0e9a\u0eb1\u0e94:"),t.qZA(),t._uU(30),t.ALo(31,"date"),t.qZA(),t.TgZ(32,"div",10)(33,"label",9),t._uU(34,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94:"),t.qZA(),t._uU(35),t.ALo(36,"date"),t.qZA(),t.TgZ(37,"div",10),t._UZ(38,"app-indicator-detail",12),t.qZA(),t.YNc(39,ot,7,1,"ng-container",0),t.qZA()()()(),t.TgZ(40,"p-fieldset",13),t.YNc(41,ut,2,0,"ng-template",4),t._UZ(42,"app-score-option",14),t.qZA(),t.TgZ(43,"div",15)(44,"textarea",16),t._uU(45,"                "),t.qZA(),t.YNc(46,st,2,0,"small",17),t.qZA()(),t.TgZ(47,"div",18)(48,"p-button",19),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.closeDialog())}),t.qZA(),t.TgZ(49,"p-button",20),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.onSubmit())}),t.qZA()(),t.BQk()}if(2&n){const e=s.ngIf,o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.formGroup),t.xp6(2),t.Q6J("toggleable",!0),t.xp6(9),t.Oqu(null==e?null:e.docYear),t.xp6(4),t.hij(" ",t.xi3(17,22,null==e?null:e.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(5),t.AsE(" ",null==e||null==e.staff?null:e.staff.firstName," ",null==e||null==e.staff?null:e.staff.lastName," "),t.xp6(1),t.Q6J("ngIf",null==e?null:e.task),t.xp6(4),t.Q6J("innerHTML",o.transform(null==e?null:e.reportDetail),t.oJD),t.xp6(4),t.hij(" ",t.xi3(31,25,null==e?null:e.scheduledStart,"dd/MM/yyyy")," "),t.xp6(5),t.hij(" ",t.xi3(36,28,null==e?null:e.scheduledEnd,"dd/MM/yyyy HH:mm")," "),t.xp6(3),t.Q6J("item",e)("isHead",!0),t.xp6(1),t.Q6J("ngIf",e.attachments&&e.attachments.length),t.xp6(1),t.Q6J("toggleable",!0),t.xp6(2),t.Q6J("item",e)("isHead",!0)("submitted",o.submitted),t.xp6(2),t.Q6J("autoResize",!0),t.xp6(2),t.Q6J("ngIf",o.submitted&&o.controls.comment.errors),t.xp6(2),t.Q6J("disabled",o.formGroup.disabled),t.xp6(1),t.Q6J("loading",o.formGroup.disabled)("disabled",o.formGroup.disabled)}}function at(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-file-preview",31),t.NdJ("closePreview",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.closeImgPreview())}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("selectedFileOrUrl",e.fileSrc)}}let rt=(()=>{class n{constructor(e,o,u,l,a,T,Ft,kt,It){this.fb=e,this.alertService=o,this.formService=u,this.dialogConfig=l,this.dialogRef=a,this.sanitizer=T,this.headEvalService=Ft,this.cdr=kt,this.utilService=It,this.submitted=!1,this.visiblePreview=!1,this.destroy$=new U.x,this.formGroup=this.fb.formGroup(new z.t),E.jc.set(this.formService.validationMessages)}get controls(){return this.formGroup.controls}ngOnInit(){this.subscribeData()}getDetail(e){if(e){const u=f._.getDetail({id:e});this.headEvalService.getOne(u).subscribe()}}dataAnalyzing(){if(this.formGroup.patchValue({taskWfId:this.evaluation?.taskWfId}),this.taskMain=this.evaluation?.task,this.taskMain){const e=this.getRelevantIndicators();this.setIndicatorValidators(e),this.cdr.markForCheck()}console.log(this.formGroup.value)}getRelevantIndicators(){const o=w.pick(this.evaluation,["selfTimeScore","selfQuantityScore","selfQualityScore","selfSatisfiedScore"]);return w.pickBy(o,u=>null!=u&&""!==u&&0!=+u)}setIndicatorValidators(e){Object.entries(e).forEach(([o,u])=>{const l=g.qu.head[o],a=this.formGroup.get(l);a&&(this.formGroup.patchValue({[l]:l!==g.qu.head[o]?0:null}),a.setValidators([E.CM.required()]),a.updateValueAndValidity())})}subscribeData(){this.docId=this.dialogConfig.data.data,this.getDetail(this.docId),this.headEvalService.item$.pipe((0,S.R)(this.destroy$),(0,q.x)()).subscribe(e=>{this.evaluation=e,e&&this.dataAnalyzing(),this.cdr.markForCheck()})}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}onSubmit(){if(this.submitted=!0,this.formGroup.invalid)return;const e=this.evaluation?.id,o=this.formGroup.value;this.formGroup.disable(),console.log(o),this.headEvalService.updateAndRemove(+e,o).subscribe({next:u=>{u&&(this.closeDialog(),this.alertService.showSuccess("\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0eae\u0ebd\u0e9a\u0eae\u0ec9\u0ead\u0e8d\u0ec1\u0ea5\u0ec9\u0ea7"))},error:u=>{this.formGroup.enable(),this.alertService.showError(u)}})}closeDialog(){this.submitted=!1,this.formGroup.reset(),this.formGroup.enable(),this.dialogRef?.close()}showPreviewFromUrl(e){e&&(this.utilService.isValidUrl(e)?(this.fileSrc=e,this.visiblePreview=!0):this.alertService.showDanger("\u0eae\u0eb9\u0e9a\u0ec1\u0e9a\u0e9a\u0e97\u0eb5\u0ec8\u0ea2\u0eb9\u0ec8\u0e82\u0ead\u0e87\u0ec4\u0e9f\u0ea5\u0ecc\u0e9a\u0ecd\u0ec8\u0e96\u0eb7\u0e81\u0e95\u0ec9\u0ead\u0e87!"))}closeImgPreview(){this.visiblePreview=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef?.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(E.GW),t.Y36(F.c),t.Y36(L.k),t.Y36(d.S),t.Y36(d.E7),t.Y36(V.H7),t.Y36(p.r),t.Y36(t.sBO),t.Y36(D.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-evalution-form"]],decls:3,vars:2,consts:[[4,"ngIf"],[3,"formGroup"],[1,"mb-4"],[3,"toggleable"],["pTemplate","header"],[1,"formgrid","grid","p-fluid"],[1,"col-12"],[1,"flex","align-items-center","gap-2"],[1,"font-semibold","text-xl"],[1,"font-semibold","text-xl","mb-0"],[1,"field"],[3,"innerHTML"],[3,"item","isHead"],["styleClass","mb-3",3,"toggleable"],[3,"item","isHead","submitted"],[1,""],["id","comment","rows","2","cols","30","pInputTextarea","","formControlName","comment","placeholder","\u0e84\u0eb3\u0ec0\u0eab\u0eb1\u0e99\u0e82\u0ead\u0e87\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2",1,"w-full",3,"autoResize"],["class","p-error",4,"ngIf"],[1,"text-right","sticky","bottom-0","mt-5"],["label","\u0e8d\u0ebb\u0e81\u0ec0\u0ea5\u0eb5\u0e81","icon","pi pi-times","styleClass","p-button-outlined mr-2",3,"disabled","click"],["label","\u0e9a\u0eb1\u0e99\u0e97\u0eb6\u0e81","icon","pi pi-check",3,"loading","disabled","click"],["for","address",1,"font-semibold","text-xl","mb-0"],[1,"field","flex","align-items-center","gap-2"],["styleClass","px-4",3,"value","rounded"],[1,"mt-0"],[1,"flex","gap-2"],["ngFor","",3,"ngForOf"],["styleClass","cursor-pointer",3,"click"],[1,"pi","pi-paperclip","mr-2","text-green-500"],[1,"w-8rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"p-error"],[3,"selectedFileOrUrl","closePreview"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,lt,50,31,"ng-container",0),t.qZA(),t.YNc(2,at,2,1,"ng-container",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",o.evaluation),t.xp6(1),t.Q6J("ngIf",o.visiblePreview))},dependencies:[r.sg,r.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,E.bc,E.VP,E.YE,b.jx,v.zx,A.V,B.p,k.g,Z.A,K.Q,W.Q,X.M,r.uU],encapsulation:2,changeDetection:0}),n})();var Et=i(209),ct=i(5442),dt=i(6915),x=i(605);let pt=(()=>{class n{constructor(e,o,u,l){this.dialogRef=e,this.dialogService=o,this.headEvalService=u,this.alertService=l,this.menuItems=[],this.dialogConfig={width:window.innerWidth>Et.A.lg?"65%":"80%",contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0}}ngOnInit(){}setActionMenus(){const e=this.task?.isLock;this.menuItems=[],e||(this.menuItems=[{label:"\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99",icon:"pi pi-fw pi-check",command:()=>this.onEvaluation(this.task?.id)},{label:"\u0e9a\u0ecd\u0ec8\u0ec0\u0eab\u0eb1\u0e99\u0e94\u0eb5",icon:"pi pi-fw pi-times",command:()=>this.onReject(this.task?.id)}])}showDetail(){if(this.task){const o=f._.getDetail({id:this.task?.id});this.headEvalService.getOne(o).subscribe({next:u=>{u?.data&&(this.dialogRef=this.dialogService.open(ct.z,{header:`\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 #${this.task?.id}`,data:{data:u.data},...this.dialogConfig}))},error:u=>{this.alertService.showError(u)}})}}onEvaluation(e){e&&(this.dialogRef=this.dialogService.open(rt,{header:`\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 \u0ec1\u0ea5\u0eb0 \u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81 #${e}`,data:{data:e},...this.dialogConfig}))}onReject(e){this.dialogRef=this.dialogService.open(dt.r,{header:`\u0e9a\u0ecd\u0ec0\u0eab\u0eb1\u0e99\u0e94\u0eb5\u0e95\u0eb2\u0ea1\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 (Reject) #${e}`,data:{data:{id:e,taskType:g.UA.ASSIGN}},...this.dialogConfig})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.E7),t.Y36(d.xA),t.Y36(p.r),t.Y36(F.c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-btn-action"]],inputs:{task:"task"},decls:1,vars:1,consts:[["appendTo","body","label","\u0ec0\u0e9a\u0eb4\u0ec8\u0e87\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94","styleClass","p-button-secondary p-button-sm",3,"model","onClick","onDropdownClick"]],template:function(e,o){1&e&&(t.TgZ(0,"p-splitButton",0),t.NdJ("onClick",function(){return o.showDetail()})("onDropdownClick",function(){return o.setActionMenus()}),t.qZA()),2&e&&t.Q6J("model",o.menuItems)},dependencies:[x.a],encapsulation:2}),n})();function mt(n,s){1&n&&(t.TgZ(0,"tr")(1,"th",8),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th",8),t._uU(4,"\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5"),t.qZA(),t.TgZ(5,"th",8),t._uU(6,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(7,"th",8),t._uU(8,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94 "),t._UZ(9,"br"),t._uU(10," \u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(11,"th",8),t._uU(12,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94 "),t._UZ(13,"br"),t._uU(14," \u0ea7\u0ebd\u0e81"),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(17,"th",10),t._uU(18,"\u0e81\u0eb2\u0e99\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0e82\u0ead\u0e87 (\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81)"),t.qZA(),t.TgZ(19,"th",11),t._uU(20,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0"),t.qZA(),t.TgZ(21,"th",11),t._uU(22,"\u0e94\u0eb3\u0ec0\u0e99\u0eb5\u0e99\u0e81\u0eb2\u0e99"),t.qZA()(),t.TgZ(23,"tr")(24,"th",12)(25,"div",13)(26,"small"),t._uU(27,"\u0ec0\u0ea7\u0ea5\u0eb2"),t.qZA()()(),t.TgZ(28,"th",12)(29,"div",13)(30,"small"),t._uU(31,"\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),t.qZA()()(),t.TgZ(32,"th",12)(33,"div",13)(34,"small"),t._uU(35,"\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),t.qZA()()(),t.TgZ(36,"th",12)(37,"div",13)(38,"small"),t._uU(39,"\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),t.qZA()()()())}function gt(n,s){if(1&n&&(t.TgZ(0,"tr",14)(1,"td",15)(2,"div",16),t._uU(3),t.qZA()()()),2&n){const e=s.$implicit;t.xp6(3),t.lnq(" [",null==e||null==e.staff?null:e.staff.staffCode,"]-",null==e||null==e.staff?null:e.staff.firstName," ",null==e||null==e.staff?null:e.staff.lastName," ")}}const ht=function(){return{width:"50px"}};function ft(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",18),t._uU(4),t.qZA(),t.TgZ(5,"td",18),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",18),t._uU(9),t.qZA(),t.TgZ(10,"td",18),t._uU(11),t.qZA(),t.TgZ(12,"td",19)(13,"div",20),t._uU(14),t.qZA()(),t.TgZ(15,"td",21),t._uU(16),t.qZA(),t.TgZ(17,"td",21),t._uU(18),t.qZA(),t.TgZ(19,"td",21),t._uU(20),t.qZA(),t.TgZ(21,"td",21),t._uU(22),t.qZA(),t.TgZ(23,"td",12),t._UZ(24,"app-task-status",22),t.qZA(),t.TgZ(25,"td",18),t._UZ(26,"app-btn-action",23),t.qZA()()),2&n){const e=s.$implicit,o=s.rowIndex,u=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.DdM(17,ht)),t.xp6(1),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",null==e?null:e.docYear," "),t.xp6(2),t.hij(" ",t.xi3(7,14,null==e?null:e.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(3),t.hij(" ",null==e?null:e.id," "),t.xp6(2),t.hij(" ",null==e?null:e.taskId," "),t.xp6(1),t.Q6J("pTooltip",u.utilService.getTooltip(null==e?null:e.taskSubject,25)),t.xp6(2),t.hij(" ",null==e?null:e.taskSubject," "),t.xp6(2),t.Oqu(null==e?null:e.selfTimeScore),t.xp6(2),t.Oqu(null==e?null:e.selfQuantityScore),t.xp6(2),t.Oqu(null==e?null:e.selfQualityScore),t.xp6(2),t.Oqu(null==e?null:e.selfSatisfiedScore),t.xp6(2),t.Q6J("taskStatus",null==e?null:e.status),t.xp6(2),t.Q6J("task",e)}}function vt(n,s){1&n&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2,"\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99"),t.qZA()())}const At=function(){return[25,50,100]};let Bt=(()=>{class n{constructor(e,o,u,l,a,T){this.cdr=e,this.headEvalService=o,this.menuService=u,this.dialogRef=l,this.utilService=a,this.filter=T,this.tasks=[],this.filterFields=["id","subject"],this.screenHeight=0,this.text="",this.showMenu$=this.menuService.menuState$,this.destroy$=new U.x}ngOnInit(){this.headEvalService.items$.pipe((0,S.R)(this.destroy$)).subscribe(e=>{this.tasks=e,this.cdr.markForCheck()}),this.checkScreenSize()}onResize(e){this.checkScreenSize()}checkScreenSize(){this.screenHeight=Math.floor(.6*window.innerHeight),this.cdr.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef&&this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(p.r),t.Y36(P.h),t.Y36(d.E7),t.Y36(D.F),t.Y36(_.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-eval-task-assign"]],hostBindings:function(e,o){1&e&&t.NdJ("resize",function(l){return o.onResize(l)},!1,t.Jf7)},decls:8,vars:10,consts:[[1,"p-grid"],[1,"p-col-12"],["responsiveLayout","scroll","styleClass","p-datatable-sm mt-4","rowGroupMode","subheader","groupRowsBy","staff.staffCode","dataKey","id","currentPageReportTemplate","\u0eaa\u0eb0\u0ec1\u0e94\u0e87 {first} \u0ec0\u0e96\u0eb4\u0e87 {last} \u0e88\u0eb2\u0e81\u0e97\u0eb1\u0e87\u0edd\u0ebb\u0e94 {totalRecords} \u0ea5\u0eb2\u0e8d\u0e81\u0eb2\u0e99",3,"value","rows","paginator","globalFilterFields","rowHover","scrollable","scrollHeight","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","groupheader"],["pTemplate","body"],["pTemplate","emptymessage"],["rowspan","2",1,"white-space-nowrap","text-center"],["rowspan","2",1,"white-space-nowrap"],["colspan","4",1,"text-center","white-space-nowrap"],["rowspan","2",1,"text-center","white-space-nowrap"],[1,"text-center","white-space-nowrap"],[1,"-rotate-25"],["pRowGroupHeader",""],["colspan","12"],[1,"text-groupheader","font-semibold","text-xl"],[1,"text-center","white-space-nowrap",3,"ngStyle"],[1,"white-space-nowrap","text-center"],["tooltipPosition","bottom","tooltipStyleClass","custom-tooltip",3,"pTooltip"],[1,"max-w-15rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"text-center","white-space-nowrap","font-semibold"],[3,"taskStatus"],[3,"task"],["colspan","13",1,"text-center","py-4"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-table",2,3),t.YNc(4,mt,40,0,"ng-template",4),t.YNc(5,gt,4,3,"ng-template",5),t.YNc(6,ft,27,18,"ng-template",6),t.YNc(7,vt,3,0,"ng-template",7),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("value",o.tasks)("rows",25)("paginator",!0)("globalFilterFields",o.filterFields)("rowHover",!0)("scrollable",!0)("scrollHeight",o.screenHeight+"px")("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(9,At)))},dependencies:[r.PC,m.iA,b.jx,m.Z5,h.u,O.h,pt,r.uU],encapsulation:2,changeDetection:0}),n})();var Zt=i(8386);const xt=[{path:"",component:Bt,resolve:{data:(()=>{class n{constructor(e,o){this.headEvalService=e,this.userService=o,this.user=this.userService.getLoggedUser()}resolve(e,o){const u=this.user?.profile?.staffCode,l=Object.assign({headCode:u,statusId:g.hY.WAIT_HEAD_EVAL,isLock:!1,isActive:!0}),a=f._.getWaiting(l);return this.headEvalService.getMany(a)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(p.r),t.LFG(Zt.K))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}];let Tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[y.Bz.forChild(xt),y.Bz]}),n})();var Ct=i(4466),I=i(8639),J=i(585),Y=i(1989),M=i(5047),R=i(1740),H=i(613),yt=i(2448),Ut=i(3241),Q=i(1119),j=i(1889),G=i(8455),N=i(2008),$=i(4396),St=i(9981),Dt=i(8191),bt=i(9615);let wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[r.ez,Tt,Ct.m,m.U$,v.hJ,A.W,h.z,I.TX,H.cc,B.L,J._8,R.j,k.A,M.L$,N.l,Z.o,$.y,G.$,Y.nD,x.l,Q.H,j.P,yt.q,m.U$,v.hJ,A.W,h.z,I.TX,H.cc,B.L,J._8,R.j,M.L$,N.l,Z.o,$.y,G.$,Y.nD,x.l,Q.H,j.P,Ut.$,St.o,bt.E,Dt.P]}),n})()}}]);