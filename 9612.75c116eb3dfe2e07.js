"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[9612],{9612:(C,g,s)=>{s.r(g),s.d(g,{SettingPasswordModule:()=>z});var i=s(6895),E=s(5675),l=s(2156),h=s(655);class c{}(0,h.gn)([(0,l.C1)()],c.prototype,"currentPassword",void 0),(0,h.gn)([(0,l.C1)(),(0,l.Ei)({value:6})],c.prototype,"newPassword",void 0),(0,h.gn)([(0,l.C1)(),(0,l.qu)({fieldName:"newPassword"})],c.prototype,"confirmNewPassword",void 0);var t=s(8274),m=s(704),r=s(263),d=s(841),p=s(8145),u=s(433),v=s(1740),w=s(5593),P=s(2453);function S(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"p-button",19),t.NdJ("click",function(){t.CHM(o);const f=t.oxw();return t.KtG(f.menuService.showMenu())}),t.qZA()()}}function B(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"p-button",20),t.NdJ("click",function(){t.CHM(o);const f=t.oxw();return t.KtG(f.menuService.hideMenu())}),t.qZA()()}}function b(e,a){if(1&e&&(t.TgZ(0,"small",21),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" *",null==o.controls.currentPassword.errors||null==o.controls.currentPassword.errors.required?null:o.controls.currentPassword.errors.required.message," ")}}function A(e,a){if(1&e&&(t.TgZ(0,"small",21),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" *",null==o.controls.newPassword.errors||null==o.controls.newPassword.errors.required?null:o.controls.newPassword.errors.required.message," ")}}function T(e,a){if(1&e&&(t.TgZ(0,"small",21),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" *",null==o.controls.newPassword.errors||null==o.controls.newPassword.errors.minLength?null:o.controls.newPassword.errors.minLength.message," ")}}function x(e,a){if(1&e&&(t.TgZ(0,"small",21),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" *",null==o.controls.confirmNewPassword.errors||null==o.controls.confirmNewPassword.errors.compare?null:o.controls.confirmNewPassword.errors.compare.message," ")}}const M=[{path:"",component:(()=>{class e{constructor(o,n,f,G,J){this.alertService=o,this.fb=n,this.authService=f,this.formService=G,this.menuService=J,this.submitted=!1,this.showMenu$=this.menuService.menuState$,l.jc.set(this.formService.validationMessages)}get controls(){return this.formGroup.controls}ngOnInit(){const o=new c;this.formGroup=this.fb.formGroup(o)}onSubmit(){if(this.submitted=!0,this.formGroup.invalid)return;const o=this.formGroup.value;this.formGroup.disable(),this.authService.changePassword(o).subscribe({next:n=>{n&&(this.alertService.showSuccess("\u0e9b\u0ec8\u0ebd\u0e99\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0e9c\u0ec8\u0eb2\u0e99\u0eae\u0ebd\u0e9a\u0eae\u0ec9\u0ead\u0e8d\u0ec1\u0ea5\u0ec9\u0ea7"),this.submitted=!1,this.formGroup.reset(),this.formGroup.enable(),this.formGroup.markAsPristine())},error:n=>{this.formGroup.enable(),this.submitted=!1,this.alertService.unauthorized(n)}})}ngOnDestroy(){this.formGroup.reset()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.c),t.Y36(l.GW),t.Y36(r.e),t.Y36(d.k),t.Y36(p.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-setting-password"]],decls:33,vars:13,consts:[[1,"grid"],[1,"col-12","mx-auto"],[1,"card"],[1,"flex","alig","\\-items-center"],[4,"ngIf"],[1,"text-2xl","font-semibold"],["autocomplete","off","enctype","multipart/form-data",3,"formGroup"],["hidden","","autocomplete","username","name","username","type","text","value",""],[1,"grid","formgrid","p-fluid"],[1,"mb-4","field","col-12"],["for","currentPassword",1,"font-medium","mb-0"],["class","p-error",4,"ngIf"],["id","currentPassword","type","password","pInputText","","formControlName","currentPassword","autocomplete","current-password"],["for","newPassword",1,"font-medium","mb-0"],["id","newPassword","type","password","pInputText","","formControlName","newPassword","autocomplete","new-password"],["for","confirmNewPassword",1,"font-medium","mb-0"],["id","confirmNewPassword","type","password","pInputText","","formControlName","confirmNewPassword","autocomplete","new-password"],[1,"col-12","text-right","mt-2"],["pButton","","pRipple","","label","\u0e9b\u0ec8\u0ebd\u0e99\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0e9c\u0ec8\u0eb2\u0e99","icon","pi pi-check",1,"w-full","sm:w-auto",3,"loading","disabled","click"],["icon","pi pi-chevron-right","styleClass","p-button-outlined p-button-sm mr-2",3,"click"],["icon","pi pi-chevron-left","styleClass","p-button-outlined p-button-sm mr-2",3,"click"],[1,"p-error"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,S,2,0,"div",4),t.ALo(5,"async"),t.YNc(6,B,2,0,"div",4),t.ALo(7,"async"),t.TgZ(8,"span",5),t._uU(9,"\u0e95\u0eb1\u0ec9\u0e87\u0e84\u0ec8\u0eb2\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0e9c\u0ec8\u0eb2\u0e99"),t.qZA()(),t._UZ(10,"hr"),t.TgZ(11,"form",6),t._UZ(12,"input",7),t.TgZ(13,"div",8)(14,"div",9)(15,"label",10),t._uU(16,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0e9c\u0ec8\u0eb2\u0e99\u0e9b\u0eb1\u0e94\u0e88\u0eb8\u0e9a\u0eb1\u0e99 "),t.YNc(17,b,2,1,"small",11),t.qZA(),t._UZ(18,"input",12),t.qZA(),t.TgZ(19,"div",9)(20,"label",13),t._uU(21,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0e9c\u0ec8\u0eb2\u0e99\u0ec3\u0edd\u0ec8 "),t.YNc(22,A,2,1,"small",11),t.YNc(23,T,2,1,"small",11),t.qZA(),t._UZ(24,"input",14),t.qZA(),t.TgZ(25,"div",9)(26,"label",15),t._uU(27,"\u0ea2\u0eb7\u0e99\u0ea2\u0eb1\u0e99\u0ea5\u0eb0\u0eab\u0eb1\u0e94\u0e9c\u0ec8\u0eb2\u0e99\u0ec3\u0edd\u0ec8 "),t.YNc(28,x,2,1,"small",11),t.qZA(),t._UZ(29,"input",16),t.qZA(),t.TgZ(30,"div",17)(31,"button",18),t.NdJ("click",function(){return n.onSubmit()}),t.qZA()()()()()()(),t._UZ(32,"p-toast")),2&o&&(t.xp6(4),t.Q6J("ngIf",!t.lcZ(5,9,n.showMenu$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,11,n.showMenu$)),t.xp6(5),t.Q6J("formGroup",n.formGroup),t.xp6(6),t.Q6J("ngIf",n.submitted&&(null==n.controls.currentPassword.errors?null:n.controls.currentPassword.errors.required)),t.xp6(5),t.Q6J("ngIf",n.submitted&&(null==n.controls.newPassword.errors?null:n.controls.newPassword.errors.required)),t.xp6(1),t.Q6J("ngIf",n.submitted&&(null==n.controls.newPassword.errors?null:n.controls.newPassword.errors.minLength)),t.xp6(5),t.Q6J("ngIf",n.submitted&&(null==n.controls.confirmNewPassword||null==n.controls.confirmNewPassword.errors?null:n.controls.confirmNewPassword.errors.compare)),t.xp6(3),t.Q6J("loading",n.formGroup.disabled)("disabled",n.formGroup.disabled))},dependencies:[i.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,l.bc,l.VP,l.YE,v.o,w.Hq,w.zx,P.FN,i.Ov],encapsulation:2}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[E.Bz.forChild(M),E.Bz]}),e})();var y=s(4466),I=s(666),N=s(3054),_=s(1167);let z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[i.ez,Z,y.m,v.j,N.A,I.kW,w.hJ,_.KZ,P.EV]}),e})()},3054:(C,g,s)=>{s.d(g,{A:()=>c,g:()=>h});var i=s(8274),E=s(6895),l=s(433);let h=(()=>{class t{constructor(r,d,p,u){this.el=r,this.ngModel=d,this.control=p,this.cd=u,this.onResize=new i.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(r){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(r){this.autoResize&&this.resize(r)}onBlur(r){this.autoResize&&this.resize(r)}resize(r){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(r||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(i.Y36(i.SBq),i.Y36(l.On,8),i.Y36(l.a5,8),i.Y36(i.sBO))},t.\u0275dir=i.lG2({type:t,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(r,d){1&r&&i.NdJ("input",function(u){return d.onInput(u)})("focus",function(u){return d.onFocus(u)})("blur",function(u){return d.onBlur(u)}),2&r&&i.ekj("p-filled",d.filled)("p-inputtextarea-resizable",d.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),t})(),c=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[E.ez]}),t})()}}]);