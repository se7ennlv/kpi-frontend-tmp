"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[4e3],{4090:(I,v,e)=>{e.d(v,{UA:()=>c,YZ:()=>m,hY:()=>u,qu:()=>d});let u=(()=>{class s{}return s.WAIT_DEPT_APPR=1,s.DEPT_APPREVED=2,s.WAIT_PICK_JOB=3,s.IN_PROGRESS=4,s.FORWARD=5,s.WAIT_REPORT=6,s.WAIT_HEAD_EVAL=7,s.EVALUATED=8,s.CLOSED=9,s.REJECTED=10,s.MD_APPREVED=11,s.CANCELED=12,s.ON_HOLD=13,s})(),c=(()=>{class s{}return s.PLAN="PLAN",s.ASSIGN="ASSIGN",s.DESCRIPTION="DESC",s})(),d=(()=>{class s{}return s.self={indicatorTime:"selfTimeScore",indicatorQuantity:"selfQuantityScore",indicatorQuality:"selfQualityScore",indicatorSatisfied:"selfSatisfiedScore"},s.head={selfTimeScore:"headTimeScore",selfQuantityScore:"headQuantityScore",selfQualityScore:"headQualityScore",selfSatisfiedScore:"headSatisfiedScore"},s})(),m=(()=>{class s{}return s.TIME_SCORES=[{id:"t1",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:1,severity:"danger"},{id:"t2",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:2,severity:"warning"},{id:"t3",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:3,severity:"info"},{id:"t4",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:4,severity:""},{id:"t5",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:5,severity:"success"}],s.QUANTITY_SCORES=[{id:"qty1",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:1,severity:"danger"},{id:"qty2",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:2,severity:"warning"},{id:"qty3",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:3,severity:"info"},{id:"qty4",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:4,severity:""},{id:"qty5",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:5,severity:"success"}],s.QUALITY_SCORES=[{id:"qlt1",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:1,severity:"danger"},{id:"qlt2",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:2,severity:"warning"},{id:"qlt3",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:3,severity:"info"},{id:"qlt4",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:4,severity:""},{id:"qlt5",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:5,severity:"success"}],s.SATISFIED_SCORES=[{id:"s1",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:1,severity:"danger"},{id:"s2",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:2,severity:"warning"},{id:"s3",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:3,severity:"info"},{id:"s4",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:4,severity:""},{id:"s5",label:"\u0e84\u0eb0\u0ec1\u0e99\u0e99",score:5,severity:"success"}],s.MAX_SCORES=5,s})()},6522:(I,v,e)=>{e.d(v,{_:()=>u});class u{static getWaiting(d,m=!0){let s=["main.id","main.docYear","main.taskId","main.taskSubject","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.selfCode","main.createdAt","main.isLock","staff.staffCode","staff.firstName","staff.lastName","status.icon","status.name","status.color"];return m&&s.push("main.taskWfId"),{query:{fields:s,joins:["staff","status"],filters:d,getType:"MANY"}}}static getMany(d){return{query:{fields:["main.docYear","main.id","main.taskId","main.taskSubject","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.headTimeScore","main.headQuantityScore","main.headQualityScore","main.headSatisfiedScore","main.selfCode","main.createdAt","main.headActionAt","main.isLock","staff.staffCode","staff.firstName","staff.lastName","status.icon","status.name","status.color"],joins:["staff","status"],filters:d,getType:"MANY"}}}static getDetail(d,m=!0){const s=["main.docYear","main.id","main.taskId","main.taskSubject","main.reportDetail","main.scheduledStart","main.scheduledEnd","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.selfCode","main.headTimeScore","main.headQuantityScore","main.headQualityScore","main.headSatisfiedScore","main.createdAt","main.headActionAt","main.comment","task.indicatorTime","task.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","priority.name","priority.color","priority.score","staff.staffCode","staff.firstName","staff.lastName","head.staffCode","head.firstName","head.lastName","status.icon","status.name","status.color","attached.fileName","attached.filePath"];return m&&s.push("main.taskWfId"),{query:{fields:s,joins:["task","iq","is","priority","staff","head","status","attached"],filters:d,getType:"ONE"}}}static getPlanSubDetail(d){return{query:{fields:["main.id","main.docYear","main.taskWfId","main.taskId","main.taskSubject","main.reportDetail","main.scheduledStart","main.scheduledEnd","main.selfTimeScore","main.selfQuantityScore","main.selfQualityScore","main.selfSatisfiedScore","main.selfCode","main.headTimeScore","main.headQuantityScore","main.headQualityScore","main.headSatisfiedScore","main.createdAt","main.headActionAt","main.comment","task.indicatorTime","task.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","staff.staffCode","staff.firstName","staff.lastName","head.staffCode","head.firstName","head.lastName","status.icon","status.name","status.color","attached.fileName","attached.filePath"],joins:["task","iq","is","staff","head","status","attached"],filters:d,getType:"ONE"}}}}},9169:(I,v,e)=>{e.d(v,{N:()=>g});var u=e(1135),c=e(8505),d=e(4004),m=e(2340),s=e(8274),f=e(529);let g=(()=>{class o{constructor(t){this.http=t,this.apiUrl=`${m.N.apiUrl}/v1/plan-sub-evaluations`,this.item=new u.X(null),this.item$=this.item.asObservable(),this.items=new u.X([]),this.items$=this.items.asObservable()}getOne(t){return this.http.post(`${this.apiUrl}/find`,t).pipe((0,c.b)(a=>{200===a?.statusCode&&a?.data&&this.item.next(a.data)}))}getMany(t){return this.http.post(`${this.apiUrl}/find`,t).pipe((0,c.b)(a=>{200===a?.statusCode&&a?.data&&this.items.next(a.data)}))}update(t,r){return this.http.patch(`${this.apiUrl}/head/${t}`,r).pipe((0,d.U)(l=>{if(200===l?.statusCode&&l?.data){const y=this.items.getValue().map(p=>p.id===t?{...p,...r}:p);return this.items.next(y),!0}return!1}))}updateAndRemove(t,r){return this.http.patch(`${this.apiUrl}/head/${t}`,r).pipe((0,c.b)(l=>{200===l?.statusCode&&this.removeItemFromList(t)}))}removeItemFromList(t){const a=this.items.getValue().filter(l=>l?.id!==t);this.items.next(a)}}return o.\u0275fac=function(t){return new(t||o)(s.LFG(f.eN))},o.\u0275prov=s.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4e3:(I,v,e)=>{e.r(v),e.d(v,{HomeModule:()=>N});var u=e(6895),c=e(5593),d=e(3608),m=e(5675),s=e(7579),f=e(2722),g=e(4090),o=e(6522),S=e(2311),t=e(8274),r=e(8386),a=e(1135),l=e(8505),T=e(2340),y=e(529);let p=(()=>{class n{constructor(i){this.http=i,this.apiUrl=`${T.N.apiUrl}/v1/sys-modules`,this.items=new a.X([]),this.items$=this.items.asObservable()}getMany(i){return this.http.post(`${this.apiUrl}/find`,i).pipe((0,l.b)(A=>{200===A?.statusCode&&A?.data&&this.items.next(A.data)}))}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(y.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var P=e(9169),M=e(6922),D=e(830);function x(n,h){if(1&n&&(t.ynx(0),t._UZ(1,"img",14),t.BQk()),2&n){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("src","assets/images/svg/"+(null==i?null:i.icon),t.LSH)}}function U(n,h){if(1&n&&(t.ynx(0),t.TgZ(1,"div",7)(2,"p-button",8)(3,"div",9)(4,"div",10)(5,"div",11),t.YNc(6,x,2,1,"ng-container",0),t.qZA(),t.TgZ(7,"div",12)(8,"span",13),t._uU(9),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA()()()()()(),t.BQk()),2&n){const i=h.$implicit;t.xp6(2),t.Q6J("routerLink",null==i?null:i.routerLink),t.xp6(4),t.Q6J("ngIf",null==i?null:i.icon),t.xp6(3),t.Oqu(null==i?null:i.title),t.xp6(2),t.Oqu(null==i?null:i.subtitle)}}function b(n,h){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"i",2),t.TgZ(3,"span",3)(4,"span",4),t._uU(5,"\u0eaa\u0eb4\u0e94 \u0ec1\u0ea5\u0eb0 \u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0\u0e9c\u0eb9\u0ec9\u0ec3\u0e8a\u0ec9:"),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",5),t.YNc(9,U,12,4,"ng-container",6),t.qZA(),t.BQk()),2&n){const i=h.ngIf,E=t.oxw();t.xp6(7),t.Oqu(null==i?null:i.name),t.xp6(2),t.Q6J("ngForOf",E.modules)}}let R=(()=>{class n{constructor(i,E,A,O,C,_){this.userService=i,this.moduleService=E,this.planHeadEvalService=A,this.assignHeadEvalService=O,this.descHeadEvalService=C,this.cdr=_,this.modules=[],this.totalPending=0,this.totalPlanItems=0,this.totalAssignItems=0,this.totalDescItems=0,this.destroy$=new s.x}ngOnInit(){this.initializeUserData(),this.subscribeModuleService(),this.subscribePendingCounts()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeUserData(){this.user=this.userService.getLoggedUser(),this.userRole=this.user?.role}subscribeModuleService(){this.moduleService.items$.pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.modules=i,this.cdr.markForCheck()})}subscribePendingCounts(){this.planHeadEvalService.items$.pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.totalPlanItems=i?.length||0,this.updateTotalPending()}),this.assignHeadEvalService.items$.pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.totalAssignItems=i?.length||0,this.updateTotalPending()}),this.descHeadEvalService.items$.pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.totalDescItems=i?.length||0,this.updateTotalPending()})}fetchPendingItems(){const E={headCode:this.user?.profile?.staffCode,statusId:g.hY.WAIT_HEAD_EVAL,isLock:!1,isActive:!0};this.planHeadEvalService.getMany(S.Z.getWaiting(E)).subscribe(),this.assignHeadEvalService.getMany(o._.getWaiting(E)).subscribe(),this.descHeadEvalService.getMany(o._.getWaiting(E,!1)).subscribe()}updateTotalPending(){this.totalPending=this.totalPlanItems+this.totalAssignItems+this.totalDescItems,this.cdr.markForCheck()}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(r.K),t.Y36(p),t.Y36(P.N),t.Y36(M.r),t.Y36(D.P),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"flex","align-items-center","my-3"],[1,"pi","pi-user-edit","mr-2","text-indigo-500",2,"font-size","2rem"],[1,"text-xl","md:text-2xl","text-primary","semibold"],[1,"mr-2"],[1,"grid"],[4,"ngFor","ngForOf"],[1,"col-12","lg:col-3"],["styleClass","flex flex-column xl:flex-row align-items-center justify-content-center xl:justify-content-start w-full surface-card surface-border text-primary p-3 hover:text-orange-700 hover:border-orange-200 ",3,"routerLink"],[1,"flex","align-items-center","justify-content-between","w-full"],[1,"flex","flex-row"],[1,"mr-0","xl:mr-4"],[1,"flex","flex-column","align-items-center","xl:align-items-start"],[1,"block","h-auto","font-semibold","text-2xl"],[1,"w-5rem","h-5rem",3,"src"]],template:function(i,E){1&i&&t.YNc(0,b,10,2,"ng-container",0),2&i&&t.Q6J("ngIf",E.userRole)},dependencies:[u.sg,u.O5,m.rH,c.zx],encapsulation:2,changeDetection:0}),n})();class L{static getMany(h){return{query:{fields:["main.id","main.title","main.subtitle","main.routerLink","main.icon"],joins:[],filters:h,getType:"MANY"}}}}const H=[{path:"",component:R,resolve:{data:(()=>{class n{constructor(i,E){this.userService=i,this.moduleService=E,this.user=this.userService.getLoggedUser()}resolve(i,E){const _=L.getMany({id:this.user?.role?.accessModule});return this.moduleService.getMany(_)}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(r.K),t.LFG(p))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}];let $=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(H),m.Bz]}),n})(),N=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,$,c.hJ,d.z]}),n})()},6922:(I,v,e)=>{e.d(v,{r:()=>g});var u=e(1135),c=e(8505),d=e(4004),m=e(2340),s=e(8274),f=e(529);let g=(()=>{class o{constructor(t){this.http=t,this.apiUrl=`${m.N.apiUrl}/v1/assign-evaluations`,this.item=new u.X(null),this.item$=this.item.asObservable(),this.items=new u.X([]),this.items$=this.items.asObservable()}getOne(t){return this.http.post(`${this.apiUrl}/find`,t).pipe((0,c.b)(a=>{200===a?.statusCode&&a?.data&&this.item.next(a.data)}))}getMany(t){return this.http.post(`${this.apiUrl}/find`,t).pipe((0,c.b)(a=>{200===a?.statusCode&&a?.data&&this.items.next(a.data)}))}update(t,r){return this.http.patch(`${this.apiUrl}/head/${t}`,r).pipe((0,d.U)(l=>{if(200===l?.statusCode&&l?.data){const y=this.items.getValue().map(p=>p.id===t?{...p,...r}:p);return this.items.next(y),!0}return!1}))}updateAndRemove(t,r){return this.http.patch(`${this.apiUrl}/head/${t}`,r).pipe((0,c.b)(l=>{200===l?.statusCode&&this.removeItemFromList(t)}))}removeItemFromList(t){const a=this.items.getValue().filter(l=>l?.id!==t);this.items.next(a)}}return o.\u0275fac=function(t){return new(t||o)(s.LFG(f.eN))},o.\u0275prov=s.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},830:(I,v,e)=>{e.d(v,{P:()=>g});var u=e(1135),c=e(8505),d=e(4004),m=e(2340),s=e(8274),f=e(529);let g=(()=>{class o{constructor(t){this.http=t,this.apiUrl=`${m.N.apiUrl}/v1/desc-evaluations`,this.item=new u.X(null),this.item$=this.item.asObservable(),this.items=new u.X([]),this.items$=this.items.asObservable()}getOne(t){return this.http.post(`${this.apiUrl}/find`,t).pipe((0,c.b)(a=>{200===a?.statusCode&&a?.data&&this.item.next(a.data)}))}getMany(t){return this.http.post(`${this.apiUrl}/find`,t).pipe((0,c.b)(a=>{200===a?.statusCode&&a?.data&&this.items.next(a.data)}))}update(t,r){return this.http.patch(`${this.apiUrl}/head/${t}`,r).pipe((0,d.U)(l=>{if(200===l?.statusCode&&l?.data){const y=this.items.getValue().map(p=>p.id===t?{...p,...r}:p);return this.items.next(y),!0}return!1}))}updateAndRemove(t,r){return this.http.patch(`${this.apiUrl}/head/${t}`,r).pipe((0,c.b)(l=>{200===l?.statusCode&&this.removeItemFromList(t)}))}removeItemFromList(t){const a=this.items.getValue().filter(l=>l?.id!==t);this.items.next(a)}}return o.\u0275fac=function(t){return new(t||o)(s.LFG(f.eN))},o.\u0275prov=s.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},2722:(I,v,e)=>{e.d(v,{R:()=>s});var u=e(4482),c=e(5403),d=e(8421),m=e(5032);function s(f){return(0,u.e)((g,o)=>{(0,d.Xf)(f).subscribe((0,c.x)(o,()=>o.complete(),m.Z)),!o.closed&&g.subscribe(o)})}}}]);