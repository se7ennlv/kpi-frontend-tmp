"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[60],{2654:(D,v,o)=>{o.r(v),o.d(v,{SignUpModule:()=>L});var h=o(6895),t=o(5675),i=o(2156),f=o(655);class p{}(0,f.gn)([(0,i.C1)(),(0,i.uR)({allowDecimal:!1,isFormat:!1})],p.prototype,"username",void 0),(0,f.gn)([(0,i.C1)(),(0,i.uR)({allowDecimal:!1,isFormat:!1})],p.prototype,"headCode",void 0),(0,f.gn)([(0,i.vg)({defaultValue:"KPI$1234"}),(0,i.C1)()],p.prototype,"password",void 0),(0,f.gn)([(0,i.vg)({defaultValue:2})],p.prototype,"userGroupId",void 0);var d=o(5841),C=o(5116),e=o(8274),y=o(263),m=o(1601),g=o(841),b=o(704),a=o(1924),u=o(433),n=o(1740),s=o(5593),E=o(2453),_=o(9137);const M=function(l){return{"ng-invalid ng-dirty":l}},U=function(){return["/signin"]},x=[{path:"",component:(()=>{class l{constructor(r,c,A,I,R,G,J){this.authService=r,this.staffService=c,this.formService=A,this.fb=I,this.router=R,this.alertService=G,this.storage=J,this.submitted=!1,i.jc.set(this.formService.validationMessages),this.appNameLa=d.m.NAME_LA,this.appNameEn=d.m.NAME_EN}get controls(){return this.formGroup.controls}ngOnInit(){const r=new p;this.formGroup=this.fb.formGroup(r)}onSubmit(){this.submitted=!0,!this.formGroup.invalid&&(this.formGroup.disable(),this.checkStaff())}checkStaff(){const r=this.formGroup.get("username")?.value;Object.assign({staffCode:r})}checkHead(){const r=this.formGroup.get("headCode")?.value;Object.assign({staffCode:r})}checkAccount(){const r=this.formGroup.get("username")?.value,c=Object.assign({username:r});this.authService.checkAccount(c).subscribe({next:A=>{A?(this.formGroup.enable(),this.alertService.showDanger("\u0ec4\u0ead\u0e94\u0eb5\u0e82\u0ead\u0e87\u0e97\u0ec8\u0eb2\u0e99\u0ec0\u0e84\u0eb5\u0e8d\u0e9c\u0ec8\u0eb2\u0e99\u0e81\u0eb2\u0e99\u0ea5\u0ebb\u0e87\u0e97\u0eb0\u0e9a\u0ebd\u0e99\u0ec1\u0ea5\u0ec9\u0ea7!")):this.signUp()},error:A=>{this.formGroup.enable(),this.alertService.showError(A)}})}signUp(){const r=this.formGroup.value;this.authService.signUp(r).subscribe({next:c=>{c&&(this.storage.store(C.Q.REMEMBER,r.username),this.alertService.showSuccess("\u0ea5\u0ebb\u0e87\u0e97\u0eb0\u0e9a\u0ebd\u0e99\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94"),setTimeout(()=>{this.router.navigateByUrl("/signin")},2e3))},error:()=>{this.formGroup.enable()}})}}return l.\u0275fac=function(r){return new(r||l)(e.Y36(y.e),e.Y36(m.x),e.Y36(g.k),e.Y36(i.GW),e.Y36(t.F0),e.Y36(b.c),e.Y36(a.n2))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-sign-up"]],decls:28,vars:16,consts:[[1,"h-screen","bg-auth-page","flex","justify-content-center","align-content-center","align-items-center"],["src","assets/images/svg/survey-main-banner.svg","alt","",1,"w-4","mr-auto","ml-5"],[1,"absolute","card","card-login","p-4","shadow-2","w-26rem","md:w-28rem","border-round-xl"],[1,"flex","justify-content-center"],["src","assets/images/kpi-logo.png","alt","",1,"w-12rem","h-8rem"],[1,"mt-2"],[1,"flex","flex-column","mb-5","text-center"],[1,"text-2xl","font-bold"],[1,"text-xl","font-bold"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"p-fluid"],[1,"field"],["id","username","pInputText","","placeholder","\u0ec4\u0ead\u0e94\u0eb5\u0e9e\u0eb0\u0e99\u0eb1\u0e81\u0e87\u0eb2\u0e99 (\u0e82\u0ead\u0e87\u0e95\u0ebb\u0e99\u0ec0\u0ead\u0e87)","formControlName","username","autocomplete","username",3,"ngClass"],[3,"filterByHead","formControlName","showAddon","showLabel","placeholder","submitted"],[1,"my-4","text-center"],["pButton","","pRipple","","type","submit","label","\u0ea5\u0ebb\u0e87\u0e97\u0eb0\u0e9a\u0ebd\u0e99",1,"mt-2","p-button-lg","p-button-rounded",3,"loading","disabled"],[1,"mt-4","text-sm"],[1,"text-indigo-500",3,"routerLink"],["styleClass","px-50"]],template:function(r,c){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"span",7),e._uU(8,"EDL"),e.qZA(),e.TgZ(9,"span",8),e._uU(10),e.qZA(),e.TgZ(11,"span",8),e._uU(12),e.qZA()(),e.TgZ(13,"form",9),e.NdJ("ngSubmit",function(){return c.onSubmit()}),e.TgZ(14,"div",10)(15,"div",11),e._UZ(16,"input",12),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-dropdown-staff",13),e.qZA(),e.TgZ(19,"div",14),e._UZ(20,"button",15),e.TgZ(21,"div",16),e._UZ(22,"hr"),e.TgZ(23,"span"),e._uU(24,"\u0ea1\u0eb5\u0e9a\u0eb1\u0e99\u0e8a\u0eb5\u0ea2\u0eb9\u0ec8\u0ec1\u0ea5\u0ec9\u0ea7? "),e.qZA(),e.TgZ(25,"a",17),e._uU(26,"\u0ec0\u0e82\u0ebb\u0ec9\u0eb2\u0eaa\u0eb9\u0ec8\u0ea5\u0eb0\u0e9a\u0ebb\u0e9a"),e.qZA()()()()()()()(),e._UZ(27,"p-toast",18)),2&r&&(e.xp6(10),e.Oqu(c.appNameEn),e.xp6(2),e.Oqu(c.appNameLa),e.xp6(1),e.Q6J("formGroup",c.formGroup),e.xp6(3),e.Q6J("ngClass",e.VKq(13,M,c.submitted&&c.controls.username.errors)),e.xp6(2),e.Q6J("filterByHead",!1)("formControlName","headCode")("showAddon",!1)("showLabel",!1)("placeholder","\u0ec4\u0ead\u0e94\u0eb5\u0e9e\u0eb0\u0e99\u0eb1\u0e81\u0e87\u0eb2\u0e99 (\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2\u0e9c\u0eb9\u0ec9\u0e8a\u0eb5\u0ec9\u0e99\u0eb3)")("submitted",c.submitted),e.xp6(2),e.Q6J("loading",c.formGroup.disabled)("disabled",c.formGroup.disabled),e.xp6(5),e.Q6J("routerLink",e.DdM(15,U)))},dependencies:[h.mk,t.rH,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,i.bc,i.VP,i.YE,n.o,s.Hq,E.FN,_.W],encapsulation:2}),l})()}];let S=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[t.Bz.forChild(x),t.Bz]}),l})();var k=o(4466),O=o(1989),T=o(5047),P=o(3425),Z=o(2008);let L=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[h.ez,S,k.m,n.j,T.L$,O.nD,s.hJ,P.gz,E.EV,Z.l]}),l})()},2008:(D,v,o)=>{o.d(v,{l:()=>p});var h=o(6895),t=o(4466),i=o(666),f=o(8274);let p=(()=>{class d{}return d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=f.oAB({type:d}),d.\u0275inj=f.cJS({imports:[h.ez,t.m,i.kW]}),d})()},1601:(D,v,o)=>{o.d(v,{x:()=>C});var h=o(2340),t=o(1135),i=o(8505),f=o(4004),p=o(8274),d=o(529);let C=(()=>{class e{constructor(m){this.http=m,this.apiPath="staffs",this.staffs=new t.X([]),this.staffs$=this.staffs.asObservable(),this.apiUrl=`${h.N.apiUrl}/v1/${this.apiPath}`}getAll(m,g){return this.http.get(`${this.apiUrl}/${m}`,{params:g}).pipe((0,i.b)(a=>{200===a?.statusCode&&a?.data&&this.staffs.next(a.data)}))}getAllHead(){return this.http.get(`${this.apiUrl}/head`).pipe((0,i.b)(g=>{200===g?.statusCode&&g?.data&&this.staffs.next(g.data)}))}countStaff(m){return this.http.get(`${h.N.apiUrl}/v1/report-staff-score/count`,{params:m}).pipe((0,f.U)(b=>200===b?.statusCode&&b?.data?.rowCount?b?.data?.rowCount:0))}}return e.\u0275fac=function(m){return new(m||e)(p.LFG(d.eN))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2722:(D,v,o)=>{o.d(v,{R:()=>p});var h=o(4482),t=o(5403),i=o(8421),f=o(5032);function p(d){return(0,h.e)((C,e)=>{(0,i.Xf)(d).subscribe((0,t.x)(e,()=>e.complete(),f.Z)),!e.closed&&C.subscribe(e)})}},1989:(D,v,o)=>{o.d(v,{XZ:()=>g,nD:()=>b});var h=o(6895),t=o(8274),i=o(433),f=o(982);const p=["cb"],d=function(a,u,n){return{"p-checkbox-label":!0,"p-checkbox-label-active":a,"p-disabled":u,"p-checkbox-label-focus":n}};function C(a,u){if(1&a){const n=t.EpF();t.TgZ(0,"label",7),t.NdJ("click",function(E){t.CHM(n);const _=t.oxw(),M=t.MAs(3);return t.KtG(_.onClick(E,M,!0))}),t._uU(1),t.qZA()}if(2&a){const n=t.oxw();t.Tol(n.labelStyleClass),t.Q6J("ngClass",t.kEZ(5,d,n.checked(),n.disabled,n.focused)),t.uIk("for",n.inputId),t.xp6(1),t.Oqu(n.label)}}const e=function(a,u,n){return{"p-checkbox p-component":!0,"p-checkbox-checked":a,"p-checkbox-disabled":u,"p-checkbox-focused":n}},y=function(a,u,n){return{"p-highlight":a,"p-disabled":u,"p-focus":n}},m={provide:i.JU,useExisting:(0,t.Gpc)(()=>g),multi:!0};let g=(()=>{class a{constructor(n){this.cd=n,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new t.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(n,s,E){n.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(n),E&&s.focus())}updateModel(n){let s;this.binary?(s=this.checked()?this.falseValue:this.trueValue,this.model=s,this.onModelChange(s)):(s=this.checked()?this.model.filter(E=>!f.gb.equals(E,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(s),this.model=s,this.formControl&&this.formControl.setValue(s)),this.onChange.emit({checked:s,originalEvent:n})}handleChange(n){this.readonly||this.updateModel(n)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(n){this.model=n,this.cd.markForCheck()}registerOnChange(n){this.onModelChange=n}registerOnTouched(n){this.onModelTouched=n}setDisabledState(n){this.disabled=n,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:f.gb.contains(this.value,this.model)}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["p-checkbox"]],viewQuery:function(n,s){if(1&n&&t.Gf(p,5),2&n){let E;t.iGM(E=t.CRH())&&(s.inputViewChild=E.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[t._Bn([m])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(n,s){if(1&n){const E=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),t.NdJ("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()})("change",function(M){return s.handleChange(M)}),t.qZA()(),t.TgZ(4,"div",4),t.NdJ("click",function(M){t.CHM(E);const U=t.MAs(3);return t.KtG(s.onClick(M,U,!0))}),t._UZ(5,"span",5),t.qZA()(),t.YNc(6,C,2,9,"label",6)}2&n&&(t.Tol(s.styleClass),t.Q6J("ngStyle",s.style)("ngClass",t.kEZ(18,e,s.checked(),s.disabled,s.focused)),t.xp6(2),t.Q6J("readonly",s.readonly)("value",s.value)("checked",s.checked())("disabled",s.disabled),t.uIk("id",s.inputId)("name",s.name)("tabindex",s.tabindex)("aria-labelledby",s.ariaLabelledBy)("aria-label",s.ariaLabel)("aria-checked",s.checked())("required",s.required),t.xp6(2),t.Q6J("ngClass",t.kEZ(22,y,s.checked(),s.disabled,s.focused)),t.xp6(1),t.Q6J("ngClass",s.checked()?s.checkboxIcon:null),t.xp6(1),t.Q6J("ngIf",s.label))},dependencies:[h.mk,h.O5,h.PC],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),a})(),b=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[h.ez]}),a})()}}]);