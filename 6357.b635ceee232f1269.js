"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[6357],{3948:(U,x,a)=>{a.d(x,{h:()=>A});var s=a(8274),m=a(6895),_=a(6679);const v=function(t){return{background:t}};function f(t,h){if(1&t&&(s.ynx(0),s.TgZ(1,"p-tag",1)(2,"div",2),s._UZ(3,"i",3),s.TgZ(4,"span",4),s._uU(5),s.qZA()()(),s.BQk()),2&t){const c=h.ngIf;s.xp6(1),s.Akn(s.VKq(6,v,c.color)),s.Q6J("rounded",!0),s.xp6(2),s.Tol(c.icon),s.xp6(2),s.Oqu(c.name)}}let A=(()=>{class t{constructor(){}ngOnInit(){}trackByFn(c,g){return g.id||c}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-task-status"]],inputs:{taskStatus:"taskStatus"},decls:1,vars:1,consts:[[4,"ngIf"],["styleClass","px-3",3,"rounded"],[1,"flex","align-items-center","gap-1"],[2,"font-size","11px"],[1,"font-semibold",2,"font-size","11px"]],template:function(c,g){1&c&&s.YNc(0,f,6,8,"ng-container",0),2&c&&s.Q6J("ngIf",g.taskStatus)},dependencies:[m.O5,_.V],encapsulation:2}),t})()},9981:(U,x,a)=>{a.d(x,{o:()=>v});var s=a(6895),m=a(6679),_=a(8274);let v=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=_.oAB({type:f}),f.\u0275inj=_.cJS({imports:[s.ez,m.W]}),f})()},3678:(U,x,a)=>{a.d(x,{K:()=>h});var s=a(4004),m=a(8505),_=a(1135),v=a(2340),f=a(8274),A=a(529),t=a(3119);let h=(()=>{class c{constructor(r,d){this.http=r,this.planMainWfService=d,this.apiUrl=`${v.N.apiUrl}/v1/plan-sub-wf-staffs`,this.items=new _.X([]),this.items$=this.items.asObservable(),this.item=new _.X(null),this.item$=this.item.asObservable()}create(r,d,o){return this.http.post(this.apiUrl,o).pipe((0,s.U)(p=>!(201!==p?.statusCode||!p?.data||(this.planMainWfService.updateWorkflow(r,d,p.data),0))))}forwardWf(r){return this.http.post(`${this.apiUrl}/forward`,r).pipe((0,m.b)(o=>{201===o?.statusCode&&o?.data&&this.updateItems(o.data)}))}getOne(r){return this.http.post(`${this.apiUrl}/find`,r).pipe((0,m.b)(o=>{200===o?.statusCode&&o?.data&&this.item.next(o.data)}))}getMany(r){return this.http.post(`${this.apiUrl}/find`,r).pipe((0,m.b)(o=>{200===o?.statusCode&&o?.data&&this.items.next(o.data)}))}update(r,d){return this.http.patch(this.apiUrl,d,{params:r}).pipe((0,m.b)(o=>{if(200===o?.statusCode&&o?.data){const p=o.data,b=this.items.getValue().map(T=>T?.id===p.id?p:T);this.items.next(b)}}))}pickup(r,d){return this.http.patch(`${this.apiUrl}/pickup`,d,{params:r}).pipe((0,m.b)(p=>{200===p?.statusCode&&p?.data&&this.updateItems(p.data)}))}deleteMany(r){return this.http.delete(`${this.apiUrl}/${r}`).pipe((0,s.U)(o=>200===o?.statusCode))}updateItems(r){const o=this.items.getValue().map(p=>p?.id===r.id?{...p,status:r.status}:p);this.items.next(o)}}return c.\u0275fac=function(r){return new(r||c)(f.LFG(A.eN),f.LFG(t.$))},c.\u0275prov=f.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},2463:(U,x,a)=>{a.d(x,{Z:()=>I});var s=a(1135),m=a(4004),_=a(8505),v=a(2340),f=a(7579);class A{static getDetail(l,n){let i=["main.id","main.docYear","main.taskNo","main.taskSubject","main.taskWeight","main.indicatorTime","main.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","main.scheduledStart","main.scheduledEnd","main.createdAt","main.updatedAt","main.approvedAt","creator.staffCode","creator.firstName","creator.lastName","updater.staffCode","updater.firstName","updater.lastName","status.id","status.icon","status.name","status.color"],e=["iq","is","creator","updater","status"];return n?(i.push("owf.id","oworkflows.id","oworkflows.name"),e.push("owf","oworkflows")):(i.push("swf.id","sworkflows.staffCode","sworkflows.firstName","sworkflows.lastName"),e.push("swf","sworkflows")),{query:{fields:i,joins:e,filters:l,getType:"ONE"}}}}var t=a(8274),h=a(4325),c=a(8386),g=a(6895),r=a(6679),d=a(3608),o=a(3948);function p(u,l){if(1&u&&(t.TgZ(0,"li")(1,"span",15),t._uU(2,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2: "),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&u){const n=t.oxw().ngIf;t.xp6(4),t.Oqu(t.xi3(5,1,null==n?null:n.indicatorTime,"dd/MM/yyyy HH:mm"))}}function D(u,l){if(1&u&&(t.TgZ(0,"li")(1,"span",15),t._uU(2,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99: "),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&u){const n=t.oxw().ngIf;t.xp6(4),t.Oqu(null==n?null:n.indicatorQuantity)}}function b(u,l){if(1&u&&(t.TgZ(0,"li")(1,"span",15),t._uU(2,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a:"),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&u){const n=t.oxw().ngIf;t.xp6(5),t.Oqu(null==n||null==n.indicatorQuality?null:n.indicatorQuality.subject)}}function T(u,l){if(1&u&&(t.TgZ(0,"li")(1,"span",15),t._uU(2,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88:"),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&u){const n=t.oxw().ngIf;t.xp6(5),t.Oqu(null==n||null==n.indicatorSatisfied?null:n.indicatorSatisfied.subject)}}function y(u,l){if(1&u&&(t.ynx(0),t.TgZ(1,"div",4)(2,"div")(3,"label",5),t._uU(4,"\u0ec1\u0e81\u0ec9\u0ec4\u0e82\u0eab\u0ebc\u0ec9\u0eb2\u0eaa\u0eb8\u0e94:"),t.qZA()(),t.TgZ(5,"div"),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"div",6)(9,"div")(10,"label",5),t._uU(11,"\u0ec1\u0e81\u0ec9\u0ec4\u0e82\u0ec2\u0e94\u0e8d:"),t.qZA()(),t.TgZ(12,"span",7),t._uU(13),t.qZA()(),t.BQk()),2&u){const n=t.oxw().ngIf;t.xp6(6),t.Oqu(t.xi3(7,4,null==n?null:n.updatedAt,"dd/MM/yyyy HH:mm")),t.xp6(6),t.Q6J("pTooltip",null==n||null==n.updater?null:n.updater.staffCode),t.xp6(1),t.AsE(" ",null==n||null==n.updater?null:n.updater.firstName," ",null==n||null==n.updater?null:n.updater.lastName," ")}}function O(u,l){if(1&u&&(t.ynx(0),t.TgZ(1,"li"),t._uU(2),t.qZA(),t.BQk()),2&u){const n=l.ngIf;t.xp6(2),t.hij(" ",null==n?null:n.name,"")}}function S(u,l){if(1&u&&(t.ynx(0),t.YNc(1,O,3,1,"ng-container",2),t.BQk()),2&u){const n=l.$implicit;t.xp6(1),t.Q6J("ngIf",null==n?null:n.office)}}function q(u,l){if(1&u&&(t.ynx(0),t.TgZ(1,"ul"),t.YNc(2,S,2,1,"ng-container",16),t.qZA(),t.BQk()),2&u){const n=l.ngIf;t.xp6(2),t.Q6J("ngForOf",n)}}function w(u,l){if(1&u&&(t.ynx(0),t.YNc(1,q,3,1,"ng-container",2),t.BQk()),2&u){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",null==n?null:n.oworkflows)}}function M(u,l){if(1&u&&(t.ynx(0),t.TgZ(1,"li"),t._uU(2),t.qZA(),t.BQk()),2&u){const n=l.ngIf;t.xp6(2),t.AsE(" ",null==n?null:n.firstName," ",null==n?null:n.lastName,"")}}function Q(u,l){if(1&u&&(t.ynx(0),t.YNc(1,M,3,2,"ng-container",2),t.BQk()),2&u){const n=l.$implicit;t.xp6(1),t.Q6J("ngIf",null==n?null:n.staff)}}function k(u,l){if(1&u&&(t.ynx(0),t.TgZ(1,"ul"),t.YNc(2,Q,2,1,"ng-container",16),t.qZA(),t.BQk()),2&u){const n=l.ngIf;t.xp6(2),t.Q6J("ngForOf",n)}}function N(u,l){if(1&u&&(t.ynx(0),t.YNc(1,k,3,1,"ng-container",2),t.BQk()),2&u){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",null==n?null:n.sworkflows)}}function P(u,l){if(1&u&&(t.TgZ(0,"div",4)(1,"div")(2,"label",5),t._uU(3,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ead\u0eb0\u0e99\u0eb8\u0ea1\u0eb1\u0e94:"),t.qZA()(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"date"),t.qZA()()),2&u){const n=t.oxw().ngIf;t.xp6(5),t.Oqu(t.xi3(6,1,null==n?null:n.approvedAt,"dd/MM/yyyy HH:mm"))}}const $=function(){return{width:"50px"}};function L(u,l){if(1&u&&(t.ynx(0),t.TgZ(1,"div",3)(2,"div",4)(3,"div")(4,"label",5),t._uU(5,"\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5:"),t.qZA()(),t.TgZ(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"div",4)(9,"div")(10,"label",5),t._uU(11,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0eaa\u0ec9\u0eb2\u0e87:"),t.qZA()(),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"div",6)(15,"div")(16,"label",5),t._uU(17,"\u0eaa\u0ec9\u0eb2\u0e87\u0ec2\u0e94\u0e8d:"),t.qZA()(),t.TgZ(18,"span",7),t._uU(19),t.qZA()(),t.TgZ(20,"div",8)(21,"label",9),t._uU(22,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81"),t.qZA(),t.TgZ(23,"div"),t._uU(24),t.qZA()(),t.TgZ(25,"div",6)(26,"div")(27,"label",5),t._uU(28,"\u0e99\u0ec9\u0eb3\u0edc\u0eb1\u0e81:"),t.qZA()(),t._UZ(29,"p-tag",10),t.qZA(),t.TgZ(30,"div",8)(31,"label",11),t._uU(32,"\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94:"),t.qZA(),t.TgZ(33,"ul"),t.YNc(34,p,6,4,"li",2),t.YNc(35,D,5,1,"li",2),t.YNc(36,b,6,1,"li",2),t.YNc(37,T,6,1,"li",2),t.qZA()(),t.YNc(38,y,14,7,"ng-container",2),t.TgZ(39,"div",8)(40,"label",9),t._uU(41,"\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec3\u0eab\u0ec9:"),t.qZA(),t.TgZ(42,"div",12),t.YNc(43,w,2,1,"ng-container",2),t.YNc(44,N,2,1,"ng-container",2),t.qZA()(),t.TgZ(45,"div",4)(46,"div")(47,"label",5),t._uU(48,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0:"),t.qZA()(),t._UZ(49,"app-task-status",13),t.qZA(),t.YNc(50,P,7,4,"div",14),t.qZA(),t.BQk()),2&u){const n=l.ngIf,i=t.oxw();t.xp6(7),t.Oqu(null==n?null:n.docYear),t.xp6(5),t.hij(" ",t.xi3(13,19,null==n?null:n.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(6),t.Q6J("pTooltip",null==n||null==n.creator?null:n.creator.staffCode),t.xp6(1),t.AsE(" ",null==n||null==n.creator?null:n.creator.firstName," ",null==n||null==n.creator?null:n.creator.lastName," "),t.xp6(5),t.Oqu(null==n?null:n.taskSubject),t.xp6(5),t.Akn(t.DdM(22,$)),t.Q6J("value",(null==n?null:n.taskWeight)+"%")("rounded",!0),t.xp6(5),t.Q6J("ngIf",null==n?null:n.indicatorTime),t.xp6(1),t.Q6J("ngIf",null==n?null:n.indicatorQuantity),t.xp6(1),t.Q6J("ngIf",null==n||null==n.indicatorQuality?null:n.indicatorQuality.subject),t.xp6(1),t.Q6J("ngIf",null==n||null==n.indicatorSatisfied?null:n.indicatorSatisfied.subject),t.xp6(1),t.Q6J("ngIf",null==n?null:n.updater),t.xp6(5),t.Q6J("ngIf",i.isBranch),t.xp6(1),t.Q6J("ngIf",!i.isBranch),t.xp6(5),t.Q6J("taskStatus",null==n?null:n.status),t.xp6(1),t.Q6J("ngIf",null==n?null:n.approvedAt)}}let W=(()=>{class u{constructor(n,i,e){this.dialogConfig=n,this.planSubService=i,this.userService=e,this.isBranch=!1,this.destroy$=new f.x}ngOnInit(){this.user=this.userService.getLoggedUser(),this.isBranch=this.user?.profile?.division?.isBranch,this.dialogData=this.dialogConfig.data.data,this.taskId=this.dialogData.id,this.taskId&&this.getPlanSubDetail()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getPlanSubDetail(){this.task$=this.planSubService.item$;const n=Object.assign({id:this.taskId}),i=A.getDetail(n,this.isBranch);this.planSubService.getOne(i).subscribe()}}return u.\u0275fac=function(n){return new(n||u)(t.Y36(h.S),t.Y36(I),t.Y36(c.K))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-detail-out"]],decls:4,vars:3,consts:[[1,"grid"],[1,"col-12"],[4,"ngIf"],[1,"p-fluid"],[1,"flex","align-items-center","gap-2"],[1,"font-semibold","text-xl"],[1,"field","flex","align-items-center","gap-2"],["tooltipPosition","bottom",3,"pTooltip"],[1,"field"],[1,"font-semibold","text-xl","mb-0"],["severity","success",3,"value","rounded"],[1,"font-semibold","mb-0","text-xl"],[1,"flex","flex-wrap"],[3,"taskStatus"],["class","flex align-items-center gap-2",4,"ngIf"],[1,"font-semibold"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,L,51,23,"ng-container",2),t.ALo(3,"async"),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,i.task$)))},dependencies:[g.sg,g.O5,r.V,d.u,o.h,g.Ov,g.uU],encapsulation:2}),u})();var J=a(3678);const Y=function(u){return{color:u}};function j(u,l){if(1&u&&(t.ynx(0),t.TgZ(1,"div",10),t._UZ(2,"i"),t.TgZ(3,"span",15),t._uU(4),t.qZA()(),t.BQk()),2&u){const n=l.ngIf;t.xp6(1),t.Akn(t.VKq(5,Y,null==n?null:n.color)),t.xp6(1),t.Tol(null==n?null:n.icon),t.xp6(2),t.Oqu(null==n?null:n.name)}}const K=function(){return{width:"50px"}};function F(u,l){if(1&u&&(t.ynx(0),t.TgZ(1,"div",3)(2,"div",4)(3,"label",5),t._uU(4,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81"),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA()(),t.TgZ(7,"div",6)(8,"div")(9,"label",7),t._uU(10,"\u0e99\u0ec9\u0eb3\u0edc\u0eb1\u0e81:"),t.qZA()(),t._UZ(11,"p-tag",8),t.qZA(),t.TgZ(12,"div",4)(13,"label",9),t._uU(14,"\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94:"),t.qZA(),t.TgZ(15,"ul")(16,"li")(17,"span",10),t._uU(18,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2: "),t.qZA(),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"date"),t.qZA()(),t.TgZ(22,"li")(23,"span",10),t._uU(24,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99: "),t.qZA(),t.TgZ(25,"span"),t._uU(26),t.qZA()(),t.TgZ(27,"li")(28,"span",10),t._uU(29,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a:"),t.qZA(),t._UZ(30,"br"),t.TgZ(31,"span"),t._uU(32),t.qZA()(),t.TgZ(33,"li")(34,"span",10),t._uU(35,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88:"),t.qZA(),t._UZ(36,"br"),t.TgZ(37,"span"),t._uU(38),t.qZA()()()(),t.TgZ(39,"div",11)(40,"div")(41,"label",7),t._uU(42,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0eaa\u0ec9\u0eb2\u0e87:"),t.qZA()(),t._uU(43),t.ALo(44,"date"),t.qZA(),t.TgZ(45,"div",6)(46,"div")(47,"label",7),t._uU(48,"\u0eaa\u0ec9\u0eb2\u0e87\u0ec2\u0e94\u0e8d:"),t.qZA()(),t.TgZ(49,"span",12),t._uU(50),t.qZA()(),t.TgZ(51,"div",11)(52,"div")(53,"label",7),t._uU(54,"\u0ec1\u0e81\u0ec9\u0ec4\u0e82\u0eab\u0ebc\u0ec9\u0eb2\u0eaa\u0eb8\u0e94:"),t.qZA()(),t.TgZ(55,"div"),t._uU(56),t.ALo(57,"date"),t.qZA()(),t.TgZ(58,"div",6)(59,"div")(60,"label",7),t._uU(61,"\u0ec1\u0e81\u0ec9\u0ec4\u0e82\u0ec2\u0e94\u0e8d:"),t.qZA()(),t.TgZ(62,"span",12),t._uU(63),t.qZA()(),t.TgZ(64,"div",4)(65,"label",5),t._uU(66,"\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec3\u0eab\u0ec9:"),t.qZA(),t._UZ(67,"div",13),t.qZA(),t.TgZ(68,"div",14)(69,"div")(70,"label",7),t._uU(71,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0:"),t.qZA()(),t.YNc(72,j,5,7,"ng-container",2),t.qZA()(),t.BQk()),2&u){const n=l.ngIf;t.xp6(6),t.Oqu(null==n||null==n.planSub?null:n.planSub.taskSubject),t.xp6(5),t.Akn(t.DdM(27,K)),t.Q6J("value",(null==n||null==n.planSub?null:n.planSub.taskWeight)+"%")("rounded",!0),t.xp6(9),t.Oqu(t.xi3(21,18,null==n||null==n.planSub?null:n.planSub.indicatorTime,"dd/MM/yyyy HH:mm")),t.xp6(6),t.Oqu(null==n||null==n.planSub?null:n.planSub.indicatorQuantity),t.xp6(6),t.Oqu(null==n||null==n.planSub||null==n.planSub.indicatorQuality?null:n.planSub.indicatorQuality.subject),t.xp6(6),t.Oqu(null==n||null==n.planSub||null==n.planSub.indicatorSatisfied?null:n.planSub.indicatorSatisfied.subject),t.xp6(5),t.hij(" ",t.xi3(44,21,null==n?null:n.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(6),t.Q6J("pTooltip",null==n||null==n.creator?null:n.creator.staffCode),t.xp6(1),t.AsE(" ",null==n||null==n.creator?null:n.creator.firstName," ",null==n||null==n.creator?null:n.creator.lastName," "),t.xp6(6),t.Oqu(t.xi3(57,24,null==n?null:n.updatedAt,"dd/MM/yyyy HH:mm")),t.xp6(6),t.Q6J("pTooltip",null==n||null==n.updater?null:n.updater.staffCode),t.xp6(1),t.AsE(" ",null==n||null==n.updater?null:n.updater.firstName," ",null==n||null==n.updater?null:n.updater.lastName," "),t.xp6(9),t.Q6J("ngIf",null==n?null:n.status)}}let H=(()=>{class u{constructor(n,i){this.dialogConfig=n,this.wfStaffService=i,this.isBranch=!1,this.destroy$=new f.x}ngOnInit(){this.dialogData=this.dialogConfig.data.data,this.workflowId=this.dialogData.id,this.isBranch=this.dialogData.isBranch,this.workflowId&&this.getPlanSubDetail()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getPlanSubDetail(){this.workflow$=this.wfStaffService.item$;const n=Object.assign({id:this.workflowId}),i=A.getDetail(n,this.isBranch);this.wfStaffService.getOne(i).subscribe()}}return u.\u0275fac=function(n){return new(n||u)(t.Y36(h.S),t.Y36(J.K))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-detail-in"]],decls:4,vars:3,consts:[[1,"grid"],[1,"col-12"],[4,"ngIf"],[1,"p-fluid"],[1,"field"],[1,"font-semibold","text-xl","mb-0"],[1,"field","flex","align-items-center","gap-2"],[1,"font-semibold","text-xl"],["severity","success",3,"value","rounded"],[1,"font-semibold","mb-0","text-xl"],[1,"font-semibold"],[1,"flex","align-items-center","gap-2"],["tooltipPosition","bottom",3,"pTooltip"],[1,"flex","flex-wrap"],[1,"field","field","flex","align-items-center","gap-2"],[1,"ml-1"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,F,73,28,"ng-container",2),t.ALo(3,"async"),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,i.workflow$)))},dependencies:[g.O5,r.V,d.u,g.Ov,g.uU],encapsulation:2}),u})();var R=a(209),V=a(529),X=a(3119);let I=(()=>{class u{constructor(n,i,e){this.http=n,this.planMainWfService=i,this.dialogService=e,this.apiUrl=`${v.N.apiUrl}/v1/plan-subs`,this.items=new s.X([]),this.items$=this.items.asObservable(),this.item=new s.X(null),this.item$=this.item.asObservable()}create(n,i){return this.http.post(this.apiUrl,i).pipe((0,m.U)(e=>{if(201===e?.statusCode&&e?.data){const E=e.data;return this.planMainWfService.addNewSubTask(n,E),E}}))}getOne(n){return this.http.post(`${this.apiUrl}/find`,n).pipe((0,_.b)(e=>{200===e?.statusCode&&e?.data&&this.item.next(e.data)}))}getOneAndReplace(n){return this.http.post(`${this.apiUrl}/find`,n).pipe((0,_.b)(e=>{if(200===e?.statusCode&&e?.data){const E=e.data,Z=this.items.getValue();if(-1!==Z.findIndex(B=>B.id===E.id)){const B=Z.map(C=>C.id===E.id?{...C,...E}:C);this.items.next([...B])}}}))}getMany(n){return this.http.post(`${this.apiUrl}/find`,n).pipe((0,_.b)(e=>{200===e?.statusCode&&e?.data&&this.items.next(e.data)}))}update(n,i,e){return this.http.patch(`${this.apiUrl}/${i}`,e).pipe((0,_.b)(Z=>{}))}approve(n,i){return this.http.patch(`${this.apiUrl}/approve/${n}`,i).pipe((0,_.b)(E=>{if(200===E?.statusCode&&E?.data){const Z=E.data,B=this.items.getValue().map(C=>(C?.id===n&&(C.status=Z.status),C));this.items.next(B)}}))}deleteOne(n,i){return this.http.delete(`${this.apiUrl}/${i}`).pipe((0,m.U)(E=>200===E?.statusCode),(0,_.b)(E=>{E&&this.planMainWfService.removePlanSub(n,i)}))}showDialogDetail(n,i=!1){if(n)return this.dialogService.open(i?W:H,{header:`\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d #${n}`,width:window.innerWidth>R.A.lg?"65%":"80%",data:{data:{id:n}},contentStyle:{overflow:"auto","padding-bottom":"60px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0})}getDetail(n){}}return u.\u0275fac=function(n){return new(n||u)(t.LFG(V.eN),t.LFG(X.$),t.LFG(h.xA))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);