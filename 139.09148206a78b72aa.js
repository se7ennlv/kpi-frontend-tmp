"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[139],{139:(Yt,T,o)=>{o.r(T),o.d(T,{EvalTaskPlanModule:()=>Ft});var E=o(6895),x=o(5675),y=o(7579),S=o(2722),t=o(8274),m=o(9169),O=o(8145),p=o(4325),U=o(1094),$=o(6832),f=o(793),D=o(805),h=o(3608),z=o(3948),c=o(2156),b=o(7489),L=o(1884),w=o(2311),r=o(4090),_=o(9737),F=o(704),q=o(841),V=o(1481),d=o(433),g=o(5593),v=o(6679),A=o(2946),P=o(3054),B=o(7147),W=o(3609),K=o(8739),X=o(904);function tt(n,l){1&n&&(t.TgZ(0,"span",19),t._uU(1,"\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99\u0e82\u0ead\u0e87 (\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81)"),t.qZA())}const et=function(){return{width:"50px"}};function nt(n,l){if(1&n&&(t.ynx(0),t.TgZ(1,"div",8)(2,"label",20),t._uU(3,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",21)(7,"div")(8,"label",19),t._uU(9,"\u0e99\u0ec9\u0eb3\u0edc\u0eb1\u0e81:"),t.qZA()(),t._UZ(10,"p-tag",22),t.qZA(),t.BQk()),2&n){const e=l.ngIf;t.xp6(5),t.Oqu(null==e?null:e.taskSubject),t.xp6(5),t.Akn(t.DdM(5,et)),t.Q6J("value",(null==e?null:e.taskWeight)+"%")("rounded",!0)}}function ot(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"p-chip",26),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.showPreviewFromUrl(null==a?null:a.filePath))}),t._UZ(1,"i",27),t.TgZ(2,"span",28),t._uU(3),t.qZA()()}if(2&n){const e=l.$implicit;t.xp6(3),t.hij("",null==e?null:e.fileName," ")}}function it(n,l){if(1&n&&(t.ynx(0),t.TgZ(1,"div",8)(2,"label",7),t._uU(3,"\u0ec0\u0ead\u0e81\u0eb0\u0eaa\u0eb2\u0e99\u0ec1\u0e99\u0e9a"),t.qZA(),t._UZ(4,"hr",23),t.TgZ(5,"div",24),t.YNc(6,ot,4,1,"ng-template",25),t.qZA()(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(6),t.Q6J("ngForOf",e.attachments)}}function ut(n,l){1&n&&(t.TgZ(0,"span",19),t._uU(1,"\u0e81\u0eb2\u0e99\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0e82\u0ead\u0e87 (\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2)"),t.qZA())}function lt(n,l){1&n&&(t.TgZ(0,"small",29),t._uU(1," *\u0e81\u0eb0\u0ea5\u0eb8\u0e99\u0eb2\u0e9b\u0ec9\u0ead\u0e99\u0e84\u0eb3\u0ec0\u0eab\u0eb1\u0e99\u0e82\u0ead\u0e87\u0e97\u0ec8\u0eb2\u0e99 "),t.qZA())}function at(n,l){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",1)(2,"div",2)(3,"p-fieldset",3),t.YNc(4,tt,2,0,"ng-template",4),t.TgZ(5,"div",5)(6,"div",6)(7,"div")(8,"label",7),t._uU(9,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99:"),t.qZA(),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"div",8)(13,"label",7),t._uU(14,"\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99\u0ec2\u0e94\u0e8d:"),t.qZA(),t._uU(15),t.qZA(),t.YNc(16,nt,11,6,"ng-container",0),t.TgZ(17,"div",8)(18,"label",7),t._uU(19,"\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0e84\u0ea7\u0eb2\u0ea1\u0e84\u0eb7\u0e9a\u0edc\u0ec9\u0eb2"),t.qZA(),t._UZ(20,"div",9),t.qZA(),t.TgZ(21,"div")(22,"label",7),t._uU(23,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ec0\u0ea5\u0eb5\u0ec8\u0ea1\u0e9b\u0eb0\u0e95\u0eb4\u0e9a\u0eb1\u0e94:"),t.qZA(),t._uU(24),t.ALo(25,"date"),t.qZA(),t.TgZ(26,"div",8)(27,"label",7),t._uU(28,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94:"),t.qZA(),t._uU(29),t.ALo(30,"date"),t.qZA(),t.TgZ(31,"div",8),t._UZ(32,"app-indicator-detail",10),t.qZA(),t.YNc(33,it,7,1,"ng-container",0),t.qZA()()()(),t.TgZ(34,"p-fieldset",11),t.YNc(35,ut,2,0,"ng-template",4),t._UZ(36,"app-score-option",12),t.qZA(),t.TgZ(37,"div",13)(38,"textarea",14),t._uU(39,"                "),t.qZA(),t.YNc(40,lt,2,0,"small",15),t.qZA()(),t.TgZ(41,"div",16)(42,"p-button",17),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.closeDialog())}),t.qZA(),t.TgZ(43,"p-button",18),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.onSubmit())}),t.qZA()(),t.BQk()}if(2&n){const e=l.ngIf,i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(2),t.Q6J("toggleable",!0),t.xp6(7),t.hij(" ",t.xi3(11,21,null==e?null:e.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(5),t.AsE(" ",null==e||null==e.staff?null:e.staff.firstName," ",null==e||null==e.staff?null:e.staff.lastName," "),t.xp6(1),t.Q6J("ngIf",null==e?null:e.task),t.xp6(4),t.Q6J("innerHTML",i.transform(null==e?null:e.reportDetail),t.oJD),t.xp6(4),t.hij(" ",t.xi3(25,24,null==e?null:e.scheduledStart,"dd/MM/yyyy")," "),t.xp6(5),t.hij(" ",t.xi3(30,27,null==e?null:e.scheduledEnd,"dd/MM/yyyy HH:mm")," "),t.xp6(3),t.Q6J("item",e)("isHead",!0),t.xp6(1),t.Q6J("ngIf",e.attachments&&e.attachments.length),t.xp6(1),t.Q6J("toggleable",!0),t.xp6(2),t.Q6J("item",e)("isHead",!0)("submitted",i.submitted),t.xp6(2),t.Q6J("autoResize",!0),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.controls.comment.errors),t.xp6(2),t.Q6J("disabled",i.formGroup.disabled),t.xp6(1),t.Q6J("loading",i.formGroup.disabled)("disabled",i.formGroup.disabled)}}function st(n,l){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-file-preview",30),t.NdJ("closePreview",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.closeImgPreview())}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("selectedFileOrUrl",e.fileSrc)}}let rt=(()=>{class n{constructor(e,i,u,a,s,C,Pt,It,kt){this.fb=e,this.alertService=i,this.formService=u,this.dialogConfig=a,this.dialogRef=s,this.sanitizer=C,this.headEvalService=Pt,this.cdr=It,this.utilService=kt,this.submitted=!1,this.visiblePreview=!1,this.timeScores=r.YZ.TIME_SCORES,this.quantityScores=r.YZ.QUANTITY_SCORES,this.qualityScores=r.YZ.QUALITY_SCORES,this.satisfiedScores=r.YZ.SATISFIED_SCORES,this.destroy$=new y.x,this.formGroup=this.fb.formGroup(new _.t),c.jc.set(this.formService.validationMessages)}get controls(){return this.formGroup.controls}ngOnInit(){this.subscribeData()}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}onSubmit(){if(this.submitted=!0,!this.formGroup.invalid){const e=this.evaluation?.id,i=this.formGroup.value;this.formGroup.disable(),this.headEvalService.updateAndRemove(+e,i).subscribe({next:u=>{u&&(this.alertService.showSuccess("\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0eae\u0ebd\u0e9a\u0eae\u0ec9\u0ead\u0e8d\u0ec1\u0ea5\u0ec9\u0ea7"),this.closeDialog())},error:u=>{this.formGroup.enable(),this.alertService.showError(u)}})}}showPreviewFromUrl(e){e&&(this.utilService.isValidUrl(e)?(this.fileSrc=e,this.visiblePreview=!0):this.alertService.showDanger("\u0eae\u0eb9\u0e9a\u0ec1\u0e9a\u0e9a\u0e97\u0eb5\u0ec8\u0ea2\u0eb9\u0ec8\u0e82\u0ead\u0e87\u0ec4\u0e9f\u0ea5\u0ecc\u0e9a\u0ecd\u0ec8\u0e96\u0eb7\u0e81\u0e95\u0ec9\u0ead\u0e87!"))}closeImgPreview(){this.visiblePreview=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef&&this.dialogRef.close()}closeDialog(){this.submitted=!1,this.formGroup.reset(),this.formGroup.enable(),this.dialogRef.close()}subscribeData(){this.docId=this.dialogConfig.data.data,this.getDetail(this.docId),this.headEvalService.item$.pipe((0,S.R)(this.destroy$),(0,L.x)()).subscribe(e=>{this.evaluation=e,e&&this.dataAnalyzing(),this.cdr.markForCheck()})}dataAnalyzing(){if(this.formGroup.patchValue({taskWfId:this.evaluation?.taskWfId}),this.planSub=this.evaluation?.task,this.planSub){const e=this.getRelevantIndicators();this.setIndicatorValidators(e),this.cdr.markForCheck()}}getRelevantIndicators(){const i=b.pick(this.evaluation,["selfTimeScore","selfQuantityScore","selfQualityScore","selfSatisfiedScore"]);return b.pickBy(i,u=>null!=u&&""!==u&&0!=+u)}setIndicatorValidators(e){Object.entries(e).forEach(([i,u])=>{const a=r.qu.head[i],s=this.formGroup.get(a);s&&(this.formGroup.patchValue({[a]:a!==r.qu.head[i]?0:null}),s.setValidators([c.CM.required()]),s.updateValueAndValidity())})}getDetail(e){if(e){const u=w.Z.getDetail({id:e});this.headEvalService.getOne(u).subscribe()}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.GW),t.Y36(F.c),t.Y36(q.k),t.Y36(p.S),t.Y36(p.E7),t.Y36(V.H7),t.Y36(m.N),t.Y36(t.sBO),t.Y36(U.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-evalution-form"]],decls:3,vars:2,consts:[[4,"ngIf"],[3,"formGroup"],[1,"mb-4"],[3,"toggleable"],["pTemplate","header"],[1,"formgrid","grid","p-fluid"],[1,"col-12"],[1,"font-semibold","text-xl","mb-0"],[1,"field"],[3,"innerHTML"],[3,"item","isHead"],["styleClass","mb-3",3,"toggleable"],[3,"item","isHead","submitted"],[1,""],["id","comment","rows","2","cols","30","pInputTextarea","","formControlName","comment","placeholder","\u0e84\u0eb3\u0ec0\u0eab\u0eb1\u0e99\u0e82\u0ead\u0e87\u0eab\u0ebb\u0ea7\u0edc\u0ec9\u0eb2",1,"w-full",3,"autoResize"],["class","p-error",4,"ngIf"],[1,"text-right","sticky","bottom-0","mt-5"],["label","\u0e8d\u0ebb\u0e81\u0ec0\u0ea5\u0eb5\u0e81","icon","pi pi-times","styleClass","p-button-outlined mr-2",3,"disabled","click"],["label","\u0e9a\u0eb1\u0e99\u0e97\u0eb6\u0e81","icon","pi pi-check",3,"loading","disabled","click"],[1,"font-semibold","text-xl"],["for","address",1,"font-semibold","text-xl","mb-0"],[1,"field","flex","align-items-center","gap-2"],["severity","success",3,"value","rounded"],[1,"mt-0"],[1,"flex","gap-2"],["ngFor","",3,"ngForOf"],["styleClass","cursor-pointer",3,"click"],[1,"pi","pi-paperclip","mr-2","text-green-500"],[1,"w-8rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"p-error"],[3,"selectedFileOrUrl","closePreview"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.YNc(1,at,44,30,"ng-container",0),t.qZA(),t.YNc(2,st,2,1,"ng-container",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",i.evaluation),t.xp6(1),t.Q6J("ngIf",i.visiblePreview))},dependencies:[E.sg,E.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,c.bc,c.VP,c.YE,D.jx,g.zx,v.V,A.p,P.g,B.A,W.Q,K.Q,X.M,E.uU],encapsulation:2,changeDetection:0}),n})();var Et=o(209),ct=o(5442),dt=o(6915),Z=o(605);let pt=(()=>{class n{constructor(e,i,u,a){this.dialogRef=e,this.dialogService=i,this.headEvalService=u,this.alertService=a,this.menuItems=[],this.dialogConfig={width:window.innerWidth>Et.A.lg?"65%":"80%",contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0}}ngOnInit(){}setActionMenus(){this.menuItems=this.task?.isLock?[]:[{label:"\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99",icon:"pi pi-fw pi-check",command:()=>this.onEvaluation(this.task?.id)},{label:"\u0e9a\u0ecd\u0ec8\u0ec0\u0eab\u0eb1\u0e99\u0e94\u0eb5",icon:"pi pi-fw pi-times",command:()=>this.onReject(this.task?.id)}]}showDetail(){if(this.task){const i=w.Z.getDetail({id:this.task?.id});this.headEvalService.getOne(i).subscribe({next:u=>{u?.data&&(this.dialogRef=this.dialogService.open(ct.z,{header:`\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 #${this.task?.id}`,data:{data:u.data},...this.dialogConfig}))},error:u=>{this.alertService.showError(u)}})}}onEvaluation(e){e&&(this.dialogRef=this.dialogService.open(rt,{header:`\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 \u0ec1\u0ea5\u0eb0 \u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81 #${e}`,data:{data:e},...this.dialogConfig}))}onReject(e){this.dialogRef=this.dialogService.open(dt.r,{header:`\u0e9a\u0ecd\u0ec0\u0eab\u0eb1\u0e99\u0e94\u0eb5\u0e95\u0eb2\u0ea1\u0e81\u0eb2\u0e99\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99 (Reject) #${e}`,data:{data:{id:e,taskType:r.UA.PLAN}},...this.dialogConfig})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.E7),t.Y36(p.xA),t.Y36(m.N),t.Y36(F.c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-btn-action"]],inputs:{task:"task"},decls:1,vars:1,consts:[["appendTo","body","label","\u0ec0\u0e9a\u0eb4\u0ec8\u0e87\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94","styleClass","p-button-secondary p-button-sm",3,"model","onClick","onDropdownClick"]],template:function(e,i){1&e&&(t.TgZ(0,"p-splitButton",0),t.NdJ("onClick",function(){return i.showDetail()})("onDropdownClick",function(){return i.setActionMenus()}),t.qZA()),2&e&&t.Q6J("model",i.menuItems)},dependencies:[Z.a],encapsulation:2}),n})();function mt(n,l){1&n&&(t.TgZ(0,"tr")(1,"th",8),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th",8),t._uU(4,"\u0e9b\u0eb0\u0e88\u0eb3\u0e9b\u0eb5"),t.qZA(),t.TgZ(5,"th",8),t._uU(6,"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(7,"th",8),t._uU(8,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94 "),t._UZ(9,"br"),t._uU(10," \u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(11,"th",8),t._uU(12,"\u0ea5\u0eb0\u0eab\u0eb1\u0e94 "),t._UZ(13,"br"),t._uU(14," \u0ea7\u0ebd\u0e81"),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0ea5\u0eb2\u0e8d\u0e87\u0eb2\u0e99"),t.qZA(),t.TgZ(17,"th",10),t._uU(18,"\u0e81\u0eb2\u0e99\u0e9b\u0eb0\u0ec0\u0ea1\u0eb5\u0e99\u0e82\u0ead\u0e87 (\u0eaa\u0eb0\u0ea1\u0eb2\u0e8a\u0eb4\u0e81)"),t.qZA(),t.TgZ(19,"th",11),t._uU(20,"\u0eaa\u0eb0\u0e96\u0eb2\u0e99\u0eb0"),t.qZA(),t.TgZ(21,"th",11),t._uU(22,"\u0e94\u0eb3\u0ec0\u0e99\u0eb5\u0e99\u0e81\u0eb2\u0e99"),t.qZA()(),t.TgZ(23,"tr")(24,"th",12)(25,"div",13)(26,"small"),t._uU(27,"\u0ec0\u0ea7\u0ea5\u0eb2"),t.qZA()()(),t.TgZ(28,"th",12)(29,"div",13)(30,"small"),t._uU(31,"\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),t.qZA()()(),t.TgZ(32,"th",12)(33,"div",13)(34,"small"),t._uU(35,"\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),t.qZA()()(),t.TgZ(36,"th",12)(37,"div",13)(38,"small"),t._uU(39,"\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),t.qZA()()()())}function ft(n,l){if(1&n&&(t.TgZ(0,"tr",14)(1,"td",15)(2,"div",16),t._uU(3),t.qZA()()()),2&n){const e=l.$implicit;t.xp6(3),t.lnq(" [",null==e||null==e.staff?null:e.staff.staffCode,"]-",null==e||null==e.staff?null:e.staff.firstName," ",null==e||null==e.staff?null:e.staff.lastName," ")}}const ht=function(){return{width:"50px"}};function gt(n,l){if(1&n&&(t.TgZ(0,"tr")(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",18),t._uU(4),t.qZA(),t.TgZ(5,"td",18),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",18),t._uU(9),t.qZA(),t.TgZ(10,"td",18),t._uU(11),t.qZA(),t.TgZ(12,"td",19)(13,"div",20),t._uU(14),t.qZA()(),t.TgZ(15,"td",21),t._uU(16),t.qZA(),t.TgZ(17,"td",21),t._uU(18),t.qZA(),t.TgZ(19,"td",21),t._uU(20),t.qZA(),t.TgZ(21,"td",21),t._uU(22),t.qZA(),t.TgZ(23,"td",12),t._UZ(24,"app-task-status",22),t.qZA(),t.TgZ(25,"td",18),t._UZ(26,"app-btn-action",23),t.qZA()()),2&n){const e=l.$implicit,i=l.rowIndex,u=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.DdM(17,ht)),t.xp6(1),t.hij(" ",i+1," "),t.xp6(2),t.hij(" ",null==e?null:e.docYear," "),t.xp6(2),t.hij(" ",t.xi3(7,14,null==e?null:e.createdAt,"dd/MM/yyyy HH:mm")," "),t.xp6(3),t.hij(" ",null==e?null:e.id," "),t.xp6(2),t.hij(" ",null==e?null:e.taskId," "),t.xp6(1),t.Q6J("pTooltip",u.utilService.getTooltip(null==e?null:e.taskSubject,25)),t.xp6(2),t.hij(" ",null==e?null:e.taskSubject," "),t.xp6(2),t.Oqu(null==e?null:e.selfTimeScore),t.xp6(2),t.Oqu(null==e?null:e.selfQuantityScore),t.xp6(2),t.Oqu(null==e?null:e.selfQualityScore),t.xp6(2),t.Oqu(null==e?null:e.selfSatisfiedScore),t.xp6(2),t.Q6J("taskStatus",null==e?null:e.status),t.xp6(2),t.Q6J("task",e)}}function vt(n,l){1&n&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2,"\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99"),t.qZA()())}const At=function(){return[25,50,100]};let Bt=(()=>{class n{constructor(e,i,u,a,s,C){this.cdr=e,this.headEvalService=i,this.menuService=u,this.dialogRef=a,this.utilService=s,this.filter=C,this.tasks=[],this.filterFields=["id","staff.staffCode","staff.firstName","staff.lastName","taskSubject"],this.screenHeight=0,this.text="",this.showMenu$=this.menuService.menuState$,this.destroy$=new y.x}ngOnInit(){this.headEvalService.items$.pipe((0,S.R)(this.destroy$)).subscribe(e=>{this.tasks=e,this.cdr.markForCheck()}),this.checkScreenSize()}onResize(e){this.checkScreenSize()}checkScreenSize(){this.screenHeight=Math.floor(.6*window.innerHeight),this.cdr.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef?.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(m.N),t.Y36(O.h),t.Y36(p.E7),t.Y36(U.F),t.Y36($.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-eval-task-plan"]],hostBindings:function(e,i){1&e&&t.NdJ("resize",function(a){return i.onResize(a)},!1,t.Jf7)},decls:8,vars:10,consts:[[1,"p-grid","mt-4"],[1,"p-col-12"],["responsiveLayout","scroll","rowGroupMode","subheader","groupRowsBy","staff.staffCode","dataKey","id","styleClass","p-datatable-sm mt-4","currentPageReportTemplate","\u0eaa\u0eb0\u0ec1\u0e94\u0e87 {first} \u0ec0\u0e96\u0eb4\u0e87 {last} \u0e88\u0eb2\u0e81\u0e97\u0eb1\u0e87\u0edd\u0ebb\u0e94 {totalRecords} \u0ea5\u0eb2\u0e8d\u0e81\u0eb2\u0e99",3,"value","rows","paginator","globalFilterFields","rowHover","scrollable","scrollHeight","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","groupheader"],["pTemplate","body"],["pTemplate","emptymessage"],["rowspan","2",1,"white-space-nowrap","text-center"],["rowspan","2",1,"white-space-nowrap"],["colspan","4",1,"text-center","white-space-nowrap"],["rowspan","2",1,"text-center","white-space-nowrap"],[1,"text-center","white-space-nowrap"],[1,"-rotate-25"],["pRowGroupHeader",""],["colspan","12"],[1,"text-groupheader","font-semibold","text-xl"],[1,"text-center","white-space-nowrap",3,"ngStyle"],[1,"white-space-nowrap","text-center"],["tooltipPosition","bottom","tooltipStyleClass","custom-tooltip",3,"pTooltip"],[1,"max-w-15rem","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"text-center","white-space-nowrap","font-semibold"],[3,"taskStatus"],[3,"task"],["colspan","13",1,"text-center","py-4"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-table",2,3),t.YNc(4,mt,40,0,"ng-template",4),t.YNc(5,ft,4,3,"ng-template",5),t.YNc(6,gt,27,18,"ng-template",6),t.YNc(7,vt,3,0,"ng-template",7),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("value",i.tasks)("rows",25)("paginator",!0)("globalFilterFields",i.filterFields)("rowHover",!0)("scrollable",!0)("scrollHeight",i.screenHeight+"px")("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(9,At)))},dependencies:[E.PC,f.iA,D.jx,f.Z5,h.u,z.h,pt,E.uU],encapsulation:2,changeDetection:0}),n})();var Zt=o(6522),Ct=o(8386);const Tt=[{path:"",component:Bt,resolve:{data:(()=>{class n{constructor(e,i){this.headEvalService=e,this.userService=i,this.user=this.userService.getLoggedUser()}resolve(e,i){const u=this.user?.profile?.staffCode,a=Object.assign({headCode:u,statusId:r.hY.WAIT_HEAD_EVAL,isLock:!1,isActive:!0}),s=Zt._.getWaiting(a);return this.headEvalService.getMany(s)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(m.N),t.LFG(Ct.K))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}];let xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[x.Bz.forChild(Tt),x.Bz]}),n})();var I=o(8639),k=o(585),Y=o(1989),R=o(5047),J=o(1740),M=o(613),yt=o(2448),St=o(3241),Q=o(1119),H=o(1889),N=o(8455),j=o(2008),G=o(4396),Ut=o(4466),Dt=o(9981),bt=o(8191),wt=o(9615);let Ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[E.ez,xt,Ut.m,f.U$,g.hJ,v.W,h.z,I.TX,M.cc,A.L,k._8,J.j,P.A,R.L$,j.l,B.o,G.y,N.$,Y.nD,Z.l,Q.H,H.P,yt.q,f.U$,g.hJ,v.W,h.z,I.TX,M.cc,A.L,k._8,J.j,R.L$,j.l,B.o,G.y,N.$,Y.nD,Z.l,Q.H,H.P,St.$,Dt.o,wt.E,bt.P]}),n})()}}]);