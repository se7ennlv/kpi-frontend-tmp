"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[4036],{1231:(N,M,n)=>{n.d(M,{$:()=>h});var i=n(8274),a=n(433),C=n(7579),u=n(2722),e=n(2569),m=n(8386),x=n(1601),I=n(6895),B=n(2156),t=n(5722),p=n(805);function _(c,D){if(1&c&&(i.TgZ(0,"small",8),i._uU(1),i.qZA()),2&c){const g=i.oxw(2);i.xp6(1),i.hij(" *",null==g.control.errors.notEmpty?null:g.control.errors.notEmpty.message," ")}}function s(c,D){if(1&c&&(i.ynx(0),i.TgZ(1,"label",5)(2,"span",6),i._uU(3),i.qZA(),i.YNc(4,_,2,1,"small",7),i.qZA(),i.BQk()),2&c){const g=i.oxw();i.xp6(3),i.Oqu(g.label),i.xp6(1),i.Q6J("ngIf",g.submitted&&g.control.errors)}}function b(c,D){if(1&c&&(i.TgZ(0,"div",9),i._UZ(1,"i",10),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&c){const g=D.$implicit;i.xp6(3),i.lnq("[",null==g?null:g.staffCode,"]-",null==g?null:g.firstName," ",null==g?null:g.lastName,"")}}let h=(()=>{class c{constructor(g,Z,k,Y,W){this.parentForm=g,this.cdr=Z,this.loadingService=k,this.userService=Y,this.staffService=W,this.submitted=!1,this.showLabel=!0,this.showAddon=!0,this.editMode=!1,this.filterByHead=!0,this.label="\u0e9e\u0eb0\u0e99\u0eb1\u0e81\u0e87\u0eb2\u0e99",this.placeholder="\u0ec0\u0ea5\u0eb7\u0ead\u0e81",this.hint="",this.formControlName="staffCode",this.onChange=()=>{},this.onTouched=()=>{},this.staffs=[],this.loading$=this.loadingService.state$,this.destroy$=new C.x}get control(){return this.formGroup.get(this.formControlName)}writeValue(g){this.selectedValue=g}registerOnChange(g){this.onChange=g}registerOnTouched(g){this.onTouched=g}setDisabledState(g){}onDropdownChange(g){const Z=g.value;this.selectedValue=Z,this.onChange(Z),this.onTouched()}ngOnInit(){this.user=this.userService.getLoggedUser(),this.formGroup=this.parentForm.control,this.staffService.staffs$.pipe((0,u.R)(this.destroy$)).subscribe(g=>{this.staffs=g,this.cdr.detectChanges()}),this.editMode&&this.getStaffs()}getStaffs(){if(this.filterByHead){const g=this.user?.profile?.staffCode;if(g){const Z=Object.assign({head1:g,head2:g,head3:g});this.staffService.getAll("field-sm",Z).subscribe()}}}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete()}}return c.\u0275fac=function(g){return new(g||c)(i.Y36(a.sg),i.Y36(i.sBO),i.Y36(e.b),i.Y36(m.K),i.Y36(x.x))},c.\u0275cmp=i.Xpm({type:c,selectors:[["app-dropdown-staff-multi"]],inputs:{submitted:"submitted",showLabel:"showLabel",showAddon:"showAddon",editMode:"editMode",filterByHead:"filterByHead",label:"label",placeholder:"placeholder",hint:"hint",formControlName:"formControlName"},features:[i._Bn([{provide:a.JU,useExisting:(0,i.Gpc)(()=>c),multi:!0}])],decls:6,vars:10,consts:[[3,"formGroup"],[4,"ngIf"],["appendTo","body","id","assignedTo","defaultLabel","\u0ec0\u0ea5\u0eb7\u0ead\u0e81","optionValue","staffCode","optionLabel","firstName","filterBy","staffCode,firstName,lastName","emptyFilterMessage","\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99","display","chip",3,"options","showToggleAll","filter","resetFilterOnHide","emptyMessage","formControlName","onChange","onFocus"],["multiSelect",""],["pTemplate","item"],["for","assignedTo",1,"font-semibold","white-space-nowrap","mr-1"],[1,"text-lg"],["class","p-error",4,"ngIf"],[1,"p-error"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-user"]],template:function(g,Z){1&g&&(i.TgZ(0,"form",0),i.YNc(1,s,5,2,"ng-container",1),i.TgZ(2,"p-multiSelect",2,3),i.NdJ("onChange",function(Y){return Z.onDropdownChange(Y)})("onFocus",function(){return Z.getStaffs()}),i.ALo(4,"async"),i.YNc(5,b,4,3,"ng-template",4),i.qZA()()),2&g&&(i.Q6J("formGroup",Z.formGroup),i.xp6(1),i.Q6J("ngIf",Z.showLabel),i.xp6(1),i.Q6J("options",Z.staffs)("showToggleAll",!1)("filter",!0)("resetFilterOnHide",!0)("emptyMessage",i.lcZ(4,8,Z.loading$)?"\u0e81\u0eb3\u0ea5\u0eb1\u0e87\u0ec2\u0eab\u0ebc\u0e94..":"\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99")("formControlName",Z.formControlName))},dependencies:[I.O5,a._Y,a.JJ,a.JL,a.sg,a.u,B.bc,B.VP,B.YE,t.NU,p.jx,I.Ov],encapsulation:2,changeDetection:0}),c})()},1601:(N,M,n)=>{n.d(M,{x:()=>x});var i=n(2340),a=n(1135),C=n(8505),u=n(4004),e=n(8274),m=n(529);let x=(()=>{class I{constructor(t){this.http=t,this.apiPath="staffs",this.staffs=new a.X([]),this.staffs$=this.staffs.asObservable(),this.apiUrl=`${i.N.apiUrl}/v1/${this.apiPath}`}getAll(t,p){return this.http.get(`${this.apiUrl}/${t}`,{params:p}).pipe((0,C.b)(s=>{200===s?.statusCode&&s?.data&&this.staffs.next(s.data)}))}getAllHead(){return this.http.get(`${this.apiUrl}/head`).pipe((0,C.b)(p=>{200===p?.statusCode&&p?.data&&this.staffs.next(p.data)}))}countStaff(t){return this.http.get(`${i.N.apiUrl}/v1/report-staff-score/count`,{params:t}).pipe((0,u.U)(_=>200===_?.statusCode&&_?.data?.rowCount?_?.data?.rowCount:0))}}return I.\u0275fac=function(t){return new(t||I)(e.LFG(m.eN))},I.\u0275prov=e.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},7593:(N,M,n)=>{n.d(M,{f:()=>I});var i=n(4004),a=n(8505),C=n(1135),u=n(2340),e=n(8274),m=n(529),x=n(3119);let I=(()=>{class B{constructor(p,_){this.http=p,this.planMainWfService=_,this.apiUrl=`${u.N.apiUrl}/v1/plan-sub-wf-offices`,this.items=new C.X([]),this.items$=this.items.asObservable(),this.item=new C.X(null),this.item$=this.item.asObservable()}create(p,_,s){return this.http.post(this.apiUrl,s).pipe((0,i.U)(b=>!(201!==b?.statusCode||!b?.data||(this.planMainWfService.updateWorkflow(p,_,b.data),0))))}forwardWf(p){return this.http.post(`${this.apiUrl}/forward`,p).pipe((0,a.b)(s=>{201===s?.statusCode&&s?.data&&this.updateItems(s.data)}))}getOne(p){return this.http.post(`${this.apiUrl}/find`,p).pipe((0,a.b)(s=>{200===s?.statusCode&&s?.data&&this.item.next(s.data)}))}getMany(p){return this.http.post(`${this.apiUrl}/find`,p).pipe((0,a.b)(s=>{200===s?.statusCode&&s?.data&&this.items.next(s.data)}))}pickup(p,_){return this.http.patch(`${this.apiUrl}/pickup`,_,{params:p}).pipe((0,a.b)(b=>{200===b?.statusCode&&b?.data&&this.updateItems(b.data)}))}updateItems(p){const s=this.items.getValue().map(b=>b?.id===p.id?{...b,status:p.status}:b);this.items.next(s)}}return B.\u0275fac=function(p){return new(p||B)(e.LFG(m.eN),e.LFG(x.$))},B.\u0275prov=e.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},7792:(N,M,n)=>{n.d(M,{d:()=>C});var i=n(655),a=n(2156);class C{}(0,i.gn)([(0,a.C1)()],C.prototype,"planMainId",void 0),(0,i.gn)([(0,a.C1)()],C.prototype,"subject",void 0),(0,i.gn)([(0,a.C1)()],C.prototype,"weight",void 0),(0,i.gn)([(0,a.C1)()],C.prototype,"scheduledStart",void 0),(0,i.gn)([(0,a.C1)()],C.prototype,"scheduledEnd",void 0),(0,i.gn)([(0,a.C1)()],C.prototype,"progressPrevious",void 0),(0,i.gn)([(0,a.C1)({conditionalExpression:u=>!(null!==u.indicatorQuantity&&""!=u.indicatorQuantity||null!==u.qualityIndicatorId&&u.qualityIndicatorId||null!==u.satisfiedIndicatorId&&u.satisfiedIndicatorId)})],C.prototype,"indicatorTime",void 0),(0,i.gn)([(0,a.C1)({conditionalExpression:u=>!(null!==u.indicatorTime&&""!=u.indicatorTime||null!==u.qualityIndicatorId&&u.qualityIndicatorId||null!==u.satisfiedIndicatorId&&u.satisfiedIndicatorId)})],C.prototype,"indicatorQuantity",void 0),(0,i.gn)([(0,a.C1)({conditionalExpression:u=>!(null!==u.indicatorTime&&""!=u.indicatorTime||null!==u.indicatorQuantity&&""!=u.indicatorQuantity||null!==u.satisfiedIndicatorId&&u.satisfiedIndicatorId)})],C.prototype,"qualityIndicatorId",void 0),(0,i.gn)([(0,a.C1)({conditionalExpression:u=>!(null!==u.indicatorTime&&""!=u.indicatorTime||null!==u.indicatorQuantity&&""!=u.indicatorQuantity||null!==u.qualityIndicatorId&&u.qualityIndicatorId)})],C.prototype,"satisfiedIndicatorId",void 0),(0,i.gn)([(0,a.IE)(),(0,a.Dw)()],C.prototype,"staffCode",void 0)},6993:(N,M,n)=>{n.d(M,{v:()=>be});var i=n(7489),a=n(2156),C=n(1837),u=n(7792),e=n(8274),m=n(4325),x=n(841),I=n(2463),B=n(8386),t=n(704),p=n(3678),_=n(6895),s=n(433),b=n(805),h=n(585),c=n(5593),D=n(2946),g=n(1740),Z=n(5047),k=n(1231),Y=n(2634),W=n(299);function H(r,A){1&r&&(e.TgZ(0,"div",32)(1,"span",33),e._uU(2,"\u0e9b\u0ec9\u0ead\u0e99\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d"),e.qZA()())}function R(r,A){if(1&r&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.subject.errors.required?null:o.controls.subject.errors.required.message," ")}}function $(r,A){if(1&r&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.weight.errors.required?null:o.controls.weight.errors.required.message," ")}}function K(r,A){1&r&&(e.TgZ(0,"div",32)(1,"span",33),e._uU(2,"\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0ec1\u0e9c\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),e.qZA()())}function V(r,A){if(1&r&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.scheduledStart.errors.required?null:o.controls.scheduledStart.errors.required.message," ")}}function z(r,A){if(1&r&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.scheduledEnd.errors.required?null:o.controls.scheduledEnd.errors.required.message," ")}}function X(r,A){if(1&r&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.progressPrevious.errors.required?null:o.controls.progressPrevious.errors.required.message," ")}}function ee(r,A){1&r&&(e.TgZ(0,"div",32)(1,"span",33),e._uU(2,"\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94"),e.qZA()())}function te(r,A){1&r&&(e.TgZ(0,"small",34),e._uU(1," *\u0e81\u0eb0\u0ea5\u0eb8\u0e99\u0eb2\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94\u0ea2\u0ec8\u0eb2\u0e87\u0edc\u0ec9\u0ead\u0e8d\u0edc\u0eb6\u0ec8\u0e87\u0e82\u0ecd\u0ec9\u0e82\u0eb6\u0ec9\u0e99\u0ec4\u0e9b "),e.qZA())}let ie=(()=>{class r{constructor(o,l,U,j,q,ae,re,se){this.dialogRef=o,this.formService=l,this.fb=U,this.planSubService=j,this.userService=q,this.alertService=ae,this.dialogConfig=re,this.planSubWfService=se,this.submitted=!1,this.planSubs=[],this.formGroup=this.fb.formGroup(new u.d),a.jc.set(this.formService.validationMessages),this.workflowId=this.dialogConfig.data.workflowId,this.planMain=this.dialogConfig.data.planMain}get controls(){return this.formGroup.controls}ngOnInit(){this.user=this.userService.getLoggedUser(),this.initFormData()}initFormData(){this.planMain&&this.formGroup.patchValue({planMainId:this.planMain?.id})}onSubmit(){this.submitted=!0,!this.formGroup.invalid&&(this.prepareFormData(),this.formGroup.disable(),this.planSubService.create(this.workflowId,this.formGroup.value).subscribe({next:o=>this.handlePlanSubCreation(o),error:o=>this.handleError(o)}))}prepareFormData(){const o=this.formGroup.value;o.indicatorTime&&(o.indicatorTime=this.formatDateTime(o.indicatorTime)),delete o.staffCode}formatDateTime(o){return C.ou.fromJSDate(o).toFormat("yyyy-MM-dd HH:mm")}handlePlanSubCreation(o){if(o&&o?.id){const l=o.id;l&&setTimeout(()=>{this.createWorkflow(l)},500)}else this.handleError("\u0e9a\u0ecd\u0ec8\u0eaa\u0eb2\u0ea1\u0eb2\u0e94\u0eaa\u0ec9\u0eb2\u0e87\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d\u0ec4\u0e94\u0ec9")}createWorkflow(o){if(o){const l=this.user?.profile?.staffCode,j=this.formGroup.value.staffCode.map(q=>({planSubId:o,staffCode:q,createdBy:l}));this.planSubWfService.create(this.workflowId,o,j).subscribe({next:()=>{this.resetData(),this.alertService.showSuccess("\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ea7\u0ebd\u0e81\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94")},error:q=>this.handleError(q)})}}handleError(o){this.formGroup.enable(),this.alertService.showError(o)}resetData(){this.formGroup.reset(),this.formGroup.enable(),this.submitted=!1,this.dialogRef&&this.dialogRef.close()}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(m.E7),e.Y36(x.k),e.Y36(a.GW),e.Y36(I.Z),e.Y36(B.K),e.Y36(t.c),e.Y36(m.S),e.Y36(p.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-hq-create-form"]],decls:67,vars:34,consts:[[1,"grid"],[1,"col-12"],[3,"formGroup"],[3,"toggleable"],["pTemplate","header"],[1,"formgrid","grid","p-fluid"],[1,"field","col-12"],["for","subject",1,"font-semibold","mb-0"],[1,"text-lg"],["class","p-error",4,"ngIf"],["type","text","pInputText","","id","subject","formControlName","subject"],[1,"field","col-6"],["for","weight",1,"font-semibold","mb-0"],["inputId","weight","suffix","%","formControlName","weight",3,"min","max","maxFractionDigits"],[3,"label","submitted"],["styleClass","my-4",3,"toggleable"],[1,"field","col-4"],["for","scheduledStart",1,"font-semibold","mb-0"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","scheduledStart",3,"readonlyInput","showTime","showIcon"],["for","scheduledEnd",1,"font-semibold","mb-0"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","scheduledEnd",3,"readonlyInput","showTime","showIcon"],["for","progressPrevious",1,"font-semibold","mb-0"],["inputId","progressPrevious","suffix","%","formControlName","progressPrevious",3,"min","max","maxFractionDigits"],["for","indicatorTime",1,"font-semibold","mb-0"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","indicatorTime",3,"readonlyInput","showTime","showIcon"],["for","indicatorQuantity",1,"font-semibold","mb-0"],["type","text","id","indicatorQuantity","pInputText","","formControlName","indicatorQuantity","placeholder","\u0e9b\u0ec9\u0ead\u0e99\u0e88\u0eb3\u0e99\u0ea7\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"],[1,"font-semibold","mb-0"],[3,"submitted","editMode"],[1,"mt-5","text-right"],["pButton","","pRipple","","icon","pi pi-times","label","\u0e8d\u0ebb\u0e81\u0ec0\u0ea5\u0eb5\u0e81",1,"p-button-outlined",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-check","label","\u0e9a\u0eb1\u0e99\u0e97\u0eb6\u0e81",1,"ml-2",3,"disabled","loading","click"],[1,"flex","align-items-center","py-0","my-0"],[1,"font-semibold","text-lg","py-0","my-0"],[1,"p-error"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"p-fieldset",3),e.YNc(4,H,3,0,"ng-template",4),e.TgZ(5,"div",5)(6,"div",6)(7,"label",7)(8,"span",8),e._uU(9,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81"),e.qZA(),e.YNc(10,R,2,1,"small",9),e.qZA(),e._UZ(11,"input",10),e.qZA(),e.TgZ(12,"div",11)(13,"label",12)(14,"span",8),e._uU(15,"\u0e99\u0ec9\u0eb3\u0edc\u0eb1\u0e81"),e.qZA(),e.TgZ(16,"small"),e._uU(17,"(%)"),e.qZA(),e.YNc(18,$,2,1,"small",9),e.qZA(),e._UZ(19,"p-inputNumber",13),e.qZA(),e.TgZ(20,"div",11),e._UZ(21,"app-dropdown-staff-multi",14),e.qZA()()(),e.TgZ(22,"p-fieldset",15),e.YNc(23,K,3,0,"ng-template",4),e.TgZ(24,"div",5)(25,"div",16)(26,"label",17)(27,"span",8),e._uU(28,"\u0ec1\u0e9c\u0e99\u0ec0\u0ea5\u0eb5\u0ec8\u0ea1\u0e9b\u0eb0\u0e95\u0eb4\u0e9a\u0eb1\u0e94"),e.qZA(),e.YNc(29,V,2,1,"small",9),e.qZA(),e._UZ(30,"p-calendar",18),e.qZA(),e.TgZ(31,"div",16)(32,"label",19)(33,"span",8),e._uU(34,"\u0ec1\u0e9c\u0e99\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94"),e.qZA(),e.YNc(35,z,2,1,"small",9),e.qZA(),e._UZ(36,"p-calendar",20),e.qZA(),e.TgZ(37,"div",16)(38,"label",21)(39,"span",8),e._uU(40,"\u0e84\u0ea7\u0eb2\u0ea1\u0e84\u0eb7\u0e9a\u0edc\u0ec9\u0eb2\u0ec0\u0e94\u0eb7\u0ead\u0e99\u0e81\u0ec8\u0ead\u0e99"),e.qZA(),e.YNc(41,X,2,1,"small",9),e.qZA(),e._UZ(42,"p-inputNumber",22),e.qZA()()(),e.TgZ(43,"p-fieldset",3),e.YNc(44,ee,3,0,"ng-template",4),e.TgZ(45,"div",5)(46,"div",11)(47,"label",23),e._uU(48,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),e.qZA(),e._UZ(49,"p-calendar",24),e.qZA(),e.TgZ(50,"div",11)(51,"label",25),e._uU(52,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),e.qZA(),e._UZ(53,"input",26),e.qZA(),e.TgZ(54,"div",11)(55,"label",27),e._uU(56,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),e.qZA(),e._UZ(57,"app-dropdown-ind-quality",28),e.qZA(),e.TgZ(58,"div",11)(59,"label",27),e._uU(60,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),e.qZA(),e._UZ(61,"app-dropdown-ind-satisfied",28),e.qZA(),e.TgZ(62,"div",6),e.YNc(63,te,2,0,"small",9),e.qZA()()()()()(),e.TgZ(64,"div",29)(65,"button",30),e.NdJ("click",function(){return l.dialogRef.close()}),e.qZA(),e.TgZ(66,"button",31),e.NdJ("click",function(){return l.onSubmit()}),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("formGroup",l.formGroup),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(7),e.Q6J("ngIf",l.submitted&&l.controls.subject.errors),e.xp6(8),e.Q6J("ngIf",l.submitted&&l.controls.weight.errors),e.xp6(1),e.Q6J("min",1)("max",100)("maxFractionDigits",2),e.xp6(2),e.Q6J("label","\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec3\u0eab\u0ec9")("submitted",l.submitted),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(7),e.Q6J("ngIf",l.submitted&&l.controls.scheduledStart.errors),e.xp6(1),e.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),e.xp6(5),e.Q6J("ngIf",l.submitted&&l.controls.scheduledEnd.errors),e.xp6(1),e.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),e.xp6(5),e.Q6J("ngIf",l.submitted&&l.controls.progressPrevious.errors),e.xp6(1),e.Q6J("min",0)("max",100)("maxFractionDigits",2),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(6),e.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),e.xp6(8),e.Q6J("submitted",l.submitted)("editMode",!1),e.xp6(4),e.Q6J("submitted",l.submitted)("editMode",!1),e.xp6(2),e.Q6J("ngIf",l.submitted&&(l.controls.indicatorTime.errors||l.controls.indicatorQuantity.errors||l.controls.qualityIndicatorId.errors||l.controls.satisfiedIndicatorId.errors)),e.xp6(2),e.Q6J("disabled",l.formGroup.disabled),e.xp6(1),e.Q6J("disabled",l.formGroup.disabled)("loading",l.formGroup.disabled))},dependencies:[_.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,a.bc,a.VP,a.YE,b.jx,h.f,c.Hq,D.p,g.o,Z.Rn,k.$,Y.k,W.t],encapsulation:2}),r})();var P=n(655);class F{}(0,P.gn)([(0,a.C1)()],F.prototype,"planMainId",void 0),(0,P.gn)([(0,a.C1)()],F.prototype,"subject",void 0),(0,P.gn)([(0,a.C1)()],F.prototype,"weight",void 0),(0,P.gn)([(0,a.C1)()],F.prototype,"scheduledStart",void 0),(0,P.gn)([(0,a.C1)()],F.prototype,"scheduledEnd",void 0),(0,P.gn)([(0,a.C1)()],F.prototype,"progressPrevious",void 0),(0,P.gn)([(0,a.C1)({conditionalExpression:r=>!(null!==r.indicatorQuantity&&""!=r.indicatorQuantity||null!==r.qualityIndicatorId&&r.qualityIndicatorId||null!==r.satisfiedIndicatorId&&r.satisfiedIndicatorId)})],F.prototype,"indicatorTime",void 0),(0,P.gn)([(0,a.C1)({conditionalExpression:r=>!(null!==r.indicatorTime&&""!=r.indicatorTime||null!==r.qualityIndicatorId&&r.qualityIndicatorId||null!==r.satisfiedIndicatorId&&r.satisfiedIndicatorId)})],F.prototype,"indicatorQuantity",void 0),(0,P.gn)([(0,a.C1)({conditionalExpression:r=>!(null!==r.indicatorTime&&""!=r.indicatorTime||null!==r.indicatorQuantity&&""!=r.indicatorQuantity||null!==r.satisfiedIndicatorId&&r.satisfiedIndicatorId)})],F.prototype,"qualityIndicatorId",void 0),(0,P.gn)([(0,a.C1)({conditionalExpression:r=>!(null!==r.indicatorTime&&""!=r.indicatorTime||null!==r.indicatorQuantity&&""!=r.indicatorQuantity||null!==r.qualityIndicatorId&&r.qualityIndicatorId)})],F.prototype,"satisfiedIndicatorId",void 0),(0,P.gn)([(0,a.IE)(),(0,a.Dw)()],F.prototype,"officeId",void 0);var f=n(7593),S=n(7579),y=n(2722),Q=n(2569),L=n(1135),v=n(8505),w=n(2340),d=n(529);let E=(()=>{class r{constructor(o){this.http=o,this.items=new L.X([]),this.items$=this.items.asObservable(),this.apiUrl=w.N.apiUrl}getAllByDivId(o){return this.http.get(`${this.apiUrl}/v1/offices/div/${o}`).pipe((0,v.b)(U=>{200===U?.statusCode&&U?.data&&this.items.next(U.data)}))}}return r.\u0275fac=function(o){return new(o||r)(e.LFG(d.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var T=n(5722);function O(r,A){if(1&r&&(e.TgZ(0,"small",8),e._uU(1),e.qZA()),2&r){const o=e.oxw(2);e.xp6(1),e.hij(" *",null==o.control.errors.required?null:o.control.errors.required.message," ")}}function J(r,A){if(1&r&&(e.ynx(0),e.TgZ(1,"label",5)(2,"span",6),e._uU(3),e.qZA(),e.YNc(4,O,2,1,"small",7),e.qZA(),e.BQk()),2&r){const o=e.oxw();e.xp6(3),e.Oqu(o.label),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.control.errors)}}function G(r,A){if(1&r&&(e.TgZ(0,"div",9)(1,"div"),e._uU(2),e.qZA()()),2&r){const o=A.$implicit;e.xp6(2),e.AsE("[",null==o?null:o.code,"]-",null==o?null:o.name,"")}}function oe(r,A){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const o=A.$implicit;e.xp6(1),e.AsE("[",null==o?null:o.code,"]-",null==o?null:o.name,"")}}let ne=(()=>{class r{constructor(o,l,U,j,q){this.parentForm=o,this.cdr=l,this.loadingService=U,this.officeService=j,this.userService=q,this.submitted=!1,this.showLabel=!0,this.label="\u0eab\u0ec9\u0ead\u0e87\u0e81\u0eb2\u0e99",this.editMode=!1,this.offices=[],this.loading$=this.loadingService.state$,this.destroy$=new S.x}get control(){return this.formGroup.get("officeId")}ngOnInit(){this.formGroup=this.parentForm.control,this.user=this.userService.getLoggedUser(),this.officeService.items$.pipe((0,y.R)(this.destroy$)).subscribe(o=>{this.offices=o,this.cdr.markForCheck()}),this.editMode&&this.getAllOffices()}getAllOffices(){const o=this.user?.profile?.division?.id;o?this.officeService.getAllByDivId(o).subscribe():this.offices=[]}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete()}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(s.sg),e.Y36(e.sBO),e.Y36(Q.b),e.Y36(E),e.Y36(B.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-dropdown-office-multi"]],inputs:{submitted:"submitted",showLabel:"showLabel",label:"label",editMode:"editMode"},decls:6,vars:9,consts:[[3,"formGroup"],[4,"ngIf"],["appendTo","body","id","officeId","defaultLabel","\u0ec0\u0ea5\u0eb7\u0ead\u0e81","optionValue","id","optionLabel","name","filterBy","code,name","emptyFilterMessage","\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99","display","chip","formControlName","officeId","styleClass","multiselect-custom-virtual-scroll",3,"options","showToggleAll","emptyMessage","filter","resetFilterOnHide","onFocus"],["pTemplate","selectedItem"],["pTemplate","item"],["for","officeId",1,"font-semibold","white-space-nowrap","mr-1"],[1,"text-lg"],["class","p-error",4,"ngIf"],[1,"p-error"],[1,"flex","align-items-center"]],template:function(o,l){1&o&&(e.TgZ(0,"form",0),e.YNc(1,J,5,2,"ng-container",1),e.TgZ(2,"p-multiSelect",2),e.NdJ("onFocus",function(){return l.getAllOffices()}),e.ALo(3,"async"),e.YNc(4,G,3,2,"ng-template",3),e.YNc(5,oe,2,2,"ng-template",4),e.qZA()()),2&o&&(e.Q6J("formGroup",l.formGroup),e.xp6(1),e.Q6J("ngIf",l.showLabel),e.xp6(1),e.Q6J("options",l.offices)("showToggleAll",!1)("emptyMessage",e.lcZ(3,7,l.loading$)?"\u0e81\u0eb3\u0ea5\u0eb1\u0e87\u0ec2\u0eab\u0ebc\u0e94..":"\u0e9a\u0ecd\u0ec8\u0e9e\u0ebb\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99")("filter",!0)("resetFilterOnHide",!0))},dependencies:[_.O5,s._Y,s.JJ,s.JL,s.sg,s.u,a.bc,a.VP,a.YE,T.NU,b.jx,_.Ov],encapsulation:2,changeDetection:0}),r})();function le(r,A){1&r&&(e.TgZ(0,"div",33)(1,"span",34),e._uU(2,"\u0e9b\u0ec9\u0ead\u0e99\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d"),e.qZA()())}function ue(r,A){if(1&r&&(e.TgZ(0,"small",35),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.subject.errors.required?null:o.controls.subject.errors.required.message," ")}}function de(r,A){if(1&r&&(e.TgZ(0,"small",35),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.weight.errors.required?null:o.controls.weight.errors.required.message," ")}}function ce(r,A){1&r&&(e.TgZ(0,"div",33)(1,"span",34),e._uU(2,"\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0ec1\u0e9c\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),e.qZA()())}function pe(r,A){if(1&r&&(e.TgZ(0,"small",35),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.scheduledStart.errors.required?null:o.controls.scheduledStart.errors.required.message," ")}}function me(r,A){if(1&r&&(e.TgZ(0,"small",35),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.scheduledEnd.errors.required?null:o.controls.scheduledEnd.errors.required.message," ")}}function fe(r,A){if(1&r&&(e.TgZ(0,"small",35),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" *",null==o.controls.progressPrevious.errors.required?null:o.controls.progressPrevious.errors.required.message," ")}}function Ee(r,A){1&r&&(e.TgZ(0,"div",33)(1,"span",34),e._uU(2,"\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94"),e.qZA()())}function he(r,A){1&r&&(e.TgZ(0,"small",35),e._uU(1," *\u0e81\u0eb0\u0ea5\u0eb8\u0e99\u0eb2\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94\u0ea2\u0ec8\u0eb2\u0e87\u0edc\u0ec9\u0ead\u0e8d\u0edc\u0eb6\u0ec8\u0e87\u0e82\u0ecd\u0ec9\u0e82\u0eb6\u0ec9\u0e99\u0ec4\u0e9b "),e.qZA())}let ge=(()=>{class r{constructor(o,l,U,j,q,ae,re,se){this.formService=o,this.fb=l,this.planSubService=U,this.userService=j,this.alertService=q,this.dialogConfig=ae,this.officeWfService=re,this.dialogRef=se,this.submitted=!1,this.planSubs=[],this.formGroup=this.fb.formGroup(new F),a.jc.set(this.formService.validationMessages),this.workflowId=this.dialogConfig.data.workflowId,this.planMain=this.dialogConfig.data.planMain}get controls(){return this.formGroup.controls}ngOnInit(){this.user=this.userService.getLoggedUser(),this.initFormData()}initFormData(){this.planMain&&this.formGroup.patchValue({planMainId:this.planMain?.id})}onSubmit(){this.submitted=!0,!this.formGroup.invalid&&(this.prepareFormData(),this.formGroup.disable(),this.planSubService.create(this.workflowId,this.formGroup.value).subscribe({next:o=>this.handlePlanSubCreation(o),error:o=>this.handleError(o)}))}prepareFormData(){const o=this.formGroup.value;o.indicatorTime&&(o.indicatorTime=this.formatDateTime(o.indicatorTime)),delete o.officeId}formatDateTime(o){return C.ou.fromJSDate(o).toFormat("yyyy-MM-dd HH:mm")}handlePlanSubCreation(o){if(o&&o?.id){const l=o.id;l&&setTimeout(()=>{this.createWorkflow(l)},500)}else this.handleError("\u0e9a\u0ecd\u0ec8\u0eaa\u0eb2\u0ea1\u0eb2\u0e94\u0eaa\u0ec9\u0eb2\u0e87\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d\u0ec4\u0e94\u0ec9")}createWorkflow(o){if(o){const l=this.user?.profile?.staffCode,j=this.formGroup.value.officeId.map(q=>({planSubId:o,officeId:q,createdBy:l}));this.officeWfService.create(this.workflowId,o,j).subscribe({next:()=>{this.resetData(),this.alertService.showSuccess("\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ea7\u0ebd\u0e81\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94")},error:q=>this.handleError(q)})}}handleError(o){this.formGroup.enable(),this.alertService.showError(o)}resetData(){this.formGroup.reset(),this.formGroup.enable(),this.submitted=!1,this.dialogRef&&this.dialogRef.close()}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(x.k),e.Y36(a.GW),e.Y36(I.Z),e.Y36(B.K),e.Y36(t.c),e.Y36(m.S),e.Y36(f.f),e.Y36(m.E7))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-branch-create-form"]],decls:65,vars:33,consts:[[1,"grid"],[1,"col-12"],[3,"formGroup"],["pTemplate","header"],[1,"formgrid","grid","p-fluid"],[1,"field","col-12"],["for","subject",1,"mb-0"],[1,"font-semibold","text-lg"],["class","p-error",4,"ngIf"],["type","text","pInputText","","id","subject","formControlName","subject"],[1,"field","col-6"],["for","weight",1,"mb-0"],["inputId","weight","suffix","%","formControlName","weight",3,"min","max","maxFractionDigits"],[3,"label","submitted"],["styleClass","my-4",3,"toggleable"],[1,"field","col-4"],["for","scheduledStart",1,"font-semibold","mb-0"],[1,"text-lg"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","scheduledStart",3,"readonlyInput","showTime","showIcon"],["for","scheduledEnd",1,"font-semibold","mb-0"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","scheduledEnd",3,"readonlyInput","showTime","showIcon"],["for","progressPrevious",1,"font-semibold","mb-0"],["inputId","progressPrevious","suffix","%","formControlName","progressPrevious",3,"min","max","maxFractionDigits"],[3,"toggleable"],["for","indicatorTime",1,"font-semibold","mb-0"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","indicatorTime",3,"readonlyInput","showTime","showIcon"],["for","indicatorQuantity",1,"font-semibold","mb-0"],["type","text","id","indicatorQuantity","pInputText","","formControlName","indicatorQuantity","placeholder","\u0e9b\u0ec9\u0ead\u0e99\u0e88\u0eb3\u0e99\u0ea7\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"],[1,"font-semibold","mb-0"],[3,"submitted","editMode"],[1,"mt-5","text-right"],["pButton","","pRipple","","icon","pi pi-times","label","\u0e8d\u0ebb\u0e81\u0ec0\u0ea5\u0eb5\u0e81",1,"p-button-outlined",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-check","label","\u0e9a\u0eb1\u0e99\u0e97\u0eb6\u0e81",1,"ml-2",3,"disabled","loading","click"],[1,"flex","align-items-center","py-0","my-0"],[1,"font-semibold","text-lg","py-0","my-0"],[1,"p-error"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"p-fieldset"),e.YNc(4,le,3,0,"ng-template",3),e.TgZ(5,"div",4)(6,"div",5)(7,"label",6)(8,"span",7),e._uU(9,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81"),e.qZA(),e.YNc(10,ue,2,1,"small",8),e.qZA(),e._UZ(11,"input",9),e.qZA(),e.TgZ(12,"div",10)(13,"label",11)(14,"span",7),e._uU(15,"\u0e99\u0ec9\u0eb3\u0edc\u0eb1\u0e81 (%)"),e.qZA(),e.YNc(16,de,2,1,"small",8),e.qZA(),e._UZ(17,"p-inputNumber",12),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"app-dropdown-office-multi",13),e.qZA()()(),e.TgZ(20,"p-fieldset",14),e.YNc(21,ce,3,0,"ng-template",3),e.TgZ(22,"div",4)(23,"div",15)(24,"label",16)(25,"span",17),e._uU(26,"\u0ec1\u0e9c\u0e99\u0ec0\u0ea5\u0eb5\u0ec8\u0ea1\u0e9b\u0eb0\u0e95\u0eb4\u0e9a\u0eb1\u0e94"),e.qZA(),e.YNc(27,pe,2,1,"small",8),e.qZA(),e._UZ(28,"p-calendar",18),e.qZA(),e.TgZ(29,"div",15)(30,"label",19)(31,"span",17),e._uU(32,"\u0ec1\u0e9c\u0e99\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94"),e.qZA(),e.YNc(33,me,2,1,"small",8),e.qZA(),e._UZ(34,"p-calendar",20),e.qZA(),e.TgZ(35,"div",15)(36,"label",21)(37,"span",17),e._uU(38,"\u0e84\u0ea7\u0eb2\u0ea1\u0e84\u0eb7\u0e9a\u0edc\u0ec9\u0eb2\u0ec0\u0e94\u0eb7\u0ead\u0e99\u0e81\u0ec8\u0ead\u0e99"),e.qZA(),e.YNc(39,fe,2,1,"small",8),e.qZA(),e._UZ(40,"p-inputNumber",22),e.qZA()()(),e.TgZ(41,"p-fieldset",23),e.YNc(42,Ee,3,0,"ng-template",3),e.TgZ(43,"div",4)(44,"div",10)(45,"label",24),e._uU(46,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),e.qZA(),e._UZ(47,"p-calendar",25),e.qZA(),e.TgZ(48,"div",10)(49,"label",26),e._uU(50,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),e.qZA(),e._UZ(51,"input",27),e.qZA(),e.TgZ(52,"div",10)(53,"label",28),e._uU(54,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),e.qZA(),e._UZ(55,"app-dropdown-ind-quality",29),e.qZA(),e.TgZ(56,"div",10)(57,"label",28),e._uU(58,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),e.qZA(),e._UZ(59,"app-dropdown-ind-satisfied",29),e.qZA(),e.TgZ(60,"div",5),e.YNc(61,he,2,0,"small",8),e.qZA()()()()()(),e.TgZ(62,"div",30)(63,"button",31),e.NdJ("click",function(){return l.dialogRef.close()}),e.qZA(),e.TgZ(64,"button",32),e.NdJ("click",function(){return l.onSubmit()}),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("formGroup",l.formGroup),e.xp6(8),e.Q6J("ngIf",l.submitted&&l.controls.subject.errors),e.xp6(6),e.Q6J("ngIf",l.submitted&&l.controls.weight.errors),e.xp6(1),e.Q6J("min",1)("max",100)("maxFractionDigits",2),e.xp6(2),e.Q6J("label","\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec3\u0eab\u0ec9")("submitted",l.submitted),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(7),e.Q6J("ngIf",l.submitted&&l.controls.scheduledStart.errors),e.xp6(1),e.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),e.xp6(5),e.Q6J("ngIf",l.submitted&&l.controls.scheduledEnd.errors),e.xp6(1),e.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),e.xp6(5),e.Q6J("ngIf",l.submitted&&l.controls.progressPrevious.errors),e.xp6(1),e.Q6J("min",0)("max",100)("maxFractionDigits",2),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(6),e.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),e.xp6(8),e.Q6J("submitted",l.submitted)("editMode",!1),e.xp6(4),e.Q6J("submitted",l.submitted)("editMode",!1),e.xp6(2),e.Q6J("ngIf",l.submitted&&(l.controls.indicatorTime.errors||l.controls.indicatorQuantity.errors||l.controls.qualityIndicatorId.errors||l.controls.satisfiedIndicatorId.errors)),e.xp6(2),e.Q6J("disabled",l.formGroup.disabled),e.xp6(1),e.Q6J("disabled",l.formGroup.disabled)("loading",l.formGroup.disabled))},dependencies:[_.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,a.bc,a.VP,a.YE,c.Hq,g.o,Z.Rn,b.jx,D.p,h.f,Y.k,W.t,ne],encapsulation:2}),r})();var Ce=n(7727);function ve(r,A){if(1&r){const o=e.EpF();e.ynx(0),e.TgZ(1,"p-button",1),e.NdJ("click",function(){const j=e.CHM(o).ngIf,q=e.oxw();return e.KtG(q.showCreateForm(j))}),e.qZA(),e.BQk()}}let be=(()=>{class r{constructor(o,l,U){this.dialogRef=o,this.dialogService=l,this.planMainService=U,this.isBranch=!1,this.menuItems=[]}ngOnInit(){}onDropdownClick(o){this.task=o,this.menuItems=this.generateMenuItems(this.task)}showCreateForm(o){this.openCreateFormDialog(o)}generateMenuItems(o){return[{label:"\u0eaa\u0ec9\u0eb2\u0e87\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d",icon:"pi pi-fw pi-plus",command:()=>{this.showCreateForm(o)}}]}openCreateFormDialog(o){this.isBranch?this.dialogService.open(ge,this.getDialogOptions("Branch",o)):this.dialogService.open(ie,this.getDialogOptions("HQ",o))}getDialogOptions(o,l){return{header:`\u0eaa\u0ec9\u0eb2\u0e87\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d\u0ec1\u0e9c\u0e99\u0eaa\u0eb9\u0ec9\u0e8a\u0ebb\u0e99 #${l?.id}`,width:"80%",data:{planMain:(0,i.cloneDeep)(l),workflowId:this.workflowId},contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0}}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(m.E7),e.Y36(m.xA),e.Y36(Ce.x))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-plan-main-action"]],inputs:{task:"task",workflowId:"workflowId",isBranch:"isBranch"},decls:1,vars:1,consts:[[4,"ngIf"],["icon","pi pi-plus","label","\u0eaa\u0ec9\u0eb2\u0e87\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d","styleClass","p-button-secondary p-button-sm",3,"click"]],template:function(o,l){1&o&&e.YNc(0,ve,2,0,"ng-container",0),2&o&&e.Q6J("ngIf",l.task)},dependencies:[_.O5,c.zx],encapsulation:2}),r})()},5825:(N,M,n)=>{n.d(M,{T:()=>F});var i=n(6895),a=n(5593),C=n(4466),u=n(8274),e=n(805);let k=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275mod=u.oAB({type:f}),f.\u0275inj=u.cJS({imports:[i.ez,e.m8]}),f})();var Y=n(585),W=n(1989),H=n(2946),R=n(5047),$=n(1740),K=n(9764),V=n(1119),z=n(1889),X=n(1480);let ee=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275mod=u.oAB({type:f}),f.\u0275inj=u.cJS({imports:[i.ez,C.m,k,K.Q,Y._8,W.nD,H.L,$.j,R.L$,X._,V.H,z.P]}),f})();var te=n(5722);let ie=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275mod=u.oAB({type:f}),f.\u0275inj=u.cJS({imports:[i.ez,C.m,te.q4]}),f})(),P=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275mod=u.oAB({type:f}),f.\u0275inj=u.cJS({imports:[i.ez,C.m,a.hJ,$.j,R.L$,K.Q,H.L,Y._8,V.H,z.P,ie]}),f})(),F=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275mod=u.oAB({type:f}),f.\u0275inj=u.cJS({imports:[i.ez,a.hJ,ee,P]}),f})()},2300:(N,M,n)=>{n.d(M,{k:()=>L});var i=n(2156),a=n(7489),C=n(1837),u=n(7792),e=n(7579),m=n(3900),x=n(9646),I=n(2722);class B{static getOne(w){return{query:{fields:["main.id","main.docYear","main.docNo","main.subject","main.weight","main.indicatorTime","main.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","main.scheduledStart","main.scheduledEnd","main.createdAt","main.updatedAt","main.approvedAt","creator.staffCode","creator.firstName","creator.lastName","updater.staffCode","updater.firstName","updater.lastName","status.id","status.icon","status.name","status.color"],joins:["iq","is","creator","updater","status"],filters:w,getType:"ONE"}}}static getDetail(w,d){let E=["main.id","main.docYear","main.docNo","main.subject","main.weight","main.indicatorTime","main.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","main.scheduledStart","main.scheduledEnd","main.createdAt","main.updatedAt","main.approvedAt","creator.staffCode","creator.firstName","creator.lastName","updater.staffCode","updater.firstName","updater.lastName","status.id","status.icon","status.name","status.color"],T=["iq","is","creator","updater","status"];return d?(E.push("owf.id","oworkflows.id","oworkflows.name"),T.push("owf","oworkflows")):(E.push("swf.id","sworkflows.staffCode","sworkflows.firstName","sworkflows.lastName"),T.push("swf","sworkflows")),{query:{fields:E,joins:T,filters:w,getType:"ONE"}}}static getWorkflow(w){return{query:{fields:["a.id","a.taskMainId","a.assignedTo","aa.staffCode","aa.firstName","aa.lastName","ab.name","ab.icon","ab.color"],joins:["aa","ab"],filters:w,getType:"MANY"}}}}var t=n(8274),p=n(4325),_=n(841),s=n(2463),b=n(3678),h=n(704),c=n(6895),D=n(433),g=n(805),Z=n(585),k=n(5593),Y=n(2946),W=n(1740),H=n(5047),R=n(1231),$=n(2634),K=n(299);function V(v,w){1&v&&(t.TgZ(0,"div",32)(1,"span",33),t._uU(2,"\u0e9b\u0ec9\u0ead\u0e99\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d"),t.qZA()())}function z(v,w){if(1&v&&(t.TgZ(0,"small",34),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(1),t.hij(" *",null==d.controls.subject.errors.required?null:d.controls.subject.errors.required.message," ")}}function X(v,w){if(1&v&&(t.TgZ(0,"small",34),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(1),t.hij(" *",null==d.controls.weight.errors.required?null:d.controls.weight.errors.required.message," ")}}function ee(v,w){1&v&&(t.TgZ(0,"div",32)(1,"span",33),t._uU(2,"\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0ec1\u0e9c\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),t.qZA()())}function te(v,w){if(1&v&&(t.TgZ(0,"small",34),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(1),t.hij(" *",null==d.controls.scheduledStart.errors.required?null:d.controls.scheduledStart.errors.required.message," ")}}function ie(v,w){if(1&v&&(t.TgZ(0,"small",34),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(1),t.hij(" *",null==d.controls.scheduledEnd.errors.required?null:d.controls.scheduledEnd.errors.required.message," ")}}function P(v,w){if(1&v&&(t.TgZ(0,"small",34),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(1),t.hij(" *",null==d.controls.progressPrevious.errors.required?null:d.controls.progressPrevious.errors.required.message," ")}}function F(v,w){1&v&&(t.TgZ(0,"div",32)(1,"span",33),t._uU(2,"\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94"),t.qZA()())}function f(v,w){1&v&&(t.TgZ(0,"small",34),t._uU(1," *\u0e81\u0eb0\u0ea5\u0eb8\u0e99\u0eb2\u0e81\u0eb3\u0e99\u0ebb\u0e94\u0e95\u0ebb\u0ea7\u0e8a\u0eb5\u0ec9\u0ea7\u0eb1\u0e94\u0ea2\u0ec8\u0eb2\u0e87\u0edc\u0ec9\u0ead\u0e8d\u0edc\u0eb6\u0ec8\u0e87\u0e82\u0ecd\u0ec9\u0e82\u0eb6\u0ec9\u0e99\u0ec4\u0e9b "),t.qZA())}let S=(()=>{class v{constructor(d,E,T,O,J,G,oe,ne){this.dialogRef=d,this.formService=E,this.fb=T,this.planSubService=O,this.planSubWfService=J,this.alertService=G,this.dialogConfig=oe,this.cdr=ne,this.submitted=!1,this.newFiles=[],this.destroy$=new e.x,i.jc.set(this.formService.validationMessages)}get controls(){return this.formGroup.controls}ngOnInit(){this.planSubId=this.dialogConfig.data.data,this.formGroup=this.fb.formGroup(new u.d),this.planSubId&&this.getPlanSubDetail()}getPlanSubDetail(){}populateForm(d){if(!d)return;const E=d?.indicatorQuality?.id,T=d?.indicatorSatisfied?.id,O=d?.indicatorTime?new Date(d?.indicatorTime):null;this.formGroup.patchValue({...d,qualityIndicatorId:E,satisfiedIndicatorId:T,indicatorTime:O}),this.getPlanSubWorkflow(this.planSubId),this.initMainFormValues=this.formGroup.value}getPlanSubWorkflow(d){const E=Object.assign({taskMainId:d}),T=B.getWorkflow(E);this.planSubWfService.getMany(T).subscribe({next:O=>{if(O&&O.length){let J=O.map(G=>G.assignedTo);this.formGroup.patchValue({assignedTo:J}),this.initWfFormValues=J}}})}checkIndicators(){const{indicatorTime:d,indicatorQuantity:E,qualityIndicatorId:T,satisfiedIndicatorId:O}=this.controls;return this.submitted&&!!(d.errors||E.errors||T.errors||O.errors)}onSubmit(){if(this.submitted=!0,this.formGroup.invalid)return;const d=this.formGroup.value;if(d.indicatorTime){const T=C.ou.fromJSDate(d.indicatorTime).toFormat("yyyy-MM-dd HH:mm");d.indicatorTime=T}if(this.formGroup.disable(),this.planSubId){const E=this.formService.getFieldValueChange(this.initMainFormValues,d),T=a.omit(E,["staffCode"]),O=E.staffCode,J=this.formService.checkArrayValueChange(this.initWfFormValues,O);this.updatePlanMain(T).pipe((0,m.w)(()=>J?this.updateWorkflow(O):(0,x.of)(null)),(0,m.w)(()=>this.getOneById()),(0,I.R)(this.destroy$)).subscribe({next:G=>{G&&(this.resetData(),this.alertService.showSuccess("\u0e9a\u0eb1\u0e99\u0e97\u0eb6\u0e81\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99\u0ec1\u0ea5\u0ec9\u0ea7"))},error:G=>{this.alertService.showError(G)}})}}getOneById(){const E=B.getOne({id:this.planSubId});return this.planSubService.getOneAndReplace(E)}updatePlanMain(d){return this.planSubService.update(0,this.planSubId,d)}updateWorkflow(d){const E=d.map(T=>({planSubId:this.planSubId,staffCode:T}));return this.planSubWfService.create(0,0,E)}resetData(){this.formGroup.reset(),this.formGroup.enable(),this.submitted=!1,this.closeDialog()}closeDialog(){this.dialogRef&&this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return v.\u0275fac=function(d){return new(d||v)(t.Y36(p.E7),t.Y36(_.k),t.Y36(i.GW),t.Y36(s.Z),t.Y36(b.K),t.Y36(h.c),t.Y36(p.S),t.Y36(t.sBO))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-hq-update-form"]],decls:67,vars:34,consts:[[1,"grid"],[1,"col-12"],[3,"formGroup"],[3,"toggleable"],["pTemplate","header"],[1,"formgrid","grid","p-fluid"],[1,"field","col-12"],["for","subject",1,"font-semibold","mb-0"],[1,"text-lg"],["class","p-error",4,"ngIf"],["type","text","pInputText","","id","subject","formControlName","subject"],[1,"field","col-6"],["for","weight",1,"font-semibold","mb-0"],["inputId","weight","suffix","%","formControlName","weight",3,"min","max","maxFractionDigits"],[3,"label","submitted"],["styleClass","my-4",3,"toggleable"],[1,"field","col-4"],["for","scheduledStart",1,"font-semibold","mb-0"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","scheduledStart",3,"readonlyInput","showTime","showIcon"],["for","scheduledEnd",1,"font-semibold","mb-0"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","scheduledEnd",3,"readonlyInput","showTime","showIcon"],["for","progressPrevious",1,"font-semibold","mb-0"],["inputId","progressPrevious","suffix","%","formControlName","progressPrevious",3,"min","max","maxFractionDigits"],["for","indicatorTime",1,"font-semibold","mb-0"],["appendTo","body","dateFormat","dd/mm/yy","formControlName","indicatorTime",3,"readonlyInput","showTime","showIcon"],["for","indicatorQuantity",1,"font-semibold","mb-0"],["type","text","id","indicatorQuantity","pInputText","","formControlName","indicatorQuantity","placeholder","\u0e9b\u0ec9\u0ead\u0e99\u0e88\u0eb3\u0e99\u0ea7\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"],[1,"font-semibold","mb-0"],[3,"submitted","editMode"],[1,"mt-5","text-right"],["pButton","","pRipple","","icon","pi pi-times","label","\u0e8d\u0ebb\u0e81\u0ec0\u0ea5\u0eb5\u0e81",1,"p-button-outlined",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-check","label","\u0e9a\u0eb1\u0e99\u0e97\u0eb6\u0e81",1,"ml-2",3,"disabled","loading","click"],[1,"flex","align-items-center","py-0","my-0"],[1,"font-semibold","text-lg","py-0","my-0"],[1,"p-error"]],template:function(d,E){1&d&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"p-fieldset",3),t.YNc(4,V,3,0,"ng-template",4),t.TgZ(5,"div",5)(6,"div",6)(7,"label",7)(8,"span",8),t._uU(9,"\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81"),t.qZA(),t.YNc(10,z,2,1,"small",9),t.qZA(),t._UZ(11,"input",10),t.qZA(),t.TgZ(12,"div",11)(13,"label",12)(14,"span",8),t._uU(15,"\u0e99\u0ec9\u0eb3\u0edc\u0eb1\u0e81"),t.qZA(),t.TgZ(16,"small"),t._uU(17,"(%)"),t.qZA(),t.YNc(18,X,2,1,"small",9),t.qZA(),t._UZ(19,"p-inputNumber",13),t.qZA(),t.TgZ(20,"div",11),t._UZ(21,"app-dropdown-staff-multi",14),t.qZA()()(),t.TgZ(22,"p-fieldset",15),t.YNc(23,ee,3,0,"ng-template",4),t.TgZ(24,"div",5)(25,"div",16)(26,"label",17)(27,"span",8),t._uU(28,"\u0ec1\u0e9c\u0e99\u0ec0\u0ea5\u0eb5\u0ec8\u0ea1\u0e9b\u0eb0\u0e95\u0eb4\u0e9a\u0eb1\u0e94"),t.qZA(),t.YNc(29,te,2,1,"small",9),t.qZA(),t._UZ(30,"p-calendar",18),t.qZA(),t.TgZ(31,"div",16)(32,"label",19)(33,"span",8),t._uU(34,"\u0ec1\u0e9c\u0e99\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94"),t.qZA(),t.YNc(35,ie,2,1,"small",9),t.qZA(),t._UZ(36,"p-calendar",20),t.qZA(),t.TgZ(37,"div",16)(38,"label",21)(39,"span",8),t._uU(40,"\u0e84\u0ea7\u0eb2\u0ea1\u0e84\u0eb7\u0e9a\u0edc\u0ec9\u0eb2\u0ec0\u0e94\u0eb7\u0ead\u0e99\u0e81\u0ec8\u0ead\u0e99"),t.qZA(),t.YNc(41,P,2,1,"small",9),t.qZA(),t._UZ(42,"p-inputNumber",22),t.qZA()()(),t.TgZ(43,"p-fieldset",3),t.YNc(44,F,3,0,"ng-template",4),t.TgZ(45,"div",5)(46,"div",11)(47,"label",23),t._uU(48,"\u0e94\u0ec9\u0eb2\u0e99\u0ec0\u0ea7\u0ea5\u0eb2"),t.qZA(),t._UZ(49,"p-calendar",24),t.qZA(),t.TgZ(50,"div",11)(51,"label",25),t._uU(52,"\u0e94\u0ec9\u0eb2\u0e99\u0e9b\u0eb0\u0ea5\u0eb4\u0ea1\u0eb2\u0e99"),t.qZA(),t._UZ(53,"input",26),t.qZA(),t.TgZ(54,"div",11)(55,"label",27),t._uU(56,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0eb8\u0e99\u0e99\u0eb0\u0e9e\u0eb2\u0e9a"),t.qZA(),t._UZ(57,"app-dropdown-ind-quality",28),t.qZA(),t.TgZ(58,"div",11)(59,"label",27),t._uU(60,"\u0e94\u0ec9\u0eb2\u0e99\u0e84\u0ea7\u0eb2\u0ea1\u0ec0\u0e9e\u0eb4\u0ec8\u0e87\u0e9e\u0ecd\u0ec3\u0e88"),t.qZA(),t._UZ(61,"app-dropdown-ind-satisfied",28),t.qZA(),t.TgZ(62,"div",6),t.YNc(63,f,2,0,"small",9),t.qZA()()()()()(),t.TgZ(64,"div",29)(65,"button",30),t.NdJ("click",function(){return E.dialogRef.close()}),t.qZA(),t.TgZ(66,"button",31),t.NdJ("click",function(){return E.onSubmit()}),t.qZA()()),2&d&&(t.xp6(2),t.Q6J("formGroup",E.formGroup),t.xp6(1),t.Q6J("toggleable",!0),t.xp6(7),t.Q6J("ngIf",E.submitted&&E.controls.subject.errors),t.xp6(8),t.Q6J("ngIf",E.submitted&&E.controls.weight.errors),t.xp6(1),t.Q6J("min",1)("max",100)("maxFractionDigits",2),t.xp6(2),t.Q6J("label","\u0ea1\u0ead\u0e9a\u0edd\u0eb2\u0e8d\u0ec3\u0eab\u0ec9")("submitted",E.submitted),t.xp6(1),t.Q6J("toggleable",!0),t.xp6(7),t.Q6J("ngIf",E.submitted&&E.controls.scheduledStart.errors),t.xp6(1),t.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),t.xp6(5),t.Q6J("ngIf",E.submitted&&E.controls.scheduledEnd.errors),t.xp6(1),t.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),t.xp6(5),t.Q6J("ngIf",E.submitted&&E.controls.progressPrevious.errors),t.xp6(1),t.Q6J("min",0)("max",100)("maxFractionDigits",2),t.xp6(1),t.Q6J("toggleable",!0),t.xp6(6),t.Q6J("readonlyInput",!0)("showTime",!0)("showIcon",!0),t.xp6(8),t.Q6J("submitted",E.submitted)("editMode",!1),t.xp6(4),t.Q6J("submitted",E.submitted)("editMode",!1),t.xp6(2),t.Q6J("ngIf",E.submitted&&(E.controls.indicatorTime.errors||E.controls.indicatorQuantity.errors||E.controls.qualityIndicatorId.errors||E.controls.satisfiedIndicatorId.errors)),t.xp6(2),t.Q6J("disabled",E.formGroup.disabled),t.xp6(1),t.Q6J("disabled",E.formGroup.disabled)("loading",E.formGroup.disabled))},dependencies:[c.O5,D._Y,D.Fj,D.JJ,D.JL,D.sg,D.u,i.bc,i.VP,i.YE,g.jx,Z.f,k.Hq,Y.p,W.o,H.Rn,R.$,$.k,K.t],encapsulation:2}),v})();var y=n(605);function Q(v,w){if(1&v){const d=t.EpF();t.ynx(0),t.TgZ(1,"p-splitButton",1),t.NdJ("onClick",function(){t.CHM(d);const T=t.oxw();return t.KtG(T.showDetail())})("onDropdownClick",function(){t.CHM(d);const T=t.oxw();return t.KtG(T.onDropdownClick())}),t.qZA(),t.BQk()}if(2&v){const d=t.oxw();t.xp6(1),t.Q6J("model",d.menuItems)}}let L=(()=>{class v{constructor(d,E,T,O,J){this.dialogRef=d,this.confirmService=E,this.planSubService=T,this.alertService=O,this.dialogService=J,this.menuItems=[]}ngOnInit(){}onDropdownClick(){this.menuItems=[{label:"\u0ea5\u0eb6\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99",icon:"pi pi-fw pi-times",command:()=>{this.onConfirmDelete()}}]}showDetail(){}showUpdateForm(){const d=this.planSub?.taskMainId,E=this.planSub?.id;this.dialogRef=this.dialogService.open(S,{header:`\u0ec1\u0e81\u0ec9\u0ec4\u0e82\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99\u0edc\u0ec9\u0eb2\u0ea7\u0ebd\u0e81\u0e8d\u0ec8\u0ead\u0e8d #${E}`,width:"80%",data:{data:{taskWfId:this.taskWfId,taskMainId:d,taskSubId:E}},contentStyle:{overflow:"auto","padding-bottom":"20px"},baseZIndex:1e4,dismissableMask:!1,maximizable:!0})}onConfirmDelete(){const d=this.planSub?.id;this.taskWfId&&this.taskMainId&&d&&this.confirmService.confirm({message:"\u0ec1\u0e99\u0ec8\u0ec3\u0e88\u0e9a\u0ecd\u0ec8\u0ea7\u0ec8\u0eb2\u0e95\u0ec9\u0ead\u0e87\u0e81\u0eb2\u0e99\u0ea5\u0eb6\u0e9a\u0ea5\u0eb2\u0e8d\u0e81\u0eb2\u0e99\u0e99\u0eb5\u0ec9?",icon:"pi pi-exclamation-triangle",accept:()=>{this.onDelete(this.taskWfId,d)}})}onDelete(d,E){this.planSubService.deleteOne(d,E).subscribe({next:T=>{T&&this.alertService.showSuccess("\u0ea5\u0eb6\u0e9a\u0e82\u0ecd\u0ec9\u0ea1\u0eb9\u0e99\u0eae\u0ebd\u0e9a\u0eae\u0ec9\u0ead\u0e8d\u0ec1\u0ea5\u0ec9\u0ea7")},error:T=>this.alertService.showError(T)})}}return v.\u0275fac=function(d){return new(d||v)(t.Y36(p.E7),t.Y36(g.YP),t.Y36(s.Z),t.Y36(h.c),t.Y36(p.xA))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-plan-sub-action"]],inputs:{taskWfId:"taskWfId",taskMainId:"taskMainId",planSub:"planSub"},decls:1,vars:1,consts:[[4,"ngIf"],["appendTo","body","label","\u0ec0\u0e9a\u0eb4\u0ec8\u0e87\u0ea5\u0eb2\u0e8d\u0ea5\u0eb0\u0ead\u0ebd\u0e94","styleClass","p-button-secondary p-button-sm",3,"model","onClick","onDropdownClick"]],template:function(d,E){1&d&&t.YNc(0,Q,2,1,"ng-container",0),2&d&&t.Q6J("ngIf",E.planSub)},dependencies:[c.O5,y.a],encapsulation:2}),v})()},5353:(N,M,n)=>{n.d(M,{l:()=>u});var i=n(6895),a=n(605),C=n(8274);let u=(()=>{class e{}return e.\u0275fac=function(x){return new(x||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({imports:[i.ez,a.l]}),e})()},3033:(N,M,n)=>{n.d(M,{e:()=>i});class i{static getMany(C){return{query:{fields:["main.id","main.planMainId","main.createdAt","division.id","division.name","planMain.id","planMain.subject"],joins:["division","planMain"],filters:C,getType:"MANY"}}}static getPlanSub(C,u){let e=["main.id","main.planMainId","main.subject","main.weight","main.indicatorTime","main.indicatorQuantity","iq.id","iq.subject","is.id","is.subject","status.id","status.name","status.icon","status.color"];u?e.push("owf.id","oworkflows.id","oworkflows.name","owfStatus.name","owfStatus.icon","owfStatus.color"):e.push("swf.id","sworkflows.staffCode","sworkflows.firstName","sworkflows.lastName","swfStatus.name","swfStatus.icon","swfStatus.color");const x=u?"o":"s";return{query:{fields:e,joins:["iq","is","status",...["wf","workflows","wfStatus"].map(B=>x+B)],filters:C,getType:"MANY"}}}}},1094:(N,M,n)=>{n.d(M,{F:()=>C});var i=n(8274),a=n(6895);let C=(()=>{class u{constructor(m,x){this.datePipe=m,this.decimalPipe=x}dateFormat(m){return m&&this.datePipe.transform(m,"dd/MM/yyyy")||""}dateTimeShortFormat(m){return m&&this.datePipe.transform(m,"dd/MM/yyyy HH:mm")||""}dateTimeLongFormat(m){return m&&this.datePipe.transform(m,"dd/MM/yyyy HH:mm:ss")||""}formatNumber(m){return this.decimalPipe.transform(m,"1.2-2")||""}isValidUrl(m){return/^(http|https):\/\/([a-zA-Z0-9.-]+)(:[0-9]+)?(\/[a-zA-Z0-9-._~:?#[\]@!$&'()*+,;=\/]*)*$/.test(m)}getFullName(m){return`${m?.firstName} ${m?.lastName}`}getTooltip(m,x){return m&&m.length>x?m:""}}return u.\u0275fac=function(m){return new(m||u)(i.LFG(a.uU),i.LFG(a.JJ))},u.\u0275prov=i.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},8271:(N,M,n)=>{n.d(M,{F:()=>t,q:()=>B});var i=n(8274),a=n(6895);function C(p,_){if(1&p&&(i.TgZ(0,"span",4),i._uU(1),i.qZA()),2&p){const s=i.oxw();i.xp6(1),i.Oqu(s.label)}}function u(p,_){if(1&p&&i._UZ(0,"span",6),2&p){const s=i.oxw(2);i.Tol(s.icon),i.Q6J("ngClass","p-avatar-icon")}}function e(p,_){if(1&p&&i.YNc(0,u,1,3,"span",5),2&p){const s=i.oxw(),b=i.MAs(6);i.Q6J("ngIf",s.icon)("ngIfElse",b)}}function m(p,_){if(1&p){const s=i.EpF();i.TgZ(0,"img",8),i.NdJ("error",function(h){i.CHM(s);const c=i.oxw(2);return i.KtG(c.imageError(h))}),i.qZA()}if(2&p){const s=i.oxw(2);i.Q6J("src",s.image,i.LSH)}}function x(p,_){if(1&p&&i.YNc(0,m,1,1,"img",7),2&p){const s=i.oxw();i.Q6J("ngIf",s.image)}}const I=["*"];let B=(()=>{class p{constructor(){this.size="normal",this.shape="square",this.onImageError=new i.vpe}containerClass(){return{"p-avatar p-component":!0,"p-avatar-image":null!=this.image,"p-avatar-circle":"circle"===this.shape,"p-avatar-lg":"large"===this.size,"p-avatar-xl":"xlarge"===this.size}}imageError(s){this.onImageError.emit(s)}}return p.\u0275fac=function(s){return new(s||p)},p.\u0275cmp=i.Xpm({type:p,selectors:[["p-avatar"]],hostAttrs:[1,"p-element"],inputs:{label:"label",icon:"icon",image:"image",size:"size",shape:"shape",style:"style",styleClass:"styleClass"},outputs:{onImageError:"onImageError"},ngContentSelectors:I,decls:7,vars:6,consts:[[3,"ngClass","ngStyle"],["class","p-avatar-text",4,"ngIf","ngIfElse"],["iconTemplate",""],["imageTemplate",""],[1,"p-avatar-text"],[3,"class","ngClass",4,"ngIf","ngIfElse"],[3,"ngClass"],[3,"src","error",4,"ngIf"],[3,"src","error"]],template:function(s,b){if(1&s&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.YNc(2,C,2,1,"span",1),i.YNc(3,e,1,2,"ng-template",null,2,i.W1O),i.YNc(5,x,1,1,"ng-template",null,3,i.W1O),i.qZA()),2&s){const h=i.MAs(4);i.Tol(b.styleClass),i.Q6J("ngClass",b.containerClass())("ngStyle",b.style),i.xp6(2),i.Q6J("ngIf",b.label)("ngIfElse",h)}},dependencies:[a.mk,a.O5,a.PC],styles:[".p-avatar{display:inline-flex;align-items:center;justify-content:center;width:2rem;height:2rem;font-size:1rem}.p-avatar.p-avatar-image{background-color:transparent}.p-avatar.p-avatar-circle{border-radius:50%;overflow:hidden}.p-avatar .p-avatar-icon{font-size:1rem}.p-avatar img{width:100%;height:100%}\n"],encapsulation:2,changeDetection:0}),p})(),t=(()=>{class p{}return p.\u0275fac=function(s){return new(s||p)},p.\u0275mod=i.oAB({type:p}),p.\u0275inj=i.cJS({imports:[a.ez]}),p})()},8558:(N,M,n)=>{n.d(M,{H:()=>u,Q:()=>e});var i=n(8274),a=n(6895);const C=["*"];let u=(()=>{class m{}return m.\u0275fac=function(I){return new(I||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["p-avatarGroup"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style"},ngContentSelectors:C,decls:2,vars:4,consts:[[3,"ngClass","ngStyle"]],template:function(I,B){1&I&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA()),2&I&&(i.Tol(B.styleClass),i.Q6J("ngClass","p-avatar-group p-component")("ngStyle",B.style))},dependencies:[a.mk,a.PC],styles:[".p-avatar-group p-avatar+p-avatar{margin-left:-1rem}.p-avatar-group{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),m})(),e=(()=>{class m{}return m.\u0275fac=function(I){return new(I||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[a.ez]}),m})()},1989:(N,M,n)=>{n.d(M,{XZ:()=>p,nD:()=>_});var i=n(6895),a=n(8274),C=n(433),u=n(982);const e=["cb"],m=function(s,b,h){return{"p-checkbox-label":!0,"p-checkbox-label-active":s,"p-disabled":b,"p-checkbox-label-focus":h}};function x(s,b){if(1&s){const h=a.EpF();a.TgZ(0,"label",7),a.NdJ("click",function(D){a.CHM(h);const g=a.oxw(),Z=a.MAs(3);return a.KtG(g.onClick(D,Z,!0))}),a._uU(1),a.qZA()}if(2&s){const h=a.oxw();a.Tol(h.labelStyleClass),a.Q6J("ngClass",a.kEZ(5,m,h.checked(),h.disabled,h.focused)),a.uIk("for",h.inputId),a.xp6(1),a.Oqu(h.label)}}const I=function(s,b,h){return{"p-checkbox p-component":!0,"p-checkbox-checked":s,"p-checkbox-disabled":b,"p-checkbox-focused":h}},B=function(s,b,h){return{"p-highlight":s,"p-disabled":b,"p-focus":h}},t={provide:C.JU,useExisting:(0,a.Gpc)(()=>p),multi:!0};let p=(()=>{class s{constructor(h){this.cd=h,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new a.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(h,c,D){h.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(h),D&&c.focus())}updateModel(h){let c;this.binary?(c=this.checked()?this.falseValue:this.trueValue,this.model=c,this.onModelChange(c)):(c=this.checked()?this.model.filter(D=>!u.gb.equals(D,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(c),this.model=c,this.formControl&&this.formControl.setValue(c)),this.onChange.emit({checked:c,originalEvent:h})}handleChange(h){this.readonly||this.updateModel(h)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(h){this.model=h,this.cd.markForCheck()}registerOnChange(h){this.onModelChange=h}registerOnTouched(h){this.onModelTouched=h}setDisabledState(h){this.disabled=h,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:u.gb.contains(this.value,this.model)}}return s.\u0275fac=function(h){return new(h||s)(a.Y36(a.sBO))},s.\u0275cmp=a.Xpm({type:s,selectors:[["p-checkbox"]],viewQuery:function(h,c){if(1&h&&a.Gf(e,5),2&h){let D;a.iGM(D=a.CRH())&&(c.inputViewChild=D.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[a._Bn([t])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(h,c){if(1&h){const D=a.EpF();a.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),a.NdJ("focus",function(){return c.onFocus()})("blur",function(){return c.onBlur()})("change",function(Z){return c.handleChange(Z)}),a.qZA()(),a.TgZ(4,"div",4),a.NdJ("click",function(Z){a.CHM(D);const k=a.MAs(3);return a.KtG(c.onClick(Z,k,!0))}),a._UZ(5,"span",5),a.qZA()(),a.YNc(6,x,2,9,"label",6)}2&h&&(a.Tol(c.styleClass),a.Q6J("ngStyle",c.style)("ngClass",a.kEZ(18,I,c.checked(),c.disabled,c.focused)),a.xp6(2),a.Q6J("readonly",c.readonly)("value",c.value)("checked",c.checked())("disabled",c.disabled),a.uIk("id",c.inputId)("name",c.name)("tabindex",c.tabindex)("aria-labelledby",c.ariaLabelledBy)("aria-label",c.ariaLabel)("aria-checked",c.checked())("required",c.required),a.xp6(2),a.Q6J("ngClass",a.kEZ(22,B,c.checked(),c.disabled,c.focused)),a.xp6(1),a.Q6J("ngClass",c.checked()?c.checkboxIcon:null),a.xp6(1),a.Q6J("ngIf",c.label))},dependencies:[i.mk,i.O5,i.PC],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),s})(),_=(()=>{class s{}return s.\u0275fac=function(h){return new(h||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[i.ez]}),s})()}}]);