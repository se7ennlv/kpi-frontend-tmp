"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[9277],{1119:(O,T,a)=>{a.d(T,{H:()=>P});var e=a(6895),u=a(666),d=a(4466),E=a(8274);let P=(()=>{class g{}return g.\u0275fac=function(v){return new(v||g)},g.\u0275mod=E.oAB({type:g}),g.\u0275inj=E.cJS({imports:[e.ez,d.m,u.kW]}),g})()},1889:(O,T,a)=>{a.d(T,{P:()=>P});var e=a(6895),u=a(4466),d=a(666),E=a(8274);let P=(()=>{class g{}return g.\u0275fac=function(v){return new(v||g)},g.\u0275mod=E.oAB({type:g}),g.\u0275inj=E.cJS({imports:[e.ez,u.m,d.kW]}),g})()},3119:(O,T,a)=>{a.d(T,{$:()=>C});var e=a(4004),u=a(8505),d=a(1135),E=a(2340),P=a(8274),g=a(529);let C=(()=>{class v{constructor(_){this.http=_,this.apiUrl=`${E.N.apiUrl}/v1/plan-main-wf`,this.planSubApiUrl=`${E.N.apiUrl}/v1/plan-subs`,this.items=new d.X([]),this.items$=this.items.asObservable()}create(_){return this.http.post(this.apiUrl,_).pipe((0,e.U)(s=>!(201!==s?.statusCode||!s?.data)))}addNewSubTask(_,s){const l=this.items.getValue(),i=l.findIndex(c=>c.id===_);if(-1!==i){const c={...l[i]};c.planMain||(c.planMain={planSubs:[]});const p=c.planMain.planSubs||[];p.unshift(s),p.sort((m,f)=>f.id-m.id),c.planMain.planSubs=p,l[i]=c,this.items.next([...l])}}getMany(_){return this.http.post(`${this.apiUrl}/find`,_).pipe((0,u.b)(l=>{200===l?.statusCode&&l?.data&&this.items.next(l.data)}))}getManyPlanSub(_,s){return this.http.post(`${this.planSubApiUrl}/find`,s).pipe((0,u.b)(i=>{if(200===i?.statusCode&&i?.data){const c=i.data,p=this.items.getValue(),m=p.find(f=>f.planMainId===_);m&&(m.planSubs=c,this.items.next(p))}}))}getOnePlanSubAndReplace(_){return this.http.post(this.planSubApiUrl,_).pipe((0,u.b)(l=>{}))}updateWorkflow(_,s,l){const i=this.items.getValue(),c=i.findIndex(p=>p.id===_);if(-1!==c){const p={...i[c]};p.planMain||(p.planMain={planSubs:[]});const m=p.planMain.planSubs||[],f=m.findIndex(x=>x.id===s);if(-1!==f){const x={...m[f]};x.planSubWf=l,m[f]=x,p.planMain.planSubs=m,i[c]=p,this.items.next([...i])}}}getAll(_,s){return this.http.get(`${this.apiUrl}/${_}`,{params:s}).pipe((0,u.b)(i=>{200===i?.statusCode&&i?.data&&this.items.next(i.data)}))}removePlanSub(_,s){const l=this.items.getValue(),i=l.findIndex(c=>c?.id===_);if(-1!==i){const c=l[i],p=c.planSubs?.filter(x=>x.id!==s)||[],m={...c,planSubs:p},f=[...l.slice(0,i),m,...l.slice(i+1)];this.items.next(f)}}deleteMany(_){return this.http.delete(`${this.apiUrl}/${_}`).pipe((0,e.U)(l=>200===l?.statusCode))}}return v.\u0275fac=function(_){return new(_||v)(P.LFG(g.eN))},v.\u0275prov=P.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},7727:(O,T,a)=>{a.d(T,{x:()=>v});var e=a(1135),u=a(4004),d=a(8505),E=a(2340),P=a(7527),g=a(8274),C=a(529);let v=(()=>{class M{constructor(s){this.http=s,this.apiUrl=`${E.N.apiUrl}/v1/plan-mains`,this.item=new e.X(null),this.item$=this.item.asObservable(),this.items=new e.X([]),this.items$=this.items.asObservable()}create(s){return this.http.post(this.apiUrl,s).pipe((0,u.U)(l=>{if(201===l?.statusCode&&l?.data){const i=l.data,p=[...this.items.getValue(),i].sort((m,f)=>f.id-m.id);return this.items.next(p),i}}))}getOne(s){return this.http.post(`${this.apiUrl}/find`,s).pipe((0,d.b)(i=>{200===i?.statusCode&&i?.data&&this.item.next(i.data)}))}getOneAndReplace(s){return this.http.post(`${this.apiUrl}/find`,s).pipe((0,d.b)(i=>{if(200===i?.statusCode&&i?.data){const c=i.data,p=this.items.getValue();if(-1!==p.findIndex(f=>f.id===c.id)){const f=p.map(x=>x.id===c.id?{...x,...c}:x);this.items.next([...f])}}}))}getDetail(s){if(s){const i=P.E.getDetail({id:s});this.getOne(i).subscribe()}}getMany(s){return this.http.post(`${this.apiUrl}/find`,s).pipe((0,d.b)(i=>{200===i?.statusCode&&i?.data&&this.items.next(i.data)}))}update(s,l){return this.http.patch(`${this.apiUrl}/${s}`,l).pipe((0,u.U)(c=>{if(200===c?.statusCode&&c?.data){const p=c.data,f=this.items.getValue().map(x=>x?.id===p.id?p:x);return this.items.next(f),!0}return!1}))}deleteOne(s){return this.http.delete(`${this.apiUrl}/${s}`).pipe((0,u.U)(i=>200===i?.statusCode),(0,d.b)(i=>{if(i){const p=this.items.getValue().filter(m=>m?.id!==s);this.items.next(p)}}))}}return M.\u0275fac=function(s){return new(s||M)(g.LFG(C.eN))},M.\u0275prov=g.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},7527:(O,T,a)=>{a.d(T,{E:()=>e});class e{static getOneAfterCreated(d){return{query:{fields:["main.id","main.taskNo","main.taskSubject","main.taskWeight","main.createdAt"],joins:[],filters:d,getType:"ONE"}}}static getOneForUpdate(d){return{query:{fields:["main.id","main.docYear","main.taskNo","main.taskSubject","main.takWeight","main.target","workflows.taskId","division.id","division.name"],joins:["workflows","division"],filters:d,getType:"ONE"}}}static getDetail(d){return{query:{fields:["main.id","main.docYear","main.taskNo","main.taskSubject","main.taskWeight","main.target","main.createdAt","main.updatedAt","creator.staffCode","creator.firstName","creator.lastName","updater.staffCode","updater.firstName","updater.lastName","workflows.taskId","division.id","division.name"],joins:["creator","updater","workflows","division"],filters:d,getType:"ONE"}}}static getMany(d){return{query:{fields:["main.id","main.docYear","main.taskNo","main.taskSubject","main.taskWeight","main.createdAt"],joins:[],filters:d,getType:"MANY"}}}}},2946:(O,T,a)=>{a.d(T,{L:()=>w,p:()=>k});var e=a(8274),u=a(7340),d=a(6895),E=a(805),P=a(1795);const g=function(r,h){return{"pi-minus":r,"pi-plus":h}};function C(r,h){if(1&r&&e._UZ(0,"span",9),2&r){const t=e.oxw(2);e.Q6J("ngClass",e.WLB(1,g,!t.collapsed,t.collapsed))}}function v(r,h){1&r&&e.GkF(0)}function M(r,h){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",7),e.NdJ("click",function(n){e.CHM(t);const I=e.oxw();return e.KtG(I.toggle(n))})("keydown.enter",function(n){e.CHM(t);const I=e.oxw();return e.KtG(I.toggle(n))}),e.YNc(2,C,1,4,"span",8),e.YNc(3,v,1,0,"ng-container",6),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(),o=e.MAs(4);e.xp6(1),e.uIk("aria-controls",t.id+"-content")("aria-expanded",!t.collapsed),e.xp6(1),e.Q6J("ngIf",t.toggleable),e.xp6(1),e.Q6J("ngTemplateOutlet",o)}}function _(r,h){1&r&&e.GkF(0)}function s(r,h){if(1&r&&(e.TgZ(0,"span",10),e._uU(1),e.qZA(),e.Hsn(2,1),e.YNc(3,_,1,0,"ng-container",6)),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.legend),e.xp6(2),e.Q6J("ngTemplateOutlet",t.headerTemplate)}}function l(r,h){1&r&&e.GkF(0)}const i=["*",[["p-header"]]],c=function(r,h){return{"p-fieldset p-component":!0,"p-fieldset-toggleable":r,"p-fieldset-expanded":h}},p=function(r){return{transitionParams:r,height:"0"}},m=function(r){return{value:"hidden",params:r}},f=function(r){return{transitionParams:r,height:"*"}},x=function(r){return{value:"visible",params:r}},D=["*","p-header"];let A=0,k=(()=>{class r{constructor(t){this.el=t,this.collapsed=!1,this.collapsedChange=new e.vpe,this.onBeforeToggle=new e.vpe,this.onAfterToggle=new e.vpe,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-fieldset-"+A++}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":this.contentTemplate=t.template}})}toggle(t){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:t,collapsed:this.collapsed}),this.collapsed?this.expand(t):this.collapse(t),this.onAfterToggle.emit({originalEvent:t,collapsed:this.collapsed}),t.preventDefault()}expand(t){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(t){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(){this.animating=!1}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq))},r.\u0275cmp=e.Xpm({type:r,selectors:[["p-fieldset"]],contentQueries:function(t,o,n){if(1&t&&e.Suo(n,E.jx,4),2&t){let I;e.iGM(I=e.CRH())&&(o.templates=I)}},hostAttrs:[1,"p-element"],inputs:{legend:"legend",toggleable:"toggleable",collapsed:"collapsed",style:"style",styleClass:"styleClass",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:D,decls:9,vars:23,consts:[[3,"ngClass","ngStyle"],[1,"p-fieldset-legend"],[4,"ngIf","ngIfElse"],["legendContent",""],["role","region",1,"p-toggleable-content"],[1,"p-fieldset-content"],[4,"ngTemplateOutlet"],["tabindex","0","pRipple","",3,"click","keydown.enter"],["class","p-fieldset-toggler pi",3,"ngClass",4,"ngIf"],[1,"p-fieldset-toggler","pi",3,"ngClass"],[1,"p-fieldset-legend-text"]],template:function(t,o){if(1&t&&(e.F$t(i),e.TgZ(0,"fieldset",0)(1,"legend",1),e.YNc(2,M,4,4,"ng-container",2),e.YNc(3,s,4,2,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4),e.NdJ("@fieldsetContent.done",function(){return o.onToggleDone()}),e.TgZ(6,"div",5),e.Hsn(7),e.YNc(8,l,1,0,"ng-container",6),e.qZA()()()),2&t){const n=e.MAs(4);e.Tol(o.styleClass),e.Q6J("ngClass",e.WLB(12,c,o.toggleable,!o.collapsed&&o.toggleable))("ngStyle",o.style),e.uIk("id",o.id),e.xp6(2),e.Q6J("ngIf",o.toggleable)("ngIfElse",n),e.xp6(3),e.Q6J("@fieldsetContent",o.collapsed?e.VKq(17,m,e.VKq(15,p,o.transitionOptions)):e.VKq(21,x,e.VKq(19,f,o.animating?o.transitionOptions:"0ms"))),e.uIk("id",o.id+"-content")("aria-labelledby",o.id)("aria-hidden",o.collapsed),e.xp6(3),e.Q6J("ngTemplateOutlet",o.contentTemplate)}},dependencies:[d.mk,d.O5,d.tP,d.PC,P.H],styles:[".p-fieldset-legend>a,.p-fieldset-legend>span{display:flex;align-items:center;justify-content:center}.p-fieldset-toggleable .p-fieldset-legend a{cursor:pointer;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-fieldset-legend-text{line-height:1}.p-fieldset-toggleable.p-fieldset-expanded>.p-toggleable-content:not(.ng-animating){overflow:visible}.p-fieldset-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[(0,u.X$)("fieldsetContent",[(0,u.SB)("hidden",(0,u.oB)({height:"0"})),(0,u.SB)("visible",(0,u.oB)({height:"*"})),(0,u.eR)("visible <=> hidden",[(0,u.jt)("{{transitionParams}}")]),(0,u.eR)("void => *",(0,u.jt)(0))])]},changeDetection:0}),r})(),w=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,P.T,E.m8]}),r})()},9764:(O,T,a)=>{a.d(T,{Q:()=>h});var e=a(8274),u=a(6895),d=a(805),E=a(1795);let h=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,d.m8,E.T,d.m8]}),t})()}}]);